(this.webpackJsonpmallocivr=this.webpackJsonpmallocivr||[]).push([[0],{171:function(e,t,a){},215:function(e,t,a){},216:function(e,t,a){},247:function(e,t,a){e.exports=a.p+"static/media/Masha.24308106.png"},248:function(e,t,a){e.exports=a.p+"static/media/Michael.31dc53d4.png"},249:function(e,t,a){e.exports=a.p+"static/media/Yejun.890c2516.png"},250:function(e,t,a){e.exports=a.p+"static/media/Jennifer.b29c0550.png"},251:function(e,t,a){e.exports=a.p+"static/media/Sharanya.34043f5b.png"},257:function(e,t,a){e.exports=a(770)},262:function(e,t,a){},273:function(e,t,a){},434:function(e,t){},465:function(e,t,a){},769:function(e,t,a){},770:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(5),i=a.n(l),c=(a(262),a(13)),o=a(108);a(271),a(272);o.initializeApp({apiKey:"AIzaSyCLN6m_UZpazTVvrX1vtFdyTEPx7wYaTyk",authDomain:"malloci-8f365.firebaseapp.com",databaseURL:"https://malloci-8f365.firebaseio.com",projectId:"malloci-8f365",storageBucket:"malloci-8f365.appspot.com",messagingSenderId:"126802496533",appId:"1:126802496533:web:614183fabd31d8510bd21c",measurementId:"G-BSBQC0NNQJ"});var s=o.storage(),u=o.firestore(),m=(a(273),a(23)),d=a(74),h=a(53),f=a(98),g=a.n(f),p=a(127),b={},E=a(176),x=a(781),y=a(777),v=a(774),k=[{title:"Markdown",className:"markdown",dataIndex:"markdown"},{title:"Rendered",className:"rendered",dataIndex:"rendered"}],w=[{key:"1",markdown:"# Museum Title\n## Section Title\n### Subsection Title\n...",rendered:"Create rooms in your museum."},{key:"2",markdown:"![caption text](img.jpg)",rendered:"\u200bThe image will be framed and hung on the wall in the exhibit"},{key:"3",markdown:"> Block quote\n\n> Multi line\n> block quote",rendered:"\u200bThis text will become a descriptive panel, adding context to your exhibit"},{key:"4",markdown:'```\n// This code will be rendered\n// as text art\nvar s = "JavaScript syntax highlighting" \n alert(s);\n```',rendered:r.a.createElement("code",null,"// This code will be rendered",r.a.createElement("br",null),"// as text art",r.a.createElement("br",null),'var s = "JavaScript syntax highlighting"',r.a.createElement("br",null),"alert(s)")}],O=function(){return r.a.createElement("div",null,r.a.createElement(v.a,{id:"panelstyle",columns:k,dataSource:w,bordered:!0,pagination:!1}))},j=[{title:"Markdown",className:"markdown",dataIndex:"markdown"},{title:"Rendered",className:"rendered",dataIndex:"rendered"}],I=[{key:"1",markdown:"$[walls](img.jpg) \n$[ceiling](img.jpg) \n$[floor](img.jpg)\n$[frames](img.jpg)\n$[sky](255, 255, 255)",rendered:"set the textures of the walls,\nceiling,\nfloor,\nframes,\nor color of the sky (hex code or rgb)."},{key:"2",markdown:"![caption text](img.jpg) \n^[audio](audio-file.m4a)",rendered:"This audio file will be attached to the artifact on the line above it"},{key:"3",markdown:"> block quote\n> with cutom frame \n^[frame](img.jpg)",rendered:"This will define a custom frame texture for the artifact on the line above it"},{key:"4",markdown:"![caption text](img.jpg) \n^[frame](img.jpg)\n^[audio](audio-file.m4a)",rendered:"An artifact with a custom frame and audio description."},{key:"5",markdown:"~ \n![These artifacts](img.jpg) \n\n> Will be hidden\n> from the article\n> but will be visible\n> in the exhibit!\n~",rendered:"These artifacts will be visible in the VR museum, but not in the document view"}],N=function(){return r.a.createElement("div",null,r.a.createElement(v.a,{id:"panelstyle",columns:j,dataSource:I,bordered:!0,pagination:!1}))},S=y.a.Panel,A=function(){return r.a.createElement("div",{className:"markdown-container"},r.a.createElement(y.a,{defaultActiveKey:[""]},r.a.createElement(S,{header:"VR Markdown syntax guide",id:"headerstyle",key:"1"},r.a.createElement("div",{className:"syntax-guide"},r.a.createElement("p",null,"Basic Syntax:"),r.a.createElement(O,null),r.a.createElement("p",null,"Extended Syntax:"),r.a.createElement(N,null)))))},T=a(230),C=a.n(T),M=(a(436),x.a.TextArea);E.a.TabPane;var D={display:"none"};var B=function(e){var t=Object(n.useState)(e.value),a=Object(c.a)(t,2),l=a[0],i=a[1];return Object(n.useEffect)((function(){i(e.value)}),[e.value]),r.a.createElement("div",{id:"editorheight"},r.a.createElement(A,null),r.a.createElement(C.a,{id:"editor3",label:"Markdown Editor",value:l,onChange:function(e){i(e)},options:{insertTexts:{horizontalRule:["","\n\n-----\n\n"],image:["\n\n![a caption describing your image](image-name",".jpg)\n\n"],link:["[","](http://)"],table:["","\n\n| Column 1 | Column 2 | Column 3 |\n| -------- | -------- | -------- |\n| Text     | Text      | Text     |\n\n"]}}}),r.a.createElement(M,{id:"editor",value:l,style:D}))},P=a(784),W=a(780),F=a(775),R=a(28),V=a(785),_=["m4a","mp3","wav"],U={name:"file",multiple:!0,customRequest:function(e){var t=e.file,a=e.onError,n=e.onSuccess,r=Object(P.a)();(_.includes(t.name.split(".").pop())?s.ref("/audio/".concat(r+t.name)).put(t):s.ref("/images/".concat(r+t.name)).put(t)).on("state_changed",(function(e){console.log(e)}),(function(e){console.log(e),a(e,t)}),(function(e){_.includes(t.name.split(".").pop())?s.ref("audio").child(r+t.name).getDownloadURL().then((function(e){b[t.name]=e})):s.ref("images").child(r+t.name).getDownloadURL().then((function(e){b[t.name]=e})),n(e,t)}))},onChange:function(e){"uploading"!==e.file.status&&console.log(e.file,e.fileList),"done"===e.file.status?W.a.success("".concat(e.file.name," file uploaded successfully")):"error"===e.file.status&&W.a.error("".concat(e.file.name," file upload failed."))}},q=function(){return r.a.createElement(F.a,U,r.a.createElement(R.a,null,r.a.createElement(V.a,null)," Upload"))},$=a(58),J=a(776),H=a(102),L=a(45),z=a(779),G=function(e){var t=e.siteTitle;return r.a.createElement(z.a,{className:"site-page-header",title:t})};G.defaultProps={siteTitle:"Malloci"};var Y=G,K=a(786),Q=(a(465),function(e){var t=e.children;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{margin:"0 auto",padding:"0 1.0875rem 1.45rem"}},r.a.createElement("main",null,t),r.a.createElement("footer",null,"\xa9 ",(new Date).getFullYear(),", Built with mochi muffins.")))}),X=a(138),Z=a(139),ee=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Object(X.a)(this,e),this.VSCode=t,this.debug=a,this.tree=null,this.cleanedMD=null}return Object(Z.a)(e,[{key:"parseList",value:function(e){for(var t={rooms:[],theme:{floor:null,walls:null,ceiling:null,frames:null}},a={},n=[],r="",l="",i="",c="",o=!1,s=!1,u=e.split(","),m=0;m<u.length;m++){var d=u[m],h=d.split(" ");if("#"!==h[0].charAt(0)||o||(r=h.shift(),null!==a.name?(a.text=l,a.artifacts=n,l="",n=[],t.rooms.push(a),a={}):""!==l&&(t.text=l,t.artifact=n,l="",n=[]),"#"===r&&(t.name=h.join(" ")),a.name=h.join(" ")),">"!==h[0].charAt(0)||o?""!==i&&(n.push(this.parseArtifact(i,"block quote")),i=""):i+=h.join(" ").replace(">","").replace(/(^[\s]+|[\s]+$)/,"\n"),h[0].includes("```")&&!o?(c+=d+"\n",o=!0):o?(d.includes("```")&&(o=!1),c+=d+"\n"):""===c&&"`"===h[0].charAt(0)?(c+=d+"\n",n.push(this.parseArtifact(c,"code")),c=""):o||""===c||(n.push(this.parseArtifact(c,"code block")),c=""),"!"!==h[0].charAt(0)||o||n.push(this.parseArtifact(d,"image")),"$"===h[0].charAt(0)&&!o){var f=d.substring(d.lastIndexOf("[")+1,d.lastIndexOf("]")),g=d.substring(d.lastIndexOf("(")+1,d.lastIndexOf(")"));switch(f){default:break;case"floor":t.theme.floor=g;break;case"walls":t.theme.walls=g;break;case"ceiling":t.theme.ceiling=g;break;case"frames":t.theme.frames=g;break;case"sky":t.theme.sky=g}u.splice(m,1),--m}"&"!==h[0].charAt(0)||o||(n.push(this.parseArtifact(d,"3D")),u.splice(m,1),--m),"^"!==h[0].charAt(0)||o||(this.addAudio(n,d),u.splice(m,1),--m),"~"!==h[0]||o||(s=!s),(s||"~"===h[0]&&!o)&&(u.splice(m,1),--m),this.debug&&console.log(n),l+=d+"\n"}return null!==a.name&&(a.text=l,a.artifacts=n,l="",n=[],t.rooms.push(a),a={}),this.tree=t,this.cleanedMD=u.join("\n"),this.tree}},{key:"parse",value:function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;console.log("parsing");var r={rooms:[],theme:{floor:null,walls:null,ceiling:null,frames:null,sky:null}},l={},i=[],c="",o="",s="",u="",m=!1,d=!1,h=(e.match(/\n### /g)||[]).length;console.log("###",h);for(var f=0,g=0,p=e.split("\n"),b=0;b<p.length;b++){var E=p[b],x=E.split(" ");if("#"===x[0].charAt(0)&&!m){if(t&&x[0].includes("###")&&h>t)continue;if(f++,t&&f>t)break;c=x.shift(),null!==l.name?(l.text=o,l.artifacts=i,o="",i=[],r.rooms.push(l),l={},g=0):""!==o&&(r.text=o,r.artifact=i,o="",i=[]),"#"===c&&(r.name=x.join(" ")),l.name=x.join(" ")}if(">"!==x[0].charAt(0)||m?""!==s&&(i.push(this.parseArtifact(s,"block quote")),s=""):s+=x.join(" ").replace(">","").replace(/(^[\s]+|[\s]+$)/,"\n"),x[0].includes("```")&&!m?(u+=E+"\n",m=!0):m?(E.includes("```")&&(m=!1),u+=E+"\n"):""===u&&"`"===x[0].charAt(0)?(u+=E+"\n",i.push(this.parseArtifact(u,"code")),u=""):m||""===u||(i.push(this.parseArtifact(u,"code block")),u=""),"!"===x[0].charAt(0)&&!m){if(a){var y=E.substring(E.lastIndexOf("{")+1,E.lastIndexOf("}"));if(y>1||g>a)continue}i.push(this.parseArtifact(E,"image",n)),n&&n[E.substring(E.lastIndexOf("(")+1,E.lastIndexOf(")"))]&&(p[b]=E.replace(E.substring(E.lastIndexOf("(")+1,E.lastIndexOf(")")),n[E.substring(E.lastIndexOf("(")+1,E.lastIndexOf(")"))]),E=p[b]),g++}if("$"===x[0].charAt(0)&&!m){var v=E.substring(E.lastIndexOf("[")+1,E.lastIndexOf("]")),k=E.substring(E.lastIndexOf("(")+1,E.lastIndexOf(")"));switch(k="sky"!=v&&n&&n[E.substring(E.lastIndexOf("(")+1,E.lastIndexOf(")"))]?n[E.substring(E.lastIndexOf("(")+1,E.lastIndexOf(")"))]:E.substring(E.lastIndexOf("(")+1,E.lastIndexOf(")")),this.VSCode&&!/^(?:\/|[a-z]+:\/\/)/.test(k)&&(k=this.VSCode+k),v){default:break;case"floor":r.theme.floor=k;break;case"walls":r.theme.walls=k;break;case"ceiling":r.theme.ceiling=k;break;case"frames":r.theme.frames=k;break;case"sky":r.theme.sky=k}p.splice(b,1),--b}if("&"!==x[0].charAt(0)||m||(i.push(this.parseArtifact(E,"3D")),p.splice(b,1),--b),"^"===x[0].charAt(0)&&!m){var w=E.substring(E.lastIndexOf("[")+1,E.lastIndexOf("]"));E="frame"===w?this.addFrame(i,E,n):this.addAudio(i,E,n),p.splice(b,1),--b}"~"!==x[0]||m||(d=!d),(d||"~"===x[0]&&!m)&&(p.splice(b,1),--b),o+=E+"\n"}return null!==l.name&&(""!==s&&(i.push(this.parseArtifact(s,"block quote")),s=""),""!==u&&(i.push(this.parseArtifact(u,"code block")),u=""),l.text=o,l.artifacts=i,o="",i=[],r.rooms.push(l),l={}),this.tree=r,this.cleanedMD=p.join("\n"),this.tree}},{key:"parseArtifact",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n={};switch(n.type=t,n.audioSrc=null,n.frameSrc=null,t){default:break;case"image":a&&a[e.substring(e.lastIndexOf("(")+1,e.lastIndexOf(")"))]?n.src=a[e.substring(e.lastIndexOf("(")+1,e.lastIndexOf(")"))]:n.src=e.substring(e.lastIndexOf("(")+1,e.lastIndexOf(")")),n.alt=e.substring(e.lastIndexOf("[")+1,e.lastIndexOf("]"));break;case"block quote":n.text=e;break;case"code":n.code=e.replace(/`/g,"").replace("\n","");break;case"code block":var r=e.replace(/`/g,"");n.lang=r.split("\n")[0],n.code=r.replace(n.lang+"\n","");break;case"3D":n.src=e.substring(e.lastIndexOf("(")+1,e.lastIndexOf(")")),n.name=e.substring(e.lastIndexOf("[")+1,e.lastIndexOf("]"))}return this.VSCode&&n.src&&!/^(?:\/|[a-z]+:\/\/)/.test(n.src)&&(n.src=this.VSCode+n.src),n}},{key:"addAudio",value:function(e,t,a){return a&&a[t.substring(t.lastIndexOf("(")+1,t.lastIndexOf(")"))]?(e[e.length-1].audioSrc=a[t.substring(t.lastIndexOf("(")+1,t.lastIndexOf(")"))],t=t.replace(t.substring(t.lastIndexOf("(")+1,t.lastIndexOf(")")),a[t.substring(t.lastIndexOf("(")+1,t.lastIndexOf(")"))])):e[e.length-1].audioSrc=t.substring(t.lastIndexOf("(")+1,t.lastIndexOf(")")),this.VSCode&&!/^(?:\/|[a-z]+:\/\/)/.test(e[e.length-1].audioSrc)&&(e[e.length-1].audioSrc=this.VSCode+e[e.length-1].audioSrc),t}},{key:"addFrame",value:function(e,t,a){return a&&a[t.substring(t.lastIndexOf("(")+1,t.lastIndexOf(")"))]?(e[e.length-1].frameSrc=a[t.substring(t.lastIndexOf("(")+1,t.lastIndexOf(")"))],t=t.replace(t.substring(t.lastIndexOf("(")+1,t.lastIndexOf(")")),a[t.substring(t.lastIndexOf("(")+1,t.lastIndexOf(")"))])):e[e.length-1].frameSrc=t.substring(t.lastIndexOf("(")+1,t.lastIndexOf(")")),this.VSCode&&!/^(?:\/|[a-z]+:\/\/)/.test(e[e.length-1].frameSrc)&&(e[e.length-1].frameSrc=this.VSCode+e[e.length-1].frameSrc),t}}]),e}(),te=a(81),ae=a.n(te),ne=a(82),re=a.n(ne),le=function(e){function t(e,a){return"string"===typeof a?e+a:r.a.Children.toArray(a.props.children).reduce(t,e)}return Object(n.useEffect)((function(){document.getElementById("doc-preview").querySelectorAll("pre code").forEach((function(e){re.a.highlightBlock(e)}))}),[e.md]),r.a.createElement("div",{id:"doc-preview"},r.a.createElement(ae.a,{source:e.md,renderers:{heading:function(e){var a=r.a.Children.toArray(e.children).reduce(t,"").toLowerCase().replace(/[!"#$%&'()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\W/g,"-");return r.a.createElement("h"+e.level,{id:a},e.children)}}}))},ie=a(101),ce=function(e){var t=JSON.stringify(e.tree),a=e.tree.theme.sky?e.tree.theme.sky:"135, 206, 235";a=a.includes("#")?a:"rgb(".concat(a,")");var n=null;return e.editor&&(n=r.a.createElement("a-cursor",null)),r.a.createElement("div",null,r.a.createElement("div",{id:"splash"},r.a.createElement("img",{class:"loading",src:"logo192.png"})),r.a.createElement(ie.Scene,{id:e.exhibitId,"vr-mode-ui":"enabled: false",embedded:!0,background:"color: ".concat(a)},r.a.createElement("a-assets",null,r.a.createElement("a-mixin",{id:"checkpoint"}),r.a.createElement("a-mixin",{id:"checkpoint-hovered",color:"#6CEEB5"}),r.a.createElement("img",{id:"wallTexture",src:"https://firebasestorage.googleapis.com/v0/b/malloci-8f365.appspot.com/o/images%2Fwall_default.jpg?alt=media&token=4efaf383-4ae0-44f3-af17-f38044e20eb7"}),r.a.createElement("img",{id:"floorTexture",src:"https://firebasestorage.googleapis.com/v0/b/malloci-8f365.appspot.com/o/images%2Ffloor_default.jpg?alt=media&token=c6f3b161-52b2-4889-bc25-0cdbf7668ba1"}),r.a.createElement("img",{id:"ceilingTexture",src:"https://firebasestorage.googleapis.com/v0/b/malloci-8f365.appspot.com/o/images%2Fceiling_default.jpg?alt=media&token=aa6c0f19-baed-4f20-9380-c1dc82deed1e"}),r.a.createElement("img",{id:"frameTexture",src:"/textures/frame.jpg"})),r.a.createElement("a-light",{type:"ambient",position:"0 6 0",rotation:"0 0 45"}),r.a.createElement(ie.Entity,{id:"rig","movement-controls":{enabled:!0},position:"2 0 1",rotation:"0 180 0"},r.a.createElement("a-camera",{id:"camera","look-controls":"pointerLockEnabled: true"},r.a.createElement("a-sound",{id:"ambient-track",src:"src: url(/audio/light-piano-noodling-in-b.mp3)",autoplay:"false",volume:"0.4",loop:"true",position:"0 4 0"}),n),r.a.createElement(ie.Entity,{"laser-controls":{hand:"left"},raycaster:{objects:".clickable",far:3},"teleport-controls":{collisionEntities:".scenery",drawForAllCollisions:!1,landingMaxAngle:45,button:"trigger",cameraRig:"#rig",teleportOrigin:"#camera"}}),r.a.createElement(ie.Entity,{"laser-controls":{hand:"right"},raycaster:{objects:".clickable",far:3},"teleport-controls":{collisionEntities:".scenery",drawForAllCollisions:!1,landingMaxAngle:45,button:"trigger",cameraRig:"#rig",teleportOrigin:"#camera"}})),r.a.createElement("a-entity",{instructions:"src: /img/instructions.png; width:2; height: 0.912",position:"2.3 1.5 8",rotation:"0 150 0"}),r.a.createElement(ie.Entity,{id:"museum",malloci:{tree:t,wallHeight:5,base64Mode:e.b64,debug:e.debug}})))},oe=a(100),se=a.n(oe),ue=(a(215),E.a.TabPane);function me(e){console.log(e)}var de=function(){var e=Object(d.g)().id,t=Object(n.useState)({theme:{floor:null,walls:null,ceiling:null,sky:"135, 206, 235"},rooms:[{name:"1",artifacts:[]},{name:"2",artifacts:[]}]}),a=Object(c.a)(t,2),l=a[0],i=a[1],s=Object(n.useState)(""),m=Object(c.a)(s,2),h=m[0],f=m[1],x=Object(n.useState)("# Hello world! \n\n> Welcome to the world! \n\n## Hello continent \n\nThis is a starter exhibit. Hit build to view it in VR. The name of the museum is Hello world!. There is one room, Hello Continent. There's some wall art about baby elephants and a picture of a baby elephant in a bucket. \n\n> Baby elephants are endangered \n\n![baby elephants are endangered!](https://i.imgur.com/SnolApK.jpg)"),y=Object(c.a)(x,2),v=y[0],k=y[1],w=Object(n.useState)(""),O=Object(c.a)(w,2),j=O[0],I=O[1],N=Object(n.useState)(!1),S=Object(c.a)(N,2),A=S[0],T=S[1],C=Object(n.useState)(""),M=Object(c.a)(C,2),D=M[0],P=M[1],W=function(){var e=Object(p.a)(g.a.mark((function e(){var t,a,n,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new ee,a=document.getElementById("editor"),n=t.parse(a.value,null,null,b),e.next=5,fetch("https://malloci.uc.r.appspot.com/generate",{method:"POST",mode:"cors",cache:"no-cache",credentials:"omit",headers:{Accept:"application/json","Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(n)});case 5:if((r=e.sent).ok){e.next=11;break}console.error("bad response, loading user defined tree"),i(n),e.next=15;break;case 11:return e.next=13,r.json();case 13:n=e.sent,i(n);case 15:f(t.cleanedMD);case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){if(e){var t=u.collection("exhibits").doc(e);t.get().then((function(e){e.exists?(o.auth().currentUser&&o.auth().currentUser.uid===e.data().authorID||P("/Exhibits/".concat(t.id)),console.log("success!!!!"),function(e){for(var t in e)b[t]=e[t];console.log(b)}(JSON.parse(e.data().fileDict)),I(!0),k(e.data().rawMD)):(console.log("No such document!"),P("/Exhibits/".concat(t.id)))})).catch((function(e){console.log("Error getting document:",e),P("/Exhibits/".concat(t.id))}))}W()}),[]);var F=function(){if(console.log(Object.keys(b)),e){var t=u.collection("exhibits").doc(e);t.update({preview:0!==Object.keys(b).length?b[Object.keys(b)[0]]:"img/Maria.jpg",title:l.name,rawMD:document.getElementById("editor").value,fileDict:JSON.stringify(b),md:h,tree:l}).then((function(){console.log("Document successfully updated!"),P("/Exhibits/".concat(t.id))})).catch((function(e){console.error("Error adding document: ",e)}))}else u.collection("exhibits").add({author:o.auth().currentUser.displayName,authorID:o.auth().currentUser.uid,preview:0!==Object.keys(b).length?b[Object.keys(b)[0]]:"img/Maria.jpg",title:l.name,rawMD:document.getElementById("editor").value,fileDict:JSON.stringify(b),md:h,tree:l}).then((function(e){console.log("Document written with ID: ",e.id),P("/Exhibits/".concat(e.id))})).catch((function(e){console.error("Error adding document: ",e)}))},V=function(){if(j)return r.a.createElement("div",null,r.a.createElement($.a,{title:"Delete This Exhibit"},r.a.createElement(R.a,{type:"danger",shape:"circle",onClick:function(){return T(!0)},icon:r.a.createElement(K.a,null)})),r.a.createElement(J.a,{title:"Basic Modal",visible:A,onOk:function(){u.collection("exhibits").doc(e).delete().then((function(){console.log("Document successfully deleted!"),P("/")})).catch((function(e){console.error("Error removing document: ",e)}))},onCancel:function(){return T(!1)},okText:"Yes, delete this Exhibit.",okButtonProps:{type:"danger"},cancelText:"Cancel"},r.a.createElement("p",null,"This will permanently delete your exhibit, Would you like to continue?")))};return r.a.createElement(Q,null,r.a.createElement(Y,{siteTitle:"Create a New Exhibit"}),r.a.createElement("div",{id:"alertstyle"}),r.a.createElement(H.a,null,r.a.createElement(L.a,{classname:"gutter-col"},r.a.createElement("div",{className:"description"},r.a.createElement("p",null,"A web editor to view museums written in markdown.",r.a.createElement("br",null),'Create your exhibit in the panel on the left; there\'s a guide detailing the markdown syntax you should use. View your exhibit space in the "Exhibit" tab of panel on the right. The "Document" tab will contain an article of your exhibit instead.',r.a.createElement("br",null),"The editor area in the \"Markdown\" panel contains basic buttons to help you with the markdown syntax. You can click on the H icon to add a header, the link icon to link images, the blockquote icon to add a quote, and so on. In the event that you're using images from the internet in your exhibit via links, make sure that you're using images which are marked for reuse (they'll be blocked by your browser and won't show up, otherwise).")))),r.a.createElement("div",null,r.a.createElement(se.a,{minDeviceWidth:1224},r.a.createElement(H.a,null,r.a.createElement(L.a,{className:"gutter-col",span:12},r.a.createElement("div",{className:"gutter-row",id:"exhibittext"},r.a.createElement("div",{className:"card-container"},r.a.createElement(E.a,{onChange:me,type:"card"},r.a.createElement(ue,{tab:"Markdown",key:"1"},r.a.createElement(B,{value:v}))))),r.a.createElement("div",{className:"gutter-row"},r.a.createElement(R.a,{onClick:function(){W()},id:"build-exhibit",type:"primary"},"Build")),r.a.createElement("div",{className:"gutter-row",id:"imageupload"},r.a.createElement(q,null))),r.a.createElement(L.a,{className:"gutter-col",span:12},r.a.createElement("div",{className:"gutter-row",id:"exhibitmaster"},r.a.createElement("div",{className:"card-container"},r.a.createElement(E.a,{onChange:me,type:"card"},r.a.createElement(ue,{id:"exhibit_pane",tab:"Exhibit",key:"1"},r.a.createElement(ce,{exhibitId:"preview",tree:l,editor:!0,debug:!0})),r.a.createElement(ue,{tab:"Document",key:"2"},r.a.createElement(le,{md:h}))))),r.a.createElement("div",{className:"gutter-row"},V(),r.a.createElement(R.a,{onClick:function(){F()},id:"create-exhibit",type:"primary"},"Publish"))))),r.a.createElement(se.a,{maxDeviceWidth:1224},r.a.createElement("div",null,r.a.createElement(H.a,null,r.a.createElement(L.a,{className:"gutter-col",span:12},r.a.createElement("div",{className:"gutter-row",id:"exhibitmaster"},r.a.createElement("div",{className:"card-container"},r.a.createElement(E.a,{onChange:me,type:"card"},r.a.createElement(ue,{id:"exhibittext",tab:"Markdown",key:"1"},r.a.createElement(B,{value:v})),r.a.createElement(ue,{id:"exhibit_pane",tab:"Exhibit",key:"2"},r.a.createElement(ce,{exhibitId:"preview",tree:l,editor:!0,debug:!0})),r.a.createElement(ue,{tab:"Document",key:"3"},r.a.createElement(le,{md:h}))))),r.a.createElement("div",{className:"gutter-button"},r.a.createElement(R.a,{onClick:function(){W()},id:"build-exhibit",type:"primary"},"Build"),V(),r.a.createElement(R.a,{onClick:function(){F()},id:"create-exhibit",type:"primary"},"Publish")),r.a.createElement("div",{className:"gutter-row",id:"imageupload"},r.a.createElement(q,null))))))),function(){if(""!==D)return r.a.createElement(d.a,{to:D,push:!0})}())},he={name:"file",multiple:!0,customRequest:function(e){var t=new FileReader;t.readAsBinaryString(e.file),t.onload=function(t){var a=t.target.result,n="".concat(e.file.name);sessionStorage.setItem(n,a)}},onChange:function(e){"uploading"!==e.file.status&&console.log(e.file,e.fileList),"done"===e.file.status?W.a.success("".concat(e.file.name," file uploaded successfully")):"error"===e.file.status&&W.a.error("".concat(e.file.name," file upload failed."))}},fe=function(){return r.a.createElement(F.a,he,r.a.createElement(R.a,null,r.a.createElement(V.a,null)," Upload"))},ge=a(782),pe=E.a.TabPane;function be(e){console.log(e)}var Ee=function(){var e="# Hello world! \n\n> Welcome to the world! \n\n## Hello continent \n\nThis is a starter exhibit. Hit build to view it in VR. The name of the museum is Hello world!. There is one room, Hello Continent. There's some wall art about baby elephants and a picture of a baby elephant in a bucket. \n\n> Baby elephants are endangered \n\n![baby elephants are endangered!](https://i.imgur.com/SnolApK.jpg)",t=Object(n.useState)({theme:{floor:null,walls:null,ceiling:null,sky:"135, 206, 235"},rooms:[{name:"1",artifacts:[]},{name:"2",artifacts:[]}]}),a=Object(c.a)(t,2),l=a[0],i=a[1],s=Object(n.useState)(""),u=Object(c.a)(s,2),m=u[0],h=u[1],f=function(){var e=new ee,t=document.getElementById("editor");console.log("editor value",t);var a=e.parse(t.value,null,null);i(a),h(e.cleanedMD)};return Object(n.useEffect)((function(){f()}),[]),r.a.createElement(Q,null,r.a.createElement(Y,{siteTitle:"Playground"}),r.a.createElement("div",{id:"alertstyle"},r.a.createElement(ge.a,{message:"Demo only!",description:"This is a demo editor: museums you create using this tool will not be saved! Please copy your text from the Markdown panel before you close your session.",type:"info",showIcon:!0,closable:!0})),r.a.createElement(H.a,null,r.a.createElement(L.a,{classname:"gutter-col"},r.a.createElement("div",{className:"description"},r.a.createElement("p",null,"A web editor to view museums written in markdown.",r.a.createElement("br",null),'Create your exhibit in the panel on the left; there\'s a guide detailing the markdown syntax you should use. View your exhibit space in the "Exhibit" tab of panel on the right. The "Document" tab will contain an article of your exhibit instead.',r.a.createElement("br",null),"The editor area in the \"Markdown\" panel contains basic buttons to help you with the markdown syntax. You can click on the H icon to add a header, the link icon to link images, the blockquote icon to add a quote, and so on. In the event that you're using images from the internet in your exhibit via links, make sure that you're using images which are marked for reuse (they'll be blocked by your browser and won't show up, otherwise).")))),r.a.createElement("div",null,r.a.createElement(se.a,{minDeviceWidth:1224},r.a.createElement(H.a,null,r.a.createElement(L.a,{className:"gutter-col",span:12},r.a.createElement("div",{className:"gutter-row",id:"exhibittext"},r.a.createElement("div",{className:"card-container"},r.a.createElement(E.a,{onChange:be,type:"card"},r.a.createElement(pe,{tab:"Markdown",key:"1"},r.a.createElement(B,{value:e}))))),r.a.createElement("div",{className:"gutter-row"},r.a.createElement(R.a,{onClick:function(){f()},id:"build-exhibit",type:"primary"},"Build")),r.a.createElement("div",{className:"gutter-row",id:"imageupload"},r.a.createElement(fe,null))),r.a.createElement(L.a,{className:"gutter-col",span:12},r.a.createElement("div",{className:"gutter-row",id:"exhibitmaster"},r.a.createElement("div",{className:"card-container"},r.a.createElement(E.a,{onChange:be,type:"card"},r.a.createElement(pe,{id:"exhibit_pane",tab:"Exhibit",key:"1"},r.a.createElement(ce,{exhibitId:"preview",tree:l,b64:!0,editor:!0,debug:!0})),r.a.createElement(pe,{tab:"Document",key:"2"},r.a.createElement(le,{md:m})))))))),r.a.createElement(se.a,{maxDeviceWidth:1224},r.a.createElement("div",null,r.a.createElement(H.a,null,r.a.createElement(L.a,{className:"gutter-col",span:12},r.a.createElement("div",{className:"gutter-row",id:"exhibitmaster"},r.a.createElement("div",{className:"card-container"},r.a.createElement(E.a,{onChange:be,type:"card"},r.a.createElement(pe,{id:"exhibittext",tab:"Markdown",key:"1"},r.a.createElement(B,{value:e})),r.a.createElement(pe,{id:"exhibit_pane",tab:"Exhibit",key:"2"},r.a.createElement(ce,{exhibitId:"preview",tree:l,b64:!0,editor:!0,debug:!0})),r.a.createElement(pe,{tab:"Document",key:"3"},r.a.createElement(le,{md:m}))))),r.a.createElement("div",{className:"gutter-button"},r.a.createElement(R.a,{onClick:function(){f()},id:"build-exhibit",type:"primary"},"Build")),r.a.createElement("div",{className:"gutter-row",id:"imageupload"},r.a.createElement(fe,null))))))),function(){if(o.auth().currentUser&&o.auth().currentUser.email.match(".*berkeley[.]edu"))return r.a.createElement(d.a,{to:"/Editor",push:!0})}())},xe=(a(216),a(778)),ye=function(){var e=Object(n.useState)({theme:{floor:null,walls:null,ceiling:null},rooms:[{name:"1",artifacts:[]},{name:"2",artifacts:[]}]}),t=Object(c.a)(e,2),a=t[0],l=t[1],i=Object(n.useState)(""),o=Object(c.a)(i,2),s=o[0],u=o[1],m=new ee;function d(e,t){return"string"===typeof t?e+t:r.a.Children.toArray(t.props.children).reduce(d,e)}return Object(n.useEffect)((function(){fetch("https://raw.githubusercontent.com/mallocivr/mallocivr.github.io/master/markDown/home.md").then((function(e){return e.text()})).then((function(e){m.parse(e),u(m.cleanedMD),l(m.tree)})).catch((function(e){return console.error(e)}))}),[]),Object(n.useEffect)((function(){document.getElementById("md_article").querySelectorAll("pre code").forEach((function(e){re.a.highlightBlock(e)}))}),[s]),r.a.createElement(Q,null,r.a.createElement(xe.a,null,r.a.createElement("div",{className:"museum"},r.a.createElement("div",{id:"md_article",className:"museumtext"},r.a.createElement(ae.a,{source:s,renderers:{heading:function(e){var t=r.a.Children.toArray(e.children).reduce(d,"").toLowerCase().replace(/[!"#$%&'()*+,-./:;<=>?@[\]^_`{|}~]/g,"").replace(/\W/g,"-");return r.a.createElement("h"+e.level,{id:t},e.children)}}}))),r.a.createElement(ce,{exhibitId:"exhibit",tree:a,b64:!1,debug:!0})))},ve=(a(171),a(783)),ke=ve.a.Meta,we=function(){var e=Object(n.useState)([]),t=Object(c.a)(e,2),a=t[0],l=t[1];return Object(n.useEffect)((function(){u.collection("exhibits").get().then((function(e){var t=e.docs.map((function(e){return console.log(e.id," => ",e.data()),r.a.createElement(m.b,{to:"/Exhibits/".concat(e.id)},r.a.createElement(ve.a,{className:"card-space",hoverable:!0,style:{width:300},cover:r.a.createElement("img",{alt:"example",src:e.data().preview})},r.a.createElement(ke,{title:e.data().title})))}));l(t)}))}),[]),r.a.createElement(Q,null,r.a.createElement(Y,{siteTitle:"The Malloci Gallery"}),r.a.createElement("div",{className:"description"},r.a.createElement("p",null,"A curation of VR museums generated using Malloci.")),r.a.createElement("div",{className:"mastercard"},r.a.createElement(m.b,{to:"/WikiViewer"},r.a.createElement(ve.a,{className:"card-space",hoverable:!0,style:{width:300},cover:r.a.createElement("img",{alt:"example",src:"https://upload.wikimedia.org/wikipedia/commons/thumb/5/53/Wikipedia-logo-en-big.png/627px-Wikipedia-logo-en-big.png"})},r.a.createElement(ke,{title:"Explore Wikipedia with Malloci"}))),a))},Oe=ve.a.Meta,je=function(){var e=Object(n.useState)([]),t=Object(c.a)(e,2),a=t[0],l=t[1];return Object(n.useEffect)((function(){u.collection("exhibits").get().then((function(e){var t=e.docs.map((function(e){return console.log(e.id," => ",e.data()),r.a.createElement(m.b,{to:"/Exhibits/".concat(e.id)},r.a.createElement(ve.a,{className:"card-space",hoverable:!0,style:{width:300},cover:r.a.createElement("img",{alt:"example",src:e.data().preview})},r.a.createElement(Oe,{title:e.data().title})))}));l(t)}))}),[]),r.a.createElement(Q,null,r.a.createElement(Y,{siteTitle:"Malloci - VR you can understand"}),r.a.createElement("div",{className:"description"},r.a.createElement("p",null,"Malloci makes creating VR experiences for the web fast and easy.")),r.a.createElement("div",{className:"mastercard"},r.a.createElement(m.b,{to:"/WikiViewer"},r.a.createElement(ve.a,{className:"card-space",hoverable:!0,style:{width:300},cover:r.a.createElement("img",{alt:"example",src:"https://upload.wikimedia.org/wikipedia/commons/thumb/5/53/Wikipedia-logo-en-big.png/627px-Wikipedia-logo-en-big.png"})},r.a.createElement(Oe,{title:"Explore Wikipedia with Malloci"}))),a))},Ie=a(787),Ne=function(){var e=Object(d.g)().exhibit,t=Object(n.useState)({theme:{floor:null,frames:null,walls:null,ceiling:null,sky:"255,0,0"},rooms:[{name:"1",artifacts:[]},{name:"2",artifacts:[]}]}),a=Object(c.a)(t,2),l=a[0],i=a[1],s=Object(n.useState)(""),h=Object(c.a)(s,2),f=h[0],g=h[1],p=Object(n.useState)(!1),b=Object(c.a)(p,2),E=b[0],x=b[1];function y(e,t){return"string"===typeof t?e+t:r.a.Children.toArray(t.props.children).reduce(y,e)}return Object(n.useEffect)((function(){u.collection("exhibits").doc(e).get().then((function(e){e.exists?(o.auth().currentUser&&o.auth().currentUser.uid===e.data().authorID&&x(!0),g(e.data().md),i(e.data().tree)):console.log("No such document!")})).catch((function(e){console.log("Error getting document:",e)}))}),[]),Object(n.useEffect)((function(){document.getElementById("md_article").querySelectorAll("pre code").forEach((function(e){re.a.highlightBlock(e)}))}),[f]),r.a.createElement(Q,null,r.a.createElement(xe.a,null,r.a.createElement("div",{className:"museum"},r.a.createElement("div",{id:"md_article",className:"museumtext"},function(){if(E)return r.a.createElement(m.b,{to:"/Editor/".concat(e)},r.a.createElement($.a,{title:"Edit This Exhibit"},r.a.createElement(R.a,{type:"default",shape:"circle",icon:r.a.createElement(Ie.a,null)})))}(),r.a.createElement(ae.a,{source:f,renderers:{heading:function(e){var t=r.a.Children.toArray(e.children).reduce(y,"").toLowerCase().replace(/[.,\/#!$%\^&\*;:{}=_`~()?]/g,"").replace(/[ \u2019]/g,"-");return r.a.createElement("h"+e.level,{id:t},e.children)},image:function(e){return r.a.createElement("p",null,r.a.createElement("img",e))}}})))),r.a.createElement(ce,{exhibitId:"exhibit",tree:l,b64:!1,debug:!0}))},Se=a(247),Ae=a.n(Se),Te=a(248),Ce=a.n(Te),Me=a(249),De=a.n(Me),Be=a(250),Pe=a.n(Be),We=a(251),Fe=a.n(We),Re=ve.a.Meta,Ve=function(){return r.a.createElement(Q,null,r.a.createElement(Y,{siteTitle:"About us"}),r.a.createElement("div",{className:"description"},r.a.createElement("p",null,"The team behind Malloci")),r.a.createElement("div",{className:"mastercard",style:{textAlign:"center"}},r.a.createElement(ve.a,{className:"card-space",hoverable:!0,style:{width:300,padding:20},cover:r.a.createElement("img",{alt:"Michael",src:Ce.a})},r.a.createElement(Re,{title:"Michael Gutensohn",description:"An AR/VR Developer and amateur photographer",style:{textAlign:"center"}})),r.a.createElement(ve.a,{className:"card-space",hoverable:!0,style:{width:300,padding:20},cover:r.a.createElement("img",{alt:"Michael",src:Ae.a})},r.a.createElement(Re,{title:"Masha Belyi",description:"An NLP engineer, constantly trying to understand language",style:{textAlign:"center"}})),r.a.createElement(ve.a,{className:"card-space",hoverable:!0,style:{width:300,padding:20},cover:r.a.createElement("img",{alt:"Yejun",src:De.a})},r.a.createElement(Re,{title:"Yejun Wu",description:"An art historian turned UX Designer and product enthusiast",style:{textAlign:"center"}})),r.a.createElement(ve.a,{className:"card-space",hoverable:!0,style:{width:300,padding:20},cover:r.a.createElement("img",{alt:"Jennifer",src:Pe.a})},r.a.createElement(Re,{title:"Jennifer Momoh",description:"A data scientist with a passion for social research",style:{textAlign:"center"}})),r.a.createElement(ve.a,{className:"card-space",hoverable:!0,style:{width:300,padding:20},cover:r.a.createElement("img",{alt:"Sharanya",src:Fe.a})},r.a.createElement(Re,{title:"Sharanya Soundararajan",description:"A rabbit",style:{textAlign:"center"}}))))},_e=a(773),Ue=function(){function e(){Object(X.a)(this,e),this.api="https://en.wikipedia.org/w/api.php",this.fetchUrl=this.api+"?origin=*&action=parse&prop=text&format=json&page=",this.redirectCount=0}return Object(Z.a)(e,[{key:"search",value:function(e,t,a){var n={action:"opensearch",list:"search",search:e,format:"json",limit:t},r=this.api+"?origin=*";Object.keys(n).forEach((function(e){r+="&"+e+"="+n[e]})),console.log(r),fetch(r).then((function(e){return e.json()})).then((function(e){a(e)})).catch((function(e){console.log(e)}))}},{key:"parse",value:function(e,t,a,n){var r=this;fetch(this.fetchUrl+e).then((function(e){return e.json()})).then((function(e){var l="<body>"+e.parse.text["*"]+"</body>";r.htmlToMd(e.parse.title,l,t,!1,a),n(r.md.join("\n\n"))}))}},{key:"parseFull",value:function(e,t,a,n){var r=this;fetch(this.fetchUrl+e).then((function(e){return e.json()})).then((function(l){var i="<body>"+l.parse.text["*"]+"</body>",c=r.check_redirect(i);null==c?(r.htmlToMd(l.parse.title,i,t,!0,a),r.waitForImages(10,n)):c!=e&&r.redirectCount<5?(r.redirectCount++,r.parseFull(c,t,a,n)):n("")}))}},{key:"check_redirect",value:function(e){var t=(new DOMParser).parseFromString(e,"text/xml");try{var a=t.getElementsByClassName("redirectMsg");if(a.length>0){var n=(a=a[0]).getElementsByTagName("a")[0].getAttribute("href").replace("/wiki/","");return console.log("found redirect wiki page: "+n),n}}catch(r){return null}}},{key:"page_summary",value:function(e,t){if(null==e)return{};var a="https://en.wikipedia.org/api/rest_v1/page/summary/"+encodeURIComponent(e.replace(/ /g,"_"));fetch(a).then((function(e){return e.json()})).then((function(e){t(e)})).catch((function(e){console.log(e)}))}},{key:"cleanText",value:function(e){return e=(e=(e=e.replace(/ *\[[^\]]*\]/g,"")).replace(/\s+/," ")).replace(/^\s+|\s+$/g,"")}},{key:"htmlToMd",value:function(e,t,a,n,r){var l=1,i=0;null==r&&(r=500),this.waitForImage=0,this.imgPlaceholder={};var c=["# "+e];this.md=c;var o=(new DOMParser).parseFromString(t,"text/xml").getElementsByClassName("mw-parser-output"),s=r-o[0].getElementsByClassName("thumbcaption").length;console.log("can get "+s+" extra images");for(var u=o[0].childNodes,m=0;m<u.length;m++){var d=u[m];if("mw-empty-elt"!=d.className)if("p"==d.nodeName){if(d.textContent.startsWith("Coordinates: "))continue;if(c.push(this.cleanText(d.textContent)),!n)continue;for(var h=d.getElementsByTagName("a"),f=0;f<h.length&&!(i>=r);f++){var g=h[f],p=g.getAttribute("title");if(null!=p&&"new"!=g.className&&"Geographic coordinate system"!=p){var b=c.length;if(!(p in this.imgPlaceholder)){this.imgPlaceholder[p]=b,this.waitForImage++,c.push("~\n!["+p+"](placeholder)\n~");var E=this;this.page_summary(p,(function(e){if("originalimage"in e&&Math.min(e.originalimage.height,e.originalimage.width)>400){var t=e.title;"extract"in e&&(t=(t=e.extract).replace(/([.?!])\s*(?=[A-Z])/g,"$1|").split("|")[0]),E.md[E.imgPlaceholder[e.title]]="~\n!["+t+"]("+e.originalimage.source+"){"+(s>0?1:2)+"}\n~",delete E.imgPlaceholder[e.title],s--}E.waitForImage--})),i++}}}}else if(d.nodeName.startsWith("h")){var x=this.cleanText(d.textContent);if("References"==x||"See also"==x||"Notes"==x)break;if(i=0,l++,null!=a&&l>a)break;var y="#".repeat(parseInt(d.nodeName.charAt(1)));c.push(y+" "+x)}else if("div"===d.nodeName&&d.className.includes("thumb")){if(i>=r)continue;for(var v=d.getElementsByTagName("img"),k=d.getElementsByClassName("thumbcaption"),w=0;w<v.length;w++){var O=v[w].getAttribute("data-file-width"),j="https:"+v[w].getAttribute("src").replace(/\d+px/,O+"px");c.push("!["+this.cleanText(k[w]?k[w].textContent:"")+"]("+j+"){1}"),i++}}else if("ol"==d.nodeName||"ul"==d.nodeName){for(var I="ol"==d.nodeName,N=d.getElementsByTagName("li"),S=[],A=0;A<N.length;A++){var T=I?A+1+".":"*";S.push(T+" "+this.cleanText(N[A].textContent))}c.push(S.join("\n"))}}return c}},{key:"waitForImages",value:function(e,t){var a=this;if(console.log("waiting: "+e),this.waitForImage>0&&e>0)setTimeout((function(){a.waitForImages(e-2,t)}),2e3);else{var n=[];for(var r in this.imgPlaceholder)n.push(this.imgPlaceholder[r]);n.sort((function(e,t){return t-e})),console.log(n);for(var l=0;l<n.length;l++)this.md.splice(n[l],1);t(this.md.join("\n\n"))}}}]),e}(),qe=(a(769),function(){var e=Object(n.useState)({theme:{floor:"/textures/wiki-floor.jpg",walls:"/textures/wiki-wall.jpg",ceiling:"/textures/wiki-ceiling.jpg",frames:"/textures/wiki-frame.jpg",sky:null},rooms:[{name:"1",artifacts:[]},{name:"2",artifacts:[]}]}),t=Object(c.a)(e,2),a=t[0],l=t[1],i=new Ue,o=new ee,s={floor:"/textures/wiki-floor.jpg",walls:"/textures/wiki-wall.jpg",ceiling:"/textures/wiki-ceiling.jpg",frames:"/textures/wiki-frame.jpg",sky:null},u=Object(n.useState)(""),m=Object(c.a)(u,2),d=m[0],h=m[1],f=Object(n.useState)([]),b=Object(c.a)(f,2),E=b[0],x=b[1];return r.a.createElement(Q,null,r.a.createElement(xe.a,null,r.a.createElement(_e.a,{value:d,options:E,style:{width:"70vw",margin:"10px auto",position:"absolute",left:"26px",zIndex:"2"},onSelect:function(e){console.log("onSelect",e),i.parseFull(e.replace(/ /g,"_"),null,null,function(){var e=Object(p.a)(g.a.mark((function e(t){var a,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("markDown",t),(a=o.parse(t,10,3)).maxPerRoom=4,a.theme=s,e.next=6,fetch("https://malloci.uc.r.appspot.com/generate",{method:"POST",mode:"cors",cache:"no-cache",credentials:"omit",headers:{Accept:"application/json","Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(a)});case 6:if((n=e.sent).ok){e.next=12;break}console.error("bad response, loading user defined tree"),l(a),e.next=16;break;case 12:return e.next=14,n.json();case 14:a=e.sent,l(a);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},onSearch:function(e){i.search(e,10,(function(e){x(e[1].map((function(e){return{value:e}})))}))},onChange:function(e){h(e)},placeholder:"Search Wikipedia"})),r.a.createElement(ce,{exhibitId:"wiki-exhibit",tree:a,b64:!1,debug:!0}))}),$e=function(){var e=Object(n.useState)(!1),t=Object(c.a)(e,2),a=t[0],l=t[1],i=Object(n.useState)(!1),s=Object(c.a)(i,2),u=s[0],f=s[1];Object(n.useEffect)((function(){o.auth().onAuthStateChanged((function(e){l(!!e)}))}),[]);return r.a.createElement("div",{id:"navbar"},r.a.createElement("a",{href:"/"},r.a.createElement("img",{src:"./logo192.png",id:"logoformatting"})),r.a.createElement("div",{id:"mallocititle"},r.a.createElement("h2",null,r.a.createElement("a",{href:"/"},"Malloci"))),r.a.createElement(m.a,null,r.a.createElement("div",{id:"menualign"},r.a.createElement(h.a,{mode:"horizontal"},r.a.createElement(h.a.Item,{key:"gallery"},r.a.createElement(m.c,{to:"/Gallery"},"Gallery")),r.a.createElement(h.a.Item,{key:"museum"},r.a.createElement(m.c,{to:"/Malloci"},"About Malloci")),r.a.createElement(h.a.Item,{key:"mallocieditor"},a&&o.auth().currentUser.email.match(".*berkeley[.]edu")?r.a.createElement(m.c,{to:"/Editor"},"Create"):r.a.createElement(m.c,{to:"/Playground"},"Playground")),r.a.createElement(h.a.Item,{key:"about"},r.a.createElement(m.c,{to:"/TheTeam"},"The Team")))),r.a.createElement("div",{id:"signInOut"},r.a.createElement(h.a,null,r.a.createElement(h.a.Item,{key:"signin"},a?r.a.createElement("a",{onClick:function(){o.auth().signOut(),f(!0)}},"Sign Out"):r.a.createElement("a",{onClick:function(){!function(){var e=new o.auth.GoogleAuthProvider;o.auth().signInWithPopup(e),f(!1)}()}},"Sign In")),r.a.createElement(h.a.Item,{key:"about"},r.a.createElement("a",{href:"https://rb.gy/enkzp7"},"Feedback")))),r.a.createElement(d.d,null,r.a.createElement(d.b,{exact:!0,path:"/"},r.a.createElement(je,null)),r.a.createElement(d.b,{exact:!0,path:"/Gallery"},r.a.createElement(we,null)),r.a.createElement(d.b,{exact:!0,path:"/Playground"},r.a.createElement(Ee,null)),r.a.createElement(d.b,{exact:!0,path:"/Editor"},r.a.createElement(de,null)),r.a.createElement(d.b,{exact:!0,path:"/Malloci"},r.a.createElement(ye,null)),r.a.createElement(d.b,{path:"/exhibits/:exhibit"},r.a.createElement(Ne,null)),r.a.createElement(d.b,{path:"/Editor/:id"},r.a.createElement(de,null)),r.a.createElement(d.b,{exact:!0,path:"/TheTeam"},r.a.createElement(Ve,null)),r.a.createElement(d.b,{exact:!0,path:"/WikiViewer"},r.a.createElement(qe,null))),function(){if(u)return r.a.createElement(d.a,{to:"/",push:!0})}()))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement($e,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[257,1,2]]]);
//# sourceMappingURL=main.5ae6f36a.chunk.js.map