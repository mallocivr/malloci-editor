{"version":3,"sources":["firebase/firebase.js","firebase/FileDictionary.js","components/markdownguidetablerooms.js","components/markdownguidetableartifact.js","components/markdownguide.js","components/exhibittext.js","components/imagefiles.js","components/header.js","components/layout.js","malloci/vrmd-parser.js","components/exhibitdocument.js","components/exhibit.js","pages/mallocieditor.js","components/pgimagefiles.js","pages/playground.js","pages/museum.js","pages/gallery.js","pages/example.js","pages/about.js","App.js","serviceWorker.js","index.js"],"names":["firebase","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","storage","database","FileDict","columns","title","className","dataIndex","data1","key","markdown","rendered","markdownguidetablerooms","id","dataSource","bordered","pagination","markdownguidetableartifact","Panel","Collapse","markdownguide","defaultActiveKey","header","TextArea","Input","TabPane","Tabs","callback","console","log","styles","display","ExhibitText","props","useState","value","setValue","useEffect","onChange","type","tab","label","event","options","insertTexts","horizontalRule","image","link","table","style","audioFileTypes","name","multiple","customRequest","file","onError","onSuccess","uuid","uuidv4","includes","split","pop","ref","put","on","snapShot","err","resp","child","getDownloadURL","then","fireBaseUrl","info","status","fileList","message","success","error","ImageFiles","UploadOutlined","Header","siteTitle","defaultProps","Layout","children","margin","padding","Date","getFullYear","VRMD","VSCode","debug","this","tree","cleanedMD","mdListString","exJSON","floor","walls","ceiling","subJSON","artifacts","level","text","block_quote","code_block","in_code","hidden_block","mdLines","i","length","line","words","charAt","shift","rooms","push","artifact","join","parseArtifact","replace","field","substring","lastIndexOf","textureSrc","theme","splice","addAudio","markDown","fileDict","test","audioSrc","src","alt","code","cleaned","lang","audio","Exhibitdocument","flatten","React","Children","toArray","reduce","document","getElementById","querySelectorAll","forEach","block","hljs","highlightBlock","md","source","renderers","heading","slug","toLowerCase","createElement","exhibit","treeString","JSON","stringify","cursor","editor","exhibitId","vr-mode-ui","embedded","background","color","position","rotation","movement-controls","enabled","look-controls","autoplay","volume","loop","laser-controls","hand","raycaster","objects","far","teleport-controls","collisionEntities","drawForAllCollisions","landingMaxAngle","button","cameraRig","teleportOrigin","malloci","hallWidth","wallHeight","API","base64Mode","b64","Mallocieditor","useParams","museumTree","setMuseumTree","setMd","rawMD","setRawMD","owner","setOwner","modalVisible","setModalVisible","redirect","setRedirect","updateExhibit","vrmdParser","parse","docRef","collection","doc","get","exists","auth","currentUser","uid","data","authorID","o2","FileDictConcat","catch","classname","span","onClick","shape","icon","DeleteOutlined","visible","onOk","delete","onCancel","okText","okButtonProps","cancelText","DeleteButton","Object","keys","update","preview","add","author","displayName","uploadExhibit","to","RedirectRenderer","reader","FileReader","readAsBinaryString","onload","e","bits","target","result","sessionStorage","setItem","Playground","description","showIcon","closable","email","match","goToEditor","Museum","fetch","res","post","Meta","Card","Gallery","tiles","setTiles","querySnapshot","exhibits","docs","map","hoverable","width","cover","Example","isOwner","setIsOwner","EditOutlined","checkOwnerShip","About","App","loggedIn","setLoggedIn","redirectOnLogOut","setRedirectOnLogout","onAuthStateChanged","user","href","mode","Item","signOut","provider","GoogleAuthProvider","signInWithPopup","login","exact","path","Boolean","window","location","hostname","ReactDOM","render","StrictMode","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.4a85cc00.chunk.js","sourcesContent":["import * as firebase from 'firebase'\nimport 'firebase/storage'\nimport 'firebase/firestore'\n\nvar firebaseConfig = {\n    apiKey: \"AIzaSyCLN6m_UZpazTVvrX1vtFdyTEPx7wYaTyk\",\n    authDomain: \"malloci-8f365.firebaseapp.com\",\n    databaseURL: \"https://malloci-8f365.firebaseio.com\",\n    projectId: \"malloci-8f365\",\n    storageBucket: \"malloci-8f365.appspot.com\",\n    messagingSenderId: \"126802496533\",\n    appId: \"1:126802496533:web:614183fabd31d8510bd21c\",\n    measurementId: \"G-BSBQC0NNQJ\"\n};\n// Initialize Firebase\nfirebase.initializeApp(firebaseConfig);\n\nconst storage = firebase.storage()\nconst database = firebase.firestore()\n\nexport  {\n    storage, database, firebase as default\n}\n ","let FileDict = {}\n\nexport default FileDict","import React from \"react\"\n\nimport { Table } from 'antd';\n\nconst columns = [\n    {\n      title: 'Markdown',\n      className: 'markdown',\n      dataIndex: 'markdown',\n    },\n    {\n      title: 'Rendered',\n      className: 'rendered',\n      dataIndex: 'rendered',\n    },\n  ];\n  \n  const data1 = [\n    {\n      key: '1',\n      markdown: '# article title',\n      rendered: 'The entire museum space',\n    },\n    {\n      key: '2',\n      markdown: '## section title',\n      rendered: 'Creates a room in the museum',\n    },\n    {\n      key: '3',\n      markdown: '$[walls](img.jpg) \\n$[ceiling](img.jpg) \\n$[floor](img.jpg)',\n      rendered: 'To change the textures of the walls, floor, or the ceiling'\n    }\n  ];\n\nconst markdownguidetablerooms = () => (\n  <div>\n    <Table id=\"panelstyle\"\n    // showHeader={false}\n      columns={columns}\n      dataSource={data1}\n      bordered\n      pagination={false}\n    // title={() => 'Header'}\n    // footer={() => 'Footer'}\n  />\n  <p id=\"panelstyle\">While uploading and using image textures for the walls, ceiling and floor, it is recommended that you crop your textures so that the dimensions are powers of 2 for performance reasons.</p>\n  </div>\n);\n\nexport default markdownguidetablerooms","import React from \"react\"\n\nimport { Table } from 'antd';\n\nconst columns = [\n    {\n      title: 'Markdown',\n      className: 'markdown',\n      dataIndex: 'markdown',\n    },\n    {\n      title: 'Rendered',\n      className: 'rendered',\n      dataIndex: 'rendered',\n    },\n  ];\n  \n  const data1 = [\n    {\n      key: '1',\n      markdown: '![caption text](uploaded-file-name.jpg)',\n      rendered: '​This image will become a painting on the wall in the VR museum',\n    },\n    {\n      key: '2',\n      markdown: '~ \\n![caption text](uploaded-file-name.jpg) \\n~',\n      rendered: 'This image will be visible in the VR museum, but not in the document view',\n    },\n    {\n      key: '3',\n      markdown: '![this image has audio attached](uploaded-file-name.jpg) \\n^(audio-file.m4a)',\n      rendered: 'This audio file will be placed in the VR exhibit and the document, attached to the image or blockquote on the line above it'\n    },\n    {\n      key: '4',\n      markdown: '> Block quote',\n      rendered: '​This text will become a painting on the wall',\n    },\n    {\n        key: '5',\n        markdown: '> Multi line\\n> block quote',\n        rendered: '​This text will become a painting on the wall',\n      },\n    {\n      key: '6',\n      markdown: '```var s = \"JavaScript syntax highlighting\" \\n alert(s);```',\n      rendered: <code>var s = \"JavaScript syntax highlighting\" <br /> alert(s)</code>,\n    },\n  ];\n\nconst markdownguidetableartifact = () => (\n  <div>\n    <Table id=\"panelstyle\"\n    // showHeader={false}\n      columns={columns}\n      dataSource={data1}\n      bordered\n      pagination={false}\n    // title={() => 'Header'}\n    // footer={() => 'Footer'}\n  />\n  </div>\n);\n\nexport default markdownguidetableartifact","import React from \"react\"\n\nimport { Collapse } from 'antd';\nimport MarkdownGuideTableRooms from './markdownguidetablerooms';\nimport MarkdownGuideTableArtifact from './markdownguidetableartifact';\n\n\n\nconst { Panel } = Collapse;\n\nconst markdownguide = () => (\n    <div className=\"markdown-container\">\n    <Collapse defaultActiveKey={['']}>\n        <Panel header=\"Extended Markdown syntax guide\" id=\"headerstyle\" key=\"1\">\n            <p>Creating and formatting rooms in the museum:</p>\n            <MarkdownGuideTableRooms />\n            <p>Populating the room with artifacts:</p>\n            <MarkdownGuideTableArtifact />\n        </Panel>\n  </Collapse>\n    </div>\n);\n\nexport default markdownguide  ","import React, { useState, useEffect } from \"react\"\n\nimport { Tabs } from 'antd';\nimport { Input } from 'antd';\nimport MarkdownGuide from \"./markdownguide\";\nimport SimpleMDEReact from \"react-simplemde-editor\";\nimport \"easymde/dist/easymde.min.css\";\n\nconst { TextArea } = Input;\n\nconst { TabPane } = Tabs;\n\nfunction callback(key) {\n  console.log(key);\n}\n\nconst styles = {display: \"none\"};\n\n\nfunction ExhibitText(props) {\n    const [value, setValue] = useState(props.value);\n    const handleChange = (event) => {        \n        setValue(event);\n    };\n\n    useEffect(function(){\n        setValue(props.value)\n    },[props.value])\n\n    return (\n        <div className=\"card-container\">\n            <Tabs onChange={callback} type=\"card\">\n                <TabPane tab=\"Markdown\" key=\"1\">\n                    {/* <p className=\"description\">\n                        Create your exhibit in this panel; there's a guide detailing the markdown syntax you should use below. There are basic basic buttons to help you with the markdown syntax. You can click on the H icon to add a header, the link icon to link images, the blockquote icon to add a quote, and so on. In the event that you're using images from the internet in your exhibit via links, make sure that you're using images which are marked for reuse (they'll be blocked by your browser and won't show up, otherwise).\n                </p> */}\n                <div id=\"editorheight\">\n                    <MarkdownGuide />\n                    <SimpleMDEReact\n                        id=\"editor3\"\n                        label=\"Markdown Editor\"\n                        value={value}\n                        // onChange={event => handleChange(textValue, event.target.value)}\n                        // onChange = {e => setValue(e.target.value)}\n                        onChange={handleChange}\n                        options={{\n                            insertTexts: {\n                                horizontalRule: [\"\", \"\\n\\n-----\\n\\n\"],\n                                image: [\"\\n\\n![a caption describing your image](image-name\", \".jpg)\\n\\n\"],\n                                link: [\"[\", \"](http://)\"],\n                                table: [\"\", \"\\n\\n| Column 1 | Column 2 | Column 3 |\\n| -------- | -------- | -------- |\\n| Text     | Text      | Text     |\\n\\n\"],\n                            },\n                        }}\n                    />\n                    <TextArea id=\"editor\"\n                        value={value}\n                        style={styles}>\n                    </TextArea>\n                    </div>\n                </TabPane>\n            </Tabs>\n        </div>\n\n    )\n};\n\nexport default ExhibitText","import React from \"react\"\nimport {storage} from \"../firebase/firebase\"\nimport { v4 as uuidv4 } from 'uuid';\n\nimport FileDict from '../firebase/FileDictionary'\n\nimport { Upload, message, Button } from 'antd';\nimport { UploadOutlined } from '@ant-design/icons';\n\nconst audioFileTypes = ['m4a', 'mp3', 'wav']\n\nconst props = {\n    name: 'file',\n    multiple: true,\n    customRequest({\n      file,\n      onError,\n      onSuccess,\n    }) {\n      let uuid = uuidv4();\n      let uploadTask = null\n      if(audioFileTypes.includes(file.name.split('.').pop()))\n      {\n        uploadTask = storage.ref(`/audio/${uuid + file.name}`).put(file)\n      }\n      else\n      {\n        uploadTask = storage.ref(`/images/${uuid + file.name}`).put(file)\n\n      }\n\n      uploadTask.on('state_changed', \n      (snapShot) => {\n        //takes a snap shot of the process as it is happening\n        console.log(snapShot)\n      }, (err) => {\n        //catches the errors\n        console.log(err)\n        onError(err, file)\n      }, (resp) => {\n        // gets the functions from storage refences the image storage in firebase by the children\n        // gets the download url then sets the image from firebase as the value for the imgUrl key:\n        if(audioFileTypes.includes(file.name.split('.').pop()))\n        {\n          storage.ref('audio').child(uuid + file.name).getDownloadURL()\n            .then(fireBaseUrl => {\n              FileDict[file.name] = fireBaseUrl\n            })\n        }\n        else\n        {\n          storage.ref('images').child(uuid + file.name).getDownloadURL()\n            .then(fireBaseUrl => {\n              FileDict[file.name] = fireBaseUrl\n            })\n        }\n        \n        onSuccess(resp, file);\n      })\n    },\n    onChange(info) {\n      if (info.file.status !== 'uploading') {\n        console.log(info.file, info.fileList);\n      }\n      if (info.file.status === 'done') {\n        message.success(`${info.file.name} file uploaded successfully`);\n      } else if (info.file.status === 'error') {\n        message.error(`${info.file.name} file upload failed.`);\n      }\n    }\n  };\n  \nconst ImageFiles = () => {\n\n  return(\n    <Upload {...props}>\n      <Button>\n        <UploadOutlined /> Upload\n      </Button>\n    </Upload>\n  )}\n\nexport default ImageFiles\n","import PropTypes from \"prop-types\"\nimport React, {useState} from \"react\"\nimport { PageHeader } from 'antd';\n\n\nconst Header = ({ siteTitle }) => (\n\n  <PageHeader\n    className=\"site-page-header\"\n    title={siteTitle}\n    // avatar={{ src: 'https://avatars1.githubusercontent.com/u/8186664?s=460&v=4' }}    \n    />\n    \n)\n\nHeader.propTypes = {\n  siteTitle: PropTypes.string,\n}\n\nHeader.defaultProps = {\n  siteTitle: `Malloci`,\n}\n\nexport default Header\n","\nimport React from \"react\"\nimport PropTypes from \"prop-types\"\n\nimport \"./layout.css\"\nconst Layout = ({ children }) => {\n\n  return (\n    <>\n      {/* <Header siteTitle={siteTitle}/> */}\n    \n      <div\n        style={{\n          margin: `0 auto`,\n          // maxWidth: 960,\n          padding: `0 1.0875rem 1.45rem`,\n        }}\n      >\n        <main>{children}</main>\n        <footer>\n          © {new Date().getFullYear()}, Built with mochi muffins.\n        </footer>\n      </div>\n    </>\n  )\n}\n\nLayout.propTypes = {\n  children: PropTypes.node.isRequired,\n}\n\nexport default Layout\n","import fileDict from \"../firebase/FileDictionary\"\n\nexport default class VRMD\n{\n    constructor(VSCode = null, debug = false)\n    {\n        this.VSCode = VSCode\n        this.debug = debug\n        this.tree = null\n        this.cleanedMD = null\n    }\n\n    parseList(mdListString)\n    {\n        \n        let exJSON = {}\n        exJSON.rooms = []\n        exJSON.theme = {floor: null, walls: null, ceiling: null}\n\n        let subJSON = {}\n        let artifacts = []\n\n        let level = \"\"\n        let text = \"\"\n\n        let block_quote = \"\"\n        let code_block = \"\"\n\n        let in_code = false\n\n        let hidden_block = false\n\n        let mdLines = mdListString.split(',')\n\n\n        for(let i = 0; i < mdLines.length; i++)\n        {      \n            let line = mdLines[i]\n            let words = line.split(\" \")            \n\n            // Headings\n            if (words[0].charAt(0) === \"#\" && !in_code)\n            {\n                // if(words[0].includes(\"###\")) \n                //     continue\n\n                level = words.shift()\n\n                if(subJSON.name !== null)\n                {\n                    subJSON.text = text\n                    subJSON.artifacts = artifacts\n            \n                    text = \"\"\n                    artifacts = []\n\n                    // if(level === \"#\" || level === \"##\")\n                    // {\n                    exJSON.rooms.push(subJSON)\n                    subJSON = {}\n                    // }\n                }\n                else if (text !== \"\")\n                {\n                    exJSON.text = text\n                    exJSON.artifact = artifacts\n\n                    text = \"\"\n                    artifacts = []\n                }\n                if (level === \"#\")\n                {\n                    exJSON.name = words.join(\" \")\n                }\n                subJSON.name = words.join(\" \")\n            }\n\n            // Block Quotes\n            if (words[0].charAt(0) === \">\" && !in_code)\n            {\n                block_quote += words.join(\" \").replace(\">\", \"\").replace(/(^[\\s]+|[\\s]+$)/, \"\\n\")                                \n            }\n            else if (block_quote !== \"\")\n            {\n            artifacts.push(this.parseArtifact(block_quote, \"block quote\"))\n            block_quote = \"\"\n            }\n\n            // Code Blocks\n            if (words[0].includes(\"```\") && !in_code)\n            {\n                code_block += line + \"\\n\"\n                in_code = true\n            }\n            else if(in_code)\n            {\n                if(line.includes(\"```\"))\n                    in_code = false\n                code_block += line + \"\\n\"\n            }\n            else if (code_block === \"\" && words[0].charAt(0) === \"`\")\n            {\n                code_block += line + '\\n'\n                artifacts.push(this.parseArtifact(code_block, \"code\"))\n                code_block = \"\"\n            }\n            else if ( !in_code && code_block !== \"\")\n            {\n                artifacts.push(this.parseArtifact(code_block, \"code block\"))\n                code_block = \"\"\n            }            \n\n            // Images\n            if (words[0].charAt(0) === \"!\" && !in_code)\n            {\n                artifacts.push(this.parseArtifact(line, \"image\"))\n            }\n\n            // VRMD EXTENDED SYNTAX\n            // Theme\n            if (words[0].charAt(0) === \"$\" && !in_code)\n            {\n                let field = line.substring(line.lastIndexOf(\"[\") + 1, line.lastIndexOf(\"]\"))\n                let textureSrc = line.substring(line.lastIndexOf(\"(\") + 1, line.lastIndexOf(\")\"))\n\n                switch (field) {\n                    default:\n                        break\n                    case 'floor':\n                        exJSON.theme.floor = textureSrc\n                        break\n                    case 'walls':\n                        exJSON.theme.walls = textureSrc\n                        break\n                    case 'ceiling':\n                        exJSON.theme.ceiling = textureSrc\n                        break\n                }\n                mdLines.splice(i, 1)\n                --i\n            }\n            //3D models (.GLTF)\n            if (words[0].charAt(0) === \"&\" && !in_code)\n            {\n                artifacts.push(this.parseArtifact(line, \"3D\"))\n                mdLines.splice(i, 1)\n                --i\n            }\n            // Audio\n            if (words[0].charAt(0) === \"^\" && !in_code)\n            {\n                this.addAudio(artifacts, line)\n                mdLines.splice(i, 1)\n                --i\n            }\n            // Hidden Artifact\n            if (words[0] === \"~\" && !in_code)\n            {\n                hidden_block = !hidden_block\n            }\n\n            if (hidden_block || (words[0] === \"~\" && !in_code))\n            {\n                mdLines.splice(i, 1)\n                --i\n            }\n\n            if(this.debug)\n            {\n                console.log(artifacts);\n            }\n\n            text += line + '\\n'\n        }\n\n        if(subJSON.name !== null)\n        {\n            subJSON.text = text\n            subJSON.artifacts = artifacts\n\n            text = \"\"\n            artifacts = []\n\n            exJSON.rooms.push(subJSON)\n            subJSON = {}\n        }        \n        this.tree = exJSON\n        this.cleanedMD = mdLines.join('\\n')\n        \n        return this.tree\n    }\n\n    parse(markDown, fileDict = null)\n    {\n        console.log(\"parsing\");        \n        \n        let exJSON = {}\n        exJSON.rooms = []\n        exJSON.theme = {floor: null, walls: null, ceiling: null}\n\n        let subJSON = {}\n        let artifacts = []\n\n        let level = \"\"\n        let text = \"\"\n\n        let block_quote = \"\"\n        let code_block = \"\"\n\n        let in_code = false\n\n        let hidden_block = false\n\n        let mdLines = markDown.split('\\n')\n\n        for(let i = 0; i < mdLines.length; i++)\n        {      \n            let line = mdLines[i]\n            let words = line.split(\" \")                        \n\n            // Headings\n            if (words[0].charAt(0) === \"#\" && !in_code)\n            {\n                // if(words[0].includes(\"###\")) \n                //     continue\n\n                level = words.shift()\n\n                if(subJSON.name !== null)\n                {\n                    subJSON.text = text\n                    subJSON.artifacts = artifacts\n            \n                    text = \"\"\n                    artifacts = []\n\n                    // if(level === \"#\" || level === \"##\")\n                    // {\n                        exJSON.rooms.push(subJSON)\n                        subJSON = {}\n                    // }\n                }\n                else if (text !== \"\")\n                {\n                    exJSON.text = text\n                    exJSON.artifact = artifacts\n\n                    text = \"\"\n                    artifacts = []\n                }\n                if (level === \"#\")\n                {\n                    exJSON.name = words.join(\" \")\n                }\n                subJSON.name = words.join(\" \")\n            }            \n\n            // Block Quotes\n            if (words[0].charAt(0) === \">\" && !in_code)\n            {                \n                block_quote += words.join(\" \").replace(\">\", \"\").replace(/(^[\\s]+|[\\s]+$)/, \"\\n\")                                \n            }\n            else if (block_quote !== \"\")\n            {\n                artifacts.push(this.parseArtifact(block_quote, \"block quote\"))\n                block_quote = \"\"\n            }\n\n            // Code Blocks\n            if (words[0].includes(\"```\") && !in_code)\n            {\n                code_block += line + \"\\n\"\n                in_code = true\n            }\n            else if(in_code)\n            {\n                if(line.includes(\"```\"))\n                    in_code = false\n                code_block += line + \"\\n\"\n            }\n            else if (code_block === \"\" && words[0].charAt(0) === \"`\")\n            {\n                code_block += line + '\\n'\n                artifacts.push(this.parseArtifact(code_block, \"code\"))\n                code_block = \"\"\n            }\n            else if ( !in_code && code_block !== \"\")\n            {\n                artifacts.push(this.parseArtifact(code_block, \"code block\"))\n                code_block = \"\"\n            }            \n\n            // Images\n            if (words[0].charAt(0) === \"!\" && !in_code)\n            {\n                artifacts.push(this.parseArtifact(line, \"image\", fileDict))\n                if(fileDict && fileDict[line.substring(line.lastIndexOf(\"(\") + 1, line.lastIndexOf(\")\"))])\n                {\n                    mdLines[i] = line.replace(line.substring(line.lastIndexOf(\"(\") + 1, line.lastIndexOf(\")\")), fileDict[line.substring(line.lastIndexOf(\"(\") + 1, line.lastIndexOf(\")\"))])\n                    line = mdLines[i]\n                }\n            }\n\n            // VRMD EXTENDED SYNTAX\n            // Theme\n            if (words[0].charAt(0) === \"$\" && !in_code)\n            {\n                let field = line.substring(line.lastIndexOf(\"[\") + 1, line.lastIndexOf(\"]\"))\n                let textureSrc = line.substring(line.lastIndexOf(\"(\") + 1, line.lastIndexOf(\")\"))\n\n                if (fileDict && fileDict[line.substring(line.lastIndexOf(\"(\") + 1, line.lastIndexOf(\")\"))])\n                {\n                    textureSrc = fileDict[line.substring(line.lastIndexOf(\"(\") + 1, line.lastIndexOf(\")\"))]\n                }\n                else\n                {\n                    textureSrc = line.substring(line.lastIndexOf(\"(\") + 1, line.lastIndexOf(\")\"))\n                }\n\n                if(this.VSCode && !(/^(?:\\/|[a-z]+:\\/\\/)/.test(textureSrc)))\n                { \n                    textureSrc = this.VSCode + textureSrc\n                }\n\n                switch (field) {\n                    default:\n                        break\n                    case 'floor':\n                        exJSON.theme.floor = textureSrc\n                        break\n                    case 'walls':\n                        exJSON.theme.walls = textureSrc\n                        break\n                    case 'ceiling':\n                        exJSON.theme.ceiling = textureSrc\n                        break\n                }\n                mdLines.splice(i, 1)\n                --i\n            }\n            //3D models (.GLTF)\n            if (words[0].charAt(0) === \"&\" && !in_code)\n            {\n                artifacts.push(this.parseArtifact(line, \"3D\"))\n                mdLines.splice(i, 1)\n                --i\n            }\n            // Audio\n            if (words[0].charAt(0) === \"^\" && !in_code)\n            {\n                this.addAudio(artifacts, line, fileDict)\n                mdLines.splice(i, 1)\n                --i\n            }\n            // Hidden Artifact\n            if (words[0] === \"~\" && !in_code)\n            {\n                hidden_block = !hidden_block\n            }\n\n            if (hidden_block || (words[0] === \"~\" && !in_code))\n            {\n                mdLines.splice(i, 1)\n                --i\n            }\n\n            text += line + '\\n'\n        }\n\n        if(subJSON.name !== null)\n        {\n            if (block_quote !== \"\")\n            {\n                artifacts.push(this.parseArtifact(block_quote, \"block quote\"))\n                block_quote = \"\"\n            }\n            if (code_block !== \"\")\n            {\n                artifacts.push(this.parseArtifact(code_block, \"code block\"))\n                code_block = \"\"\n            }\n            subJSON.text = text\n            subJSON.artifacts = artifacts\n\n            text = \"\"\n            artifacts = []\n\n            exJSON.rooms.push(subJSON)\n            subJSON = {}\n        }        \n        this.tree = exJSON\n        this.cleanedMD = mdLines.join('\\n')\n        \n        return this.tree\n    }\n\n    parseArtifact(text, type, fileDict = null)\n    {        \n        let artifact = {}\n        artifact.type = type\n        artifact.audioSrc = null\n\n        switch(type)\n        {\n            default:\n                break\n            case 'image':\n                if (fileDict && fileDict[text.substring(text.lastIndexOf(\"(\") + 1, text.lastIndexOf(\")\"))])\n                {\n                    artifact.src = fileDict[text.substring(text.lastIndexOf(\"(\") + 1, text.lastIndexOf(\")\"))]\n                }\n                else\n                {\n                    artifact.src = text.substring(text.lastIndexOf(\"(\") + 1, text.lastIndexOf(\")\"))\n                }\n\n                artifact.alt = text.substring(text.lastIndexOf(\"[\") + 1, text.lastIndexOf(\"]\"))\n                break\n            case 'block quote':\n                artifact.text = text\n                break\n            case 'code':\n                artifact.code = text.replace(/`/g, \"\").replace('\\n', '')\n                break\n            case 'code block':\n                let cleaned = text.replace(/`/g, \"\")\n                artifact.lang = cleaned.split(\"\\n\")[0]\n                artifact.code = cleaned.replace(artifact.lang + '\\n', '')\n                break\n            case '3D':\n                artifact.src = text.substring(text.lastIndexOf(\"(\") + 1, text.lastIndexOf(\")\"))\n                artifact.name = text.substring(text.lastIndexOf(\"[\") + 1, text.lastIndexOf(\"]\"))\n                break\n        }\n\n        if(this.VSCode && artifact.src && !(/^(?:\\/|[a-z]+:\\/\\/)/.test(artifact.src)))\n        {             \n            artifact.src = this.VSCode + artifact.src\n        }\n        return artifact\n    }\n\n    addAudio(artifacts, audio)\n    {\n        if (fileDict && fileDict[audio.substring(audio.lastIndexOf(\"(\") + 1, audio.lastIndexOf(\")\"))])\n        {\n            artifacts[artifacts.length - 1].audioSrc = fileDict[audio.substring(audio.lastIndexOf(\"(\") + 1, audio.lastIndexOf(\")\"))]\n        }\n        else\n        {\n            artifacts[artifacts.length - 1].audioSrc = audio.substring(audio.lastIndexOf(\"(\") + 1, audio.lastIndexOf(\")\"))\n        }\n\n        if(this.VSCode && !(/^(?:\\/|[a-z]+:\\/\\/)/.test(artifacts[artifacts.length - 1].audioSrc)))\n        {\n            artifacts[artifacts.length - 1].audioSrc = this.VSCode + artifacts[artifacts.length - 1].audioSrc\n        }\n    }\n}\n\n","import React, {useEffect} from \"react\"\nimport ReactMarkdown from \"react-markdown\"\nimport hljs from \"highlight.js\"\n\nconst Exhibitdocument = (props) => {\n\n\n    \n    useEffect(()=>{\n        document.getElementById(\"doc-preview\").querySelectorAll(\"pre code\").forEach(block => {\n          hljs.highlightBlock(block);\n        });\n      },[props.md])\n  \n      function flatten(text, child) {\n        return typeof child === 'string'\n          ? text + child\n          : React.Children.toArray(child.props.children).reduce(flatten, text)\n      }\n      \n      function HeadingRenderer(props) {\n        let children = React.Children.toArray(props.children)\n        let text = children.reduce(flatten, '')\n        let slug = text.toLowerCase().replace(/[!\"#$%&'()*+,./:;<=>?@[\\]^`{|}~]/g,\"\").replace(/\\W/g, '-')\n        return React.createElement('h' + props.level, {id: slug}, props.children)\n      }\n    \n    return(\n    <div id=\"doc-preview\">\n        <ReactMarkdown source={props.md} renderers={{heading: HeadingRenderer}}/>\n    </div>\n)}\n\nexport default Exhibitdocument","import React from \"react\"\nimport {Scene, Entity} from \"aframe-react\"\nimport { OmitProps } from \"antd/lib/transfer/renderListBody\"\n\nconst exhibit = (props) => {\n  \n  let treeString = JSON.stringify(props.tree)\n\n  console.log(treeString);\n  \n\n  let cursor = null\n\n  if(props.editor) cursor =  <a-cursor></a-cursor>\n\n\n  return(\n      <Scene id={props.exhibitId} vr-mode-ui=\"enabled: false\" embedded background=\"color: #87ceeb\">\n        <a-assets>\n            <a-mixin id=\"checkpoint\"></a-mixin>\n            <a-mixin id=\"checkpoint-hovered\" color=\"#6CEEB5\"></a-mixin>\n            <img id=\"wallTexture\" src=\"/textures/wall.jpg\"/>\n            <img id=\"floorTexture\" src=\"/textures/concrete_floor.jpg\"/>\n            <img id=\"ceilingTexture\" src=\"/textures/concrete_floor.jpg\"/>\n            <img id=\"frameTexture\" src=\"/textures/frame.jpg\"/>\n          </a-assets>\n          <a-light type=\"ambient\" position=\"0 6 0\" rotation=\"0 0 45\"></a-light>\n          <Entity id=\"rig\"\n                    movement-controls={{enabled: true}}\n                    position=\"2 0 1\" \n                    rotation=\"0 180 0\">\n            <a-camera id=\"camera\"\n            look-controls=\"pointerLockEnabled: true\">\n            <a-sound  id =\"ambient-track\" src=\"src: url(/audio/light-piano-noodling-in-b.mp3)\" autoplay=\"false\" volume=\"0.4\" loop =\"true\" position=\"0 4 0\"></a-sound>\n              {cursor}\n            </a-camera>\n          <Entity laser-controls={{hand: 'left'}} raycaster={{objects: '.clickable', far: 3}} teleport-controls={{collisionEntities: '.scenery', drawForAllCollisions: false, landingMaxAngle: 45, button: 'trigger', cameraRig: '#rig', teleportOrigin: '#camera'}}></Entity>\n          <Entity laser-controls={{hand: 'right'}} raycaster={{objects: '.clickable', far: 3}} teleport-controls={{collisionEntities: '.scenery', drawForAllCollisions: false, landingMaxAngle: 45, button: 'trigger', cameraRig: '#rig', teleportOrigin: '#camera'}}></Entity>\n        </Entity>\n        <Entity id=\"museum\" \n                malloci={{\n                  tree: treeString,\n                  hallWidth: 8,\n                  wallHeight: 5,\n                  API: \"https://malloci.uc.r.appspot.com/generate\",\n                  base64Mode: props.b64,\n                  debug: props.debug}}></Entity>\n      </Scene>\n)}\n\nexport default exhibit","import React, {useState, useEffect} from 'react';\nimport { Redirect, useParams } from 'react-router-dom'\n\nimport firebase, {database} from \"../firebase/firebase\"\nimport FileDict from '../firebase/FileDictionary'\n\nimport ExhibitText from \"../components/exhibittext\"\nimport ImageFiles from \"../components/imagefiles\"\nimport { Button, Tooltip, Modal } from 'antd';\nimport { Row, Col, Tabs } from 'antd';\nimport Header from \"../components/header\";\nimport { DeleteOutlined } from '@ant-design/icons';\n\nimport Layout from \"../components/layout\"\n\nimport VRMD from \"../malloci/vrmd-parser\"\n\nimport ExhibitDocument from \"../components/exhibitdocument\"\nimport Exhibit from \"../components/exhibit\"\n\nimport \"./editor.css\"\n\n\nconst { TabPane } = Tabs;\n\nfunction callback(key) {\n  console.log(key);\n}\n\nfunction FileDictConcat(o2) {\n  for (var key in o2) {\n   FileDict[key] = o2[key];\n  }\n  console.log(FileDict);\n  \n }\n\nconst Mallocieditor = () => {\n\n  const { id } = useParams();\n\n\n  const [museumTree, setMuseumTree] = useState({ theme: {floor: null, walls: null, ceiling: null}, rooms: [{name:\"1\", artifacts: []}, {name:\"2\", artifacts:[]}]})  \n  const [md, setMd] = useState('')\n  const [rawMD, setRawMD] = useState(\"# Hello world! \\n\\n> Welcome to the world! \\n\\n## Hello continent \\n\\nThis is a starter exhibit. Hit build to view it in VR. The name of the museum is Hello world!. There is one room, Hello Continent. There's some wall art about baby elephants and a picture of a baby elephant in a bucket. \\n\\n> Baby elephants are endangered \\n\\n![baby elephants are endangered!](https://i.imgur.com/SnolApK.jpg)\")  \n  const [owner, setOwner] = useState('')\n  const [modalVisible, setModalVisible] = useState(false)\n\n  const [redirect, setRedirect] = useState('')\n\n  const updateExhibit = () => {\n    const vrmdParser = new VRMD()\n    const editor = document.getElementById('editor')\n    let tree = vrmdParser.parse(editor.value, FileDict)\n    setMuseumTree(tree)\n    setMd(vrmdParser.cleanedMD)\n  }\n\n  useEffect(() => {\n    if(id)\n    {\n      let docRef = database.collection(\"exhibits\").doc(id);\n\n      docRef.get().then((doc) => {\n          if (doc.exists) {\n            if(!firebase.auth().currentUser || firebase.auth().currentUser.uid !== doc.data().authorID)\n            {\n              setRedirect(`/Exhibits/${docRef.id}`)\n            }\n            console.log(\"success!!!!\");\n\n            FileDictConcat(JSON.parse(doc.data().fileDict))\n            setOwner(true)\n            setRawMD(doc.data().rawMD)\n          } else {\n              // doc.data() will be undefined in this case\n              console.log(\"No such document!\");\n              setRedirect(`/Exhibits/${docRef.id}`)\n\n          }\n      }).catch(function(error) {\n          console.log(\"Error getting document:\", error);\n          setRedirect(`/Exhibits/${docRef.id}`)\n      });\n    }\n    updateExhibit()\n  },[])\n  \n  const uploadExhibit = () => {\n    console.log(Object.keys(FileDict));\n    if(id)\n    {\n      let docRef = database.collection(\"exhibits\").doc(id);\n      docRef.update({\n        preview: Object.keys(FileDict).length !== 0 ? FileDict[Object.keys(FileDict)[0]] : 'img/Maria.jpg',\n        title: museumTree.name,\n        rawMD: document.getElementById('editor').value,\n        fileDict: JSON.stringify(FileDict),\n        md: md,\n        tree: museumTree\n      })\n      .then(function() {\n          console.log(\"Document successfully updated!\");\n          setRedirect(`/Exhibits/${docRef.id}`)\n      }).catch(function(error) {\n        console.error(\"Error adding document: \", error);\n      });\n    }\n    else\n    {\n      database.collection(\"exhibits\").add({\n        author: firebase.auth().currentUser.displayName,\n        authorID: firebase.auth().currentUser.uid,\n        preview: Object.keys(FileDict).length !== 0 ? FileDict[Object.keys(FileDict)[0]] : 'img/Maria.jpg',\n        title: museumTree.name,\n        rawMD: document.getElementById('editor').value,\n        fileDict: JSON.stringify(FileDict),\n        md: md,\n        tree: museumTree\n      })\n      .then(function(docRef) {\n        console.log(\"Document written with ID: \", docRef.id);\n        setRedirect(`/Exhibits/${docRef.id}`)\n      })\n      .catch(function(error) {\n          console.error(\"Error adding document: \", error);\n      });\n    }\n  }\n\n  const RedirectRenderer = () => {\n    if(redirect !== '') return <Redirect to={redirect} push/>\n    \n  }\n\n  const deleteExhibit = () => {\n      database.collection(\"exhibits\").doc(id).delete().then(function() {\n        console.log(\"Document successfully deleted!\");\n        setRedirect(`/`)\n\n    }).catch(function(error) {\n        console.error(\"Error removing document: \", error);\n    });\n  }\n\n  const DeleteButton = () => {\n    if(owner)\n    {\n      return(\n      <div>\n        <Tooltip title=\"Delete This Exhibit\"><Button type=\"danger\" shape=\"circle\" onClick={() => setModalVisible(true)} icon={<DeleteOutlined />} /></Tooltip>\n        <Modal\n        title=\"Basic Modal\"\n        visible={modalVisible}\n        onOk={() => deleteExhibit()}\n        onCancel={() => setModalVisible(false)}\n        okText=\"Yes, delete this Exhibit.\"\n        okButtonProps = {{ type:\"danger\" }}\n        cancelText=\"Cancel\"\n      >\n        <p>This will permanently delete your exhibit, Would you like to continue?</p>\n\n      </Modal>\n      </div>\n        \n      )\n    }\n  }\n  \n  return (\n   <Layout >\n     <Header siteTitle={\"Create a New Exhibit\"}></Header>\n     <div id=\"alertstyle\">\n     {/* <Alert \n      message=\"Online only!\"\n      description=\"This is an online editor: museums you create using this tool will not be saved! Please copy your text from the Markdown panel before you close your session.\"\n      type=\"info\"\n      showIcon closable\n    /> */}\n    </div>\n     <Row>\n     <Col classname=\"gutter-col\">\n        <div className=\"description\">\n            <p>A web editor to view museums written in markdown.<br></br>      \n            Create your exhibit in the panel on the left; there's a guide detailing the markdown syntax you should use. View your exhibit space in the \"Exhibit\" tab of panel on the right. The \"Document\" tab will contain an article of your exhibit instead.<br></br>\n            The editor area in the \"Markdown\" panel contains basic buttons to help you with the markdown syntax. You can click on the H icon to add a header, the link icon to link images, the blockquote icon to add a quote, and so on. In the event that you're using images from the internet in your exhibit via links, make sure that you're using images which are marked for reuse (they'll be blocked by your browser and won't show up, otherwise).\n            </p>\n        </div>\n    </Col>\n     </Row>\n    <Row>\n      <Col className=\"gutter-col\" span={12}>\n          <div className=\"gutter-row\" id=\"exhibittext\">\n            <ExhibitText value={rawMD} />\n          </div>\n\n          <div className=\"gutter-row\">\n            <Button onClick={() => {updateExhibit()}} id=\"build-exhibit\" type=\"primary\">Build</Button>\n          </div>\n        \n          <div className=\"gutter-row\" id=\"imageupload\">\n            <ImageFiles></ImageFiles>\n          </div>\n        \n      </Col>\n      <Col className=\"gutter-col\" span={12}>\n      <div className=\"gutter-row\" id=\"exhibitmaster\">\n          <div className=\"card-container\">\n            <Tabs onChange={callback} type=\"card\">\n                <TabPane id=\"exhibit_pane\" tab=\"Exhibit\" key=\"1\">\n                    <Exhibit exhibitId=\"preview\" tree={museumTree} editor={true} debug={true}/>\n                </TabPane>\n        \n                <TabPane tab=\"Document\" key=\"2\">\n                    <ExhibitDocument md={md} />\n                </TabPane>\n          </Tabs>\n          </div>\n        </div>\n        <div className=\"gutter-row\">\n            {DeleteButton()}\n            <Button onClick={() => {uploadExhibit()}} id=\"create-exhibit\" type=\"primary\">Publish</Button>\n          </div>\n      </Col>\n    </Row>\n    {RedirectRenderer()}\n  </Layout>\n  );\n}\n\nexport default Mallocieditor;\n","import React from \"react\"\n\nimport { Upload, message, Button } from 'antd';\nimport { UploadOutlined } from '@ant-design/icons';\n\nconst props = {\n    name: 'file',\n    multiple: true,\n    customRequest(data) {\n      let reader = new FileReader();      \n      reader.readAsBinaryString(data.file);\n      reader.onload = function(e) {\n          let bits = e.target.result; \n\n          let src = `${data.file.name}`\n\n          sessionStorage.setItem(src, bits)\n      }\n    },\n    onChange(info) {\n      if (info.file.status !== 'uploading') {\n        console.log(info.file, info.fileList);\n      }\n      if (info.file.status === 'done') {\n        message.success(`${info.file.name} file uploaded successfully`);\n      } else if (info.file.status === 'error') {\n        message.error(`${info.file.name} file upload failed.`);\n      }\n    }\n  };\n  \nconst ImageFiles = () => (\n    <Upload {...props}>\n      <Button>\n        <UploadOutlined /> Upload\n      </Button>\n    </Upload>\n  )\n\nexport default ImageFiles","import React, {useState, useEffect} from 'react';\nimport { Redirect } from 'react-router-dom'\n\nimport firebase from \"../firebase/firebase\"\n\nimport ExhibitText from \"../components/exhibittext\"\nimport PGImageFiles from \"../components/pgimagefiles\"\nimport { Button } from 'antd';\nimport { Row, Col, Tabs } from 'antd';\nimport Header from \"../components/header\";\nimport { Alert } from 'antd';\nimport Layout from \"../components/layout\"\n\nimport VRMD from \"../malloci/vrmd-parser\"\n\nimport ExhibitDocument from \"../components/exhibitdocument\"\nimport Exhibit from \"../components/exhibit\"\n\nimport \"./editor.css\"\n\n\nconst { TabPane } = Tabs;\n\nfunction callback(key) {\n  console.log(key);\n}\n\n\nfunction Playground() {\n\n  const initValue = \"# Hello world! \\n\\n> Welcome to the world! \\n\\n## Hello continent \\n\\nThis is a starter exhibit. Hit build to view it in VR. The name of the museum is Hello world!. There is one room, Hello Continent. There's some wall art about baby elephants and a picture of a baby elephant in a bucket. \\n\\n> Baby elephants are endangered \\n\\n![baby elephants are endangered!](https://i.imgur.com/SnolApK.jpg)\"\n\n  const [museumTree, setMuseumTree] = useState({ theme: {floor: null, walls: null, ceiling: null}, rooms: [{name:\"1\", artifacts: []}, {name:\"2\", artifacts:[]}]})  \n  const [md, setMd] = useState('')  \n\n  const updateExhibit = () => {\n  \n    const vrmdParser = new VRMD()\n    const editor = document.getElementById('editor')\n    console.log('editor value', editor)\n    let tree = vrmdParser.parse(editor.value)\n    setMuseumTree(tree)\n    setMd(vrmdParser.cleanedMD)\n  }\n\n  useEffect(function() {\n    updateExhibit()\n  },[])\n\n  const goToEditor = () => {\n    if(firebase.auth().currentUser && firebase.auth().currentUser.email.match(\".*berkeley[.]edu\")) return <Redirect to={`/Editor`} push/>\n    }\n  \n  return (\n    \n   <Layout >\n     <Header siteTitle={\"Playground\"}></Header>\n     <div id=\"alertstyle\">\n     <Alert \n      message=\"Demo only!\"\n      description=\"This is a demo editor: museums you create using this tool will not be saved! Please copy your text from the Markdown panel before you close your session.\"\n      type=\"info\"\n      showIcon closable\n    />\n    </div>\n     <Row>\n     <Col classname=\"gutter-col\">\n        <div className=\"description\">\n            <p>A web editor to view museums written in markdown.<br></br>      \n            Create your exhibit in the panel on the left; there's a guide detailing the markdown syntax you should use. View your exhibit space in the \"Exhibit\" tab of panel on the right. The \"Document\" tab will contain an article of your exhibit instead.<br></br>\n            The editor area in the \"Markdown\" panel contains basic buttons to help you with the markdown syntax. You can click on the H icon to add a header, the link icon to link images, the blockquote icon to add a quote, and so on. In the event that you're using images from the internet in your exhibit via links, make sure that you're using images which are marked for reuse (they'll be blocked by your browser and won't show up, otherwise).\n            </p>\n        </div>\n    </Col>\n     </Row>\n    <Row>\n      <Col className=\"gutter-col\" span={12}>\n          <div className=\"gutter-row\" id=\"exhibittext\">\n            <ExhibitText value = {initValue} />\n          </div>\n\n          <div className=\"gutter-row\">\n            <Button onClick={() => {updateExhibit()}} id=\"build-exhibit\" type=\"primary\">Build</Button>\n          </div>\n        \n          <div className=\"gutter-row\" id=\"imageupload\">\n            <PGImageFiles></PGImageFiles>\n          </div>\n        \n      </Col>\n      <Col className=\"gutter-col\" span={12}>\n      <div id=\"exhibitmaster\">\n          <div className=\"card-container\">\n            <Tabs onChange={callback} type=\"card\">\n                <TabPane id=\"exhibit_pane\" tab=\"Exhibit\" key=\"1\">\n                    <Exhibit exhibitId=\"preview\" tree={museumTree} b64={true} editor={true} debug={true}/>\n                </TabPane>\n        \n                <TabPane tab=\"Document\" key=\"2\">\n                    <ExhibitDocument md={md} />\n                </TabPane>\n          </Tabs>\n          </div>\n        </div>\n      </Col>\n    </Row>\n    {goToEditor()}\n  </Layout>\n  );\n}\n\nexport default Playground;","import React, {useState, useEffect} from \"react\"\nimport \"react-markdown\"\nimport hljs from \"highlight.js\"\nimport VRMD from \"../malloci/vrmd-parser\"\nimport Layout from \"../components/layout\"\nimport Exhibit from \"../components/exhibit\"\nimport './museum.css'\nimport { Typography } from 'antd';\nimport ReactMarkdown from \"react-markdown\"\n\n// const heroimg = '../logo.svg'\nconst Museum = () => {\n\n  let [museumTree, setMuseumTree] = useState({ theme: {floor: null, walls: null, ceiling: null}, rooms: [{name:\"1\", artifacts: []}, {name:\"2\", artifacts:[]}]})  \n  let[md, setMd] = useState('')\n\n  const vrmdParser = new VRMD()\n\n    useEffect(() => {\n      fetch(\"https://raw.githubusercontent.com/mallocivr/mallocivr.github.io/master/markDown/home.md\")\n      .then(res => res.text())\n      .then(post => {\n        vrmdParser.parse(post)\n        setMd(vrmdParser.cleanedMD)\n        setMuseumTree(vrmdParser.tree)\n      })\n      .catch((err) => console.error(err));\n    }, [])\n\n    useEffect(()=>{\n      document.getElementById(\"md_article\").querySelectorAll(\"pre code\").forEach(block => {\n        hljs.highlightBlock(block);\n      });\n    },[md])\n\n    function flatten(text, child) {\n      return typeof child === 'string'\n        ? text + child\n        : React.Children.toArray(child.props.children).reduce(flatten, text)\n    }\n    \n    function HeadingRenderer(props) {\n      let children = React.Children.toArray(props.children)\n      let text = children.reduce(flatten, '')\n      let slug = text.toLowerCase().replace(/[!\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~]/g,\"\").replace(/\\W/g, '-')\n      return React.createElement('h' + props.level, {id: slug}, props.children)\n    }\n\n\n  \n  return(\n  <Layout >\n    <Typography >\n    {/* <Header siteTitle={\"Malloci\"}></Header> */}\n    {/* <Row id=\"hero\">\n      <Col className=\"heroimg\" span={12}>\n        \n      </Col>\n      <Col className=\"herotext\" span={12}>\n        <h1>Malloci</h1>\n      </Col>\n    </Row> */}\n\n    <div className=\"museum\">\n      {/* <img className=\"heroimg\" src={heroimg}></img> */}\n      <div id=\"md_article\" className=\"museumtext\">\n        <ReactMarkdown source={md} renderers={{heading: HeadingRenderer}}/>\n      </div>\n    </div>\n    <Exhibit exhibitId=\"exhibit\" tree= {museumTree} b64={false} debug={true}/>\n    </Typography>\n  </Layout>\n)};\n\nexport default Museum","import React, {useState, useEffect} from \"react\"\nimport {database} from \"../firebase/firebase\"\nimport {Link} from 'react-router-dom';\nimport Layout from \"../components/layout\"\nimport \"./gallery.css\"\nimport { Card } from 'antd';\n\nimport Header from \"../components/header\";\n\nconst { Meta } = Card;\n\nconst Gallery = () => {\n  const [tiles, setTiles] = useState([])\n\n  useEffect(function() {\n    database.collection(\"exhibits\").get().then((querySnapshot) => {\n      let exhibits = querySnapshot.docs.map((doc) => {\n          // doc.data() is never undefined for query doc snapshots\n          console.log(doc.id, \" => \", doc.data());\n          return(\n            <Link to={`/Exhibits/${doc.id}`}>\n              <Card className=\"card-space\"\n                hoverable\n                style={{ width: 300 }}\n                cover={<img alt=\"example\" src={doc.data().preview} />}\n              >\n              <Meta title={doc.data().title}/>\n              </Card>     \n            </Link>\n          )\n      });\n\n      setTiles(exhibits)\n    });\n  },[])    \n\n  \n  return(\n    <Layout >\n     <Header siteTitle={\"The Malloci Gallery\"} ></Header>\n    <div className=\"description\">\n        <p>A curation of VR museums generated using Malloci.</p>\n    </div>\n    <div className=\"mastercard\">\n    {tiles}\n  {/* <Card className=\"card-space\"\n    hoverable\n    style={{ width: 300 }}\n    cover={<img alt=\"example\" src=\"https://upload.wikimedia.org/wikipedia/commons/e/e2/Northern_lights_%289997815384%29.jpg\" />}\n  >\n    <Meta title=\"The Other Auroras\" description=\"Northern lights over Iceland\" />\n  </Card> */}\n  </div>\n  </Layout>\n)};\n\n\nexport default Gallery","import React, {useState, useEffect} from \"react\"\nimport firebase, {database} from \"../firebase/firebase\"\nimport {Link, useParams } from 'react-router-dom';\nimport hljs from \"highlight.js\"\nimport Layout from \"../components/layout\"\nimport Exhibit from \"../components/exhibit\"\nimport {Tooltip, Button, Typography } from 'antd';\nimport { EditOutlined } from '@ant-design/icons';\n  \nimport './museum.css'\nimport ReactMarkdown from \"react-markdown\"\n\nconst Example = () => {\n\n  const { exhibit } = useParams();\n\n  const [museumTree, setMuseumTree] = useState({ theme: {floor: null, walls: null, ceiling: null}, rooms: [{name:\"1\", artifacts: []}, {name:\"2\", artifacts:[]}]})  \n  const [md, setMd] = useState('')\n\n  const [isOwner, setIsOwner] = useState(false)\n\n    useEffect(() => {\n      var docRef = database.collection(\"exhibits\").doc(exhibit);\n\n      docRef.get().then(function(doc) {\n          if (doc.exists) {\n            if(firebase.auth().currentUser && firebase.auth().currentUser.uid === doc.data().authorID)\n            {\n              setIsOwner(true)\n            }\n              setMd(doc.data().md)\n              setMuseumTree(doc.data().tree)\n          } else {\n              // doc.data() will be undefined in this case\n              console.log(\"No such document!\");\n          }\n      }).catch(function(error) {\n          console.log(\"Error getting document:\", error);\n      });\n    }, [])\n\n    useEffect(()=>{\n      document.getElementById(\"md_article\").querySelectorAll(\"pre code\").forEach(block => {\n        hljs.highlightBlock(block);\n      });\n    },[md])\n\n    function flatten(text, child) {\n      return typeof child === 'string'\n        ? text + child\n        : React.Children.toArray(child.props.children).reduce(flatten, text)\n    }\n    \n    function HeadingRenderer(props) {\n      let children = React.Children.toArray(props.children)\n      let text = children.reduce(flatten, '')\n      let slug = text.toLowerCase().replace(/[.,\\/#!$%\\^&\\*;:{}=_`~()?]/g,\"\").replace(/[ ’]/g, '-')\n      return React.createElement('h' + props.level, {id: slug}, props.children)\n    }\n\n    function ImageRenderer(props) {\n      return <p><img {...props} /></p>\n    }\n\n    function checkOwnerShip(){\n      if(isOwner)\n      {\n        return <Link to={`/Editor/${exhibit}`}><Tooltip title=\"Edit This Exhibit\"><Button type=\"default\" shape=\"circle\" icon={<EditOutlined />} /></Tooltip></Link>\n      }\n    }\n  \n  return(\n  <Layout >\n    <Typography>\n    <div className=\"museum\">\n      {/* <img className=\"m\" src={heroimg}></img> */}\n      {checkOwnerShip()}\n      <div id=\"md_article\" className=\"museumtext\">\n        <ReactMarkdown source={md} renderers={{heading: HeadingRenderer, image: ImageRenderer}}/>\n      </div>\n    </div>\n    </Typography>\n    <Exhibit exhibitId=\"exhibit\" tree= {museumTree} b64={false} debug={true}/>\n  </Layout>\n)};\n\nexport default Example","import React, {useState} from \"react\"\nimport Layout from \"../components/layout\"\nimport \"./gallery.css\"\nimport { Card } from 'antd';\n\nimport Header from \"../components/header\";\n\nconst { Meta } = Card;\n\nconst About = () => (\n    <Layout >\n     <Header siteTitle={\"About us\"} ></Header>\n    <div className=\"description\">\n        <p>The team behind Malloci</p>\n    </div>\n    <div className=\"mastercard\">\n<Card className=\"card-space\"\n    hoverable\n    style={{ width: 500 }}\n    cover={<img alt=\"example\" src=\"https://upload.wikimedia.org/wikipedia/commons/e/e2/Northern_lights_%289997815384%29.jpg\" />}\n  >\n    <Meta title=\"Masha Belyi\" description=\"NLP Engineer\" />\n  </Card>\n\n  <Card className=\"card-space\"\n    hoverable\n    style={{ width: 500 }}\n    cover={<img alt=\"example\" src=\"https://upload.wikimedia.org/wikipedia/commons/e/e2/Northern_lights_%289997815384%29.jpg\" />}\n  >\n    <Meta title=\"Michael Gutensohn\" description=\"Product Owner + VR Software Engineer\" />\n  </Card>\n\n  <Card className=\"card-space\"\n    hoverable\n    style={{ width: 500 }}\n    cover={<img alt=\"example\" src=\"https://upload.wikimedia.org/wikipedia/commons/e/e2/Northern_lights_%289997815384%29.jpg\" />}\n  >\n    <Meta title=\"Jennifer Momoh\" description=\"Quantitative UX Researcher\" />\n  </Card>\n\n  <Card className=\"card-space\"\n    hoverable\n    style={{ width: 500 }}\n    cover={<img alt=\"example\" src=\"https://upload.wikimedia.org/wikipedia/commons/e/e2/Northern_lights_%289997815384%29.jpg\" />}\n  >\n    <Meta title=\"Sharanya Soundararajan\" description=\"Rabbit\" />\n  </Card>\n\n  <Card className=\"card-space\"\n    hoverable\n    style={{ width: 500 }}\n    cover={<img alt=\"example\" src=\"https://upload.wikimedia.org/wikipedia/commons/e/e2/Northern_lights_%289997815384%29.jpg\" />}\n  >\n    <Meta title=\"Yejun Wu\" description=\"VR Experience Designer\" />\n  </Card>\n  </div>\n  </Layout>\n);\n\n\nexport default About","import React, {useState, useEffect} from \"react\"\nimport firebase from \"./firebase/firebase\"\nimport './App.css'\nimport {\n  HashRouter as Router,\n  Redirect,\n  NavLink,\n  Route,\n  Switch,\n} from 'react-router-dom';\nimport { Menu } from 'antd';\nimport Mallocieditor from \"./pages/mallocieditor\"\nimport Playground from \"./pages/playground\"\nimport Museum from \"./pages/museum\"\nimport Gallery from \"./pages/gallery\"\nimport Example from \"./pages/example\"\nimport About from \"./pages/about\"\n\n\nconst logo = \"./logo192.png\"\n\nconst App = () => {\n  const [loggedIn, setLoggedIn] = useState(false)\n  const [redirectOnLogOut, setRedirectOnLogout] = useState(false)\n  useEffect(() => {\n    firebase.auth().onAuthStateChanged((user) => {\n      if (user) {\n        setLoggedIn(true)\n      }\n      else\n      {\n        setLoggedIn(false)\n      }\n   });\n  },[])\n\n  const editor = () => {\n    if (loggedIn && firebase.auth().currentUser.email.match(\".*berkeley[.]edu\"))\n    {\n      return(\n        <NavLink to=\"/Editor\">\n                  Editor\n        </NavLink>\n      )\n    }\n    else\n    {\n      return(\n        <NavLink to=\"/Playground\">\n                  Playground\n        </NavLink>\n      )\n    }\n  } \n\n  const logout = () => {\n    firebase.auth().signOut()\n    setRedirectOnLogout(true)\n  }\n\n  const login = () => {\n    let provider = new firebase.auth.GoogleAuthProvider();\n    firebase.auth().signInWithPopup(provider)\n    setRedirectOnLogout(false)\n  }\n\n  const signInOut = () => {\n    if (loggedIn)\n    {\n      return(\n        <a onClick={() => {logout()}}>\n                  Sign Out\n        </a>\n      )\n    }\n    else\n    {\n      return(\n        <a onClick={() => {login()}}>\n                  Sign In\n        </a>\n      )\n    }\n  }\n  \n  const RedirectRenderer = () => {\n    if(redirectOnLogOut) return <Redirect to='/' push/> \n  }\n    return (\n     <div id=\"navbar\">\n       <a href=\"/\"><img src={logo} id=\"logoformatting\"></img></a>\n\n      <div id=\"mallocititle\"><h2><a href=\"/\">Malloci</a></h2></div>\n\n\n    <Router>\n      <div id=\"menualign\">\n        \n            <Menu mode=\"horizontal\">\n              <Menu.Item key=\"gallery\">\n                <NavLink to=\"/\">\n                  Gallery\n      </NavLink>\n              </Menu.Item>\n              <Menu.Item key=\"museum\">\n              <NavLink to=\"/Malloci\">\n              About Malloci\n      </NavLink>\n    </Menu.Item>\n              <Menu.Item key=\"mallocieditor\">\n                {editor()}\n              </Menu.Item>\n              \n\n              {/* <Menu.Item key=\"about\">\n              <NavLink to=\"/TheTeam\">\n                The team\n                </NavLink>\n    </Menu.Item> */}\n            </Menu>\n            \n      </div>\n      <div id=\"signInOut\">\n        <Menu>\n          <Menu.Item key=\"signin\">\n            {signInOut()}\n          </Menu.Item>\n        </Menu>\n      </div>\n        <Switch>\n          <Route exact path=\"/\">\n            <Gallery />\n          </Route>\n          <Route exact path=\"/Playground\">\n            <Playground />\n          </Route>\n          <Route exact path=\"/Editor\">\n            <Mallocieditor />\n          </Route>\n          <Route exact path=\"/Malloci\">\n            <Museum />\n          </Route>\n          <Route path=\"/exhibits/:exhibit\">\n            <Example/>\n          </Route>\n          <Route path=\"/Editor/:id\">\n            <Mallocieditor />\n          </Route>\n          <Route exact path=\"/TheTeam\">\n            <About />\n          </Route>\n          {/* <Route exact path=\"/SignIn\">\n            <SignIn />\n          </Route> */}\n        </Switch>\n        {RedirectRenderer()}\n\n      </Router>\n     </div>\n    );\n}\n\nexport default App\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App'\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}