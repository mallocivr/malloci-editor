(this.webpackJsonpmallocivr=this.webpackJsonpmallocivr||[]).push([[0],{186:function(e,t,a){},187:function(e,t,a){},229:function(e,t,a){e.exports=a(718)},234:function(e,t,a){},235:function(e,t,a){},413:function(e,t,a){},718:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(4),i=a.n(l),c=(a(234),a(113)),o=a(114),s=a(227),m=a(225),u=(a(235),a(63)),d=a(65),h=a(41),p=a(51),g=a(153),f=a(728),E=a(723),b=a(721),w=[{title:"Markdown",className:"markdown",dataIndex:"markdown"},{title:"Rendered",className:"rendered",dataIndex:"rendered"}],v=[{key:"1",markdown:"# article title",rendered:"The entire museum space"},{key:"2",markdown:"## section title",rendered:"Creates a room in the museum"},{key:"3",markdown:"$[walls](img.jpg) \n$[ceiling](img.jpg) \n$[floor](img.jpg)",rendered:"To change the textures of the walls, floor, or the ceiling"}],y=function(){return r.a.createElement("div",null,r.a.createElement(b.a,{id:"panelstyle",columns:w,dataSource:v,bordered:!0,pagination:!1}),r.a.createElement("p",{id:"panelstyle"},"While uploading and using image textures for the walls, ceiling and floor, it is recommended that you crop your textures so that the dimensions are powers of 2 for performance reasons."))},k=[{title:"Markdown",className:"markdown",dataIndex:"markdown"},{title:"Rendered",className:"rendered",dataIndex:"rendered"}],x=[{key:"1",markdown:"![caption text](path/to/file.jpg)",rendered:"\u200bThis image will become a painting on the wall in the VR museum"},{key:"2",markdown:"~ \n![caption text](path/to/file.jpg) \n~",rendered:"This image will be visible in the VR museum, but not in the document view"},{key:"3",markdown:"![this image has audio attached](path/to/file.jpg) \n^(audio-file.m4a)",rendered:"This audio file will be placed in the VR exhibit and the document, attached to the image or blockquote on the line above it"},{key:"4",markdown:"> Block quote",rendered:"\u200bThis text will become a painting on the wall"},{key:"5",markdown:"> Multi line\n> block quote",rendered:"\u200bThis text will become a painting on the wall"},{key:"6",markdown:'```var s = "JavaScript syntax highlighting" \n alert(s);```',rendered:r.a.createElement("code",null,'var s = "JavaScript syntax highlighting" ',r.a.createElement("br",null)," alert(s)")}],j=function(){return r.a.createElement("div",null,r.a.createElement(b.a,{id:"panelstyle",columns:k,dataSource:x,bordered:!0,pagination:!1}))},A=E.a.Panel,O=function(){return r.a.createElement("div",{className:"markdown-container"},r.a.createElement(E.a,{defaultActiveKey:[""]},r.a.createElement(A,{header:"Extended Markdown syntax guide",id:"headerstyle",key:"1"},r.a.createElement("p",null,"Creating and formatting rooms in the museum:"),r.a.createElement(y,null),r.a.createElement("p",null,"Populating the room with artifacts:"),r.a.createElement(j,null))))},I=f.a.TextArea,N=g.a.TabPane;function S(e){console.log(e)}var M=function(){return r.a.createElement("div",{className:"card-container"},r.a.createElement(g.a,{onChange:S,type:"card"},r.a.createElement(N,{tab:"Markdown",key:"1"},r.a.createElement(O,null),r.a.createElement(I,{id:"editor",placeholder:"Markdown content to generate the VR exhibit goes here."}))))},C=a(727),T=a(722),_=a(42),B=a(726),R={name:"file",multiple:!0,customRequest:function(e){var t=new FileReader;t.readAsBinaryString(e.file),t.onload=function(t){var a=t.target.result,n="".concat(e.file.name);sessionStorage.setItem(n,a)}},onChange:function(e){"uploading"!==e.file.status&&console.log(e.file,e.fileList),"done"===e.file.status?C.a.success("".concat(e.file.name," file uploaded successfully")):"error"===e.file.status&&C.a.error("".concat(e.file.name," file upload failed."))}},V=function(){return r.a.createElement(T.a,R,r.a.createElement(_.a,null,r.a.createElement(B.a,null)," Upload"))},D=a(89),q=a(35),$=a(725),P=function(e){var t=e.siteTitle;return r.a.createElement($.a,{className:"site-page-header",title:t})};P.defaultProps={siteTitle:"Malloci"};var W=P,L=a(729),J=(a(413),function(e){var t=e.children;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{margin:"0 auto",padding:"0 1.0875rem 1.45rem"}},r.a.createElement("main",null,t),r.a.createElement("footer",null,"\xa9 ",(new Date).getFullYear(),", Built with mochi muffins.")))}),F=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Object(c.a)(this,e),this.VSCode=t,this.debug=a,this.tree=null,this.cleanedMD=null}return Object(o.a)(e,[{key:"parseList",value:function(e){for(var t={rooms:[],theme:{floor:null,walls:null,ceiling:null}},a={},n=[],r="",l="",i="",c="",o=!1,s=!1,m=e.split(","),u=0;u<m.length;u++){var d=m[u],h=d.split(" ");if("#"===h[0].charAt(0)&&!o){if(h[0].includes("###"))continue;r=h.shift(),null!==a.name?(a.text=l,a.artifacts=n,l="",n=[],"#"!==r&&"##"!==r||(t.rooms.push(a),a={})):""!==l&&(t.text=l,t.artifact=n,l="",n=[]),"#"===r&&(t.name=h.join(" ")),a.name=h.join(" ")}if(">"!==h[0].charAt(0)||o?""!==i&&(n.push(this.parseArtifact(i,"block quote")),i=""):i+=h.join(" ").replace(">","").replace(/(^[\s]+|[\s]+$)/,"\n"),h[0].includes("```")&&!o?(c+=d+"\n",o=!0):o?(d.includes("```")&&(o=!1),c+=d+"\n"):""===c&&"`"===h[0].charAt(0)?(c+=d+"\n",n.push(this.parseArtifact(c,"code")),c=""):o||""===c||(n.push(this.parseArtifact(c,"code block")),c=""),"!"!==h[0].charAt(0)||o||n.push(this.parseArtifact(d,"image")),"$"===h[0].charAt(0)&&!o){var p=d.substring(d.lastIndexOf("[")+1,d.lastIndexOf("]")),g=d.substring(d.lastIndexOf("(")+1,d.lastIndexOf(")"));switch(p){default:break;case"floor":t.theme.floor=g;break;case"walls":t.theme.walls=g;break;case"ceiling":t.theme.ceiling=g}m.splice(u,1),--u}"&"!==h[0].charAt(0)||o||(n.push(this.parseArtifact(d,"3D")),m.splice(u,1),--u),"^"!==h[0].charAt(0)||o||(this.addAudio(n,d),m.splice(u,1),--u),"~"!==h[0]||o||(s=!s),(s||"~"===h[0]&&!o)&&(m.splice(u,1),--u),this.debug&&console.log(n),l+=d+"\n"}return null!==a.name&&(a.text=l,a.artifacts=n,l="",n=[],t.rooms.push(a),a={}),this.tree=t,this.cleanedMD=m.join("\n"),this.tree}},{key:"parse",value:function(e){console.log("parsing"),console.log(e);for(var t={rooms:[],theme:{floor:null,walls:null,ceiling:null}},a={},n=[],r="",l="",i="",c="",o=!1,s=!1,m=e.split("\n"),u=0;u<m.length;u++){var d=m[u];console.log(d);var h=d.split(" ");if(console.log(h),"#"===h[0].charAt(0)&&!o){if(h[0].includes("###"))continue;r=h.shift(),null!==a.name?(a.text=l,a.artifacts=n,l="",n=[],"#"!==r&&"##"!==r||(t.rooms.push(a),a={})):""!==l&&(t.text=l,t.artifact=n,l="",n=[]),"#"===r&&(t.name=h.join(" ")),a.name=h.join(" ")}if(">"!==h[0].charAt(0)||o?""!==i&&(n.push(this.parseArtifact(i,"block quote")),i=""):(console.log("block quote!!"),i+=h.join(" ").replace(">","").replace(/(^[\s]+|[\s]+$)/,"\n")),h[0].includes("```")&&!o?(c+=d+"\n",o=!0):o?(d.includes("```")&&(o=!1),c+=d+"\n"):""===c&&"`"===h[0].charAt(0)?(c+=d+"\n",n.push(this.parseArtifact(c,"code")),c=""):o||""===c||(n.push(this.parseArtifact(c,"code block")),c=""),"!"!==h[0].charAt(0)||o||n.push(this.parseArtifact(d,"image")),"$"===h[0].charAt(0)&&!o){var p=d.substring(d.lastIndexOf("[")+1,d.lastIndexOf("]")),g=d.substring(d.lastIndexOf("(")+1,d.lastIndexOf(")"));switch(this.VSCode&&!/^(?:\/|[a-z]+:\/\/)/.test(g)&&(g=this.VSCode+g),p){default:break;case"floor":t.theme.floor=g;break;case"walls":t.theme.walls=g;break;case"ceiling":t.theme.ceiling=g}m.splice(u,1),--u}"&"!==h[0].charAt(0)||o||(n.push(this.parseArtifact(d,"3D")),m.splice(u,1),--u),"^"!==h[0].charAt(0)||o||(this.addAudio(n,d),m.splice(u,1),--u),"~"!==h[0]||o||(s=!s),(s||"~"===h[0]&&!o)&&(m.splice(u,1),--u),l+=d+"\n"}return null!==a.name&&(""!==i&&(n.push(this.parseArtifact(i,"block quote")),i=""),""!==c&&(n.push(this.parseArtifact(c,"code block")),c=""),a.text=l,a.artifacts=n,l="",n=[],t.rooms.push(a),a={}),this.tree=t,this.cleanedMD=m.join("\n"),this.tree}},{key:"parseArtifact",value:function(e,t){console.log(e,t);var a={};switch(a.type=t,a.audioSrc=null,t){default:break;case"image":a.src=e.substring(e.lastIndexOf("(")+1,e.lastIndexOf(")")),a.alt=e.substring(e.lastIndexOf("[")+1,e.lastIndexOf("]"));break;case"block quote":a.text=e;break;case"code":a.code=e.replace(/`/g,"").replace("\n","");break;case"code block":var n=e.replace(/`/g,"");a.lang=n.split("\n")[0],a.code=n.replace(a.lang+"\n","");break;case"3D":a.src=e.substring(e.lastIndexOf("(")+1,e.lastIndexOf(")")),a.name=e.substring(e.lastIndexOf("[")+1,e.lastIndexOf("]"))}return this.VSCode&&a.src&&!/^(?:\/|[a-z]+:\/\/)/.test(a.src)&&(a.src=this.VSCode+a.src),a}},{key:"addAudio",value:function(e,t){e[e.length-1].audioSrc=t.substring(t.lastIndexOf("(")+1,t.lastIndexOf(")")),this.VSCode&&!/^(?:\/|[a-z]+:\/\/)/.test(e[e.length-1].audioSrc)&&(e[e.length-1].audioSrc=this.VSCode+e[e.length-1].audioSrc)}}]),e}(),z=a(69),G=a.n(z),U=a(85),Y=a.n(U),H=function(e){function t(e,a){return"string"===typeof a?e+a:r.a.Children.toArray(a.props.children).reduce(t,e)}return Object(n.useEffect)((function(){document.getElementById("doc-preview").querySelectorAll("pre code").forEach((function(e){Y.a.highlightBlock(e)}))}),[e.md]),r.a.createElement("div",{id:"doc-preview"},r.a.createElement(G.a,{source:e.md,renderers:{heading:function(e){var a=r.a.Children.toArray(e.children).reduce(t,"").toLowerCase().replace(/[!"#$%&'()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\W/g,"-");return r.a.createElement("h"+e.level,{id:a},e.children)}}}))},K=a(88),Q=function(e){var t=JSON.stringify(e.tree),a=null;return e.b64&&(a=r.a.createElement("a-cursor",null)),r.a.createElement(K.Scene,{id:e.exhibitId,"vr-mode-ui":"enabled: false",embedded:!0,background:"color: #87ceeb"},r.a.createElement("a-assets",null,r.a.createElement("a-mixin",{id:"checkpoint"}),r.a.createElement("a-mixin",{id:"checkpoint-hovered",color:"#6CEEB5"}),r.a.createElement("img",{id:"wallTexture",src:"/textures/wall.jpg"}),r.a.createElement("img",{id:"floorTexture",src:"/textures/concrete_floor.jpg"}),r.a.createElement("img",{id:"ceilingTexture",src:"/textures/concrete_floor.jpg"}),r.a.createElement("img",{id:"frameTexture",src:"/textures/frame.jpg"})),r.a.createElement("a-light",{type:"ambient",position:"0 6 0",rotation:"0 0 45"}),r.a.createElement(K.Entity,{id:"rig","movement-controls":{enabled:!0},position:"2 0 1",rotation:"0 180 0"},r.a.createElement("a-camera",{id:"camera","look-controls":"pointerLockEnabled: true"},r.a.createElement("a-sound",{id:"ambient-track",src:"src: url(/audio/light-piano-noodling-in-b.mp3)",autoplay:"false",volume:"0.4",loop:"true",position:"0 4 0"}),a),r.a.createElement(K.Entity,{"laser-controls":{hand:"left"},raycaster:{objects:".clickable",far:3},"teleport-controls":{collisionEntities:".scenery",drawForAllCollisions:!1,landingMaxAngle:45,button:"trigger",cameraRig:"#rig",teleportOrigin:"#camera"}}),r.a.createElement(K.Entity,{"laser-controls":{hand:"right"},raycaster:{objects:".clickable",far:3},"teleport-controls":{collisionEntities:".scenery",drawForAllCollisions:!1,landingMaxAngle:45,button:"trigger",cameraRig:"#rig",teleportOrigin:"#camera"}})),r.a.createElement(K.Entity,{id:"museum",malloci:{tree:t,hallWidth:8,wallHeight:5,API:"https://malloci.uc.r.appspot.com/generate",base64Mode:e.b64,debug:e.debug}}))},X=g.a.TabPane;function Z(e){console.log(e)}var ee=function(){var e=Object(n.useState)({theme:{floor:null,walls:null,ceiling:null},rooms:[{name:"1",artifacts:[]},{name:"2",artifacts:[]}]}),t=Object(p.a)(e,2),a=t[0],l=t[1],i=Object(n.useState)(""),c=Object(p.a)(i,2),o=c[0],s=c[1];return r.a.createElement(J,null,r.a.createElement(W,{siteTitle:"Malloci Editor"}),r.a.createElement("div",{id:"alertstyle"},r.a.createElement(L.a,{message:"Online only!",description:"This is an online editor: museums you create using this tool will not be saved! Please copy your text from the Markdown panel before you close your session.",type:"info",showIcon:!0,closable:!0})),r.a.createElement(D.a,null,r.a.createElement(q.a,{classname:"gutter-col"},r.a.createElement("div",{className:"description"},r.a.createElement("p",null,"A web editor to view museums written in markdown.",r.a.createElement("br",null),'Use the panel on the left to create your exhibit; there\'s a guide detailing the markdown syntax you should use. View your exhibit space in the "Exhibit" tab of panel on the right. The "Document" tab will contain an article of your exhibit instead.')))),r.a.createElement(D.a,null,r.a.createElement(q.a,{className:"gutter-col",span:12},r.a.createElement("div",{className:"gutter-row",id:"exhibittext"},r.a.createElement(M,null)),r.a.createElement("div",{className:"gutter-row"},r.a.createElement(_.a,{onClick:function(){!function(){var e=new F,t=document.getElementById("editor"),a=e.parse(t.value);l(a),s(e.cleanedMD)}()},id:"build-exhibit",type:"primary"},"Build")),r.a.createElement("div",{className:"gutter-row",id:"imageupload"},r.a.createElement(V,null))),r.a.createElement(q.a,{className:"gutter-col",span:12},r.a.createElement("div",{id:"exhibitmaster"},r.a.createElement("div",{className:"card-container"},r.a.createElement(g.a,{onChange:Z,type:"card"},r.a.createElement(X,{id:"exhibit_pane",tab:"Exhibit",key:"1"},r.a.createElement(Q,{exhibitId:"preview",tree:a,b64:!0,debug:!0})),r.a.createElement(X,{tab:"Document",key:"2"},r.a.createElement(H,{md:o}))))))))},te=(a(186),a(724)),ae=function(){var e=Object(n.useState)({theme:{floor:null,walls:null,ceiling:null},rooms:[{name:"1",artifacts:[]},{name:"2",artifacts:[]}]}),t=Object(p.a)(e,2),a=t[0],l=t[1],i=Object(n.useState)(""),c=Object(p.a)(i,2),o=c[0],s=c[1],m=new F;function u(e,t){return"string"===typeof t?e+t:r.a.Children.toArray(t.props.children).reduce(u,e)}return Object(n.useEffect)((function(){fetch("markdown/home.md").then((function(e){return e.text()})).then((function(e){m.parse(e),s(m.cleanedMD),l(m.tree)})).catch((function(e){return console.error(e)}))}),[]),Object(n.useEffect)((function(){document.getElementById("md_article").querySelectorAll("pre code").forEach((function(e){Y.a.highlightBlock(e)}))}),[o]),r.a.createElement(J,null,r.a.createElement(te.a,null,r.a.createElement("div",{className:"museum"},r.a.createElement("div",{id:"md_article",className:"museumtext"},r.a.createElement(G.a,{source:o,renderers:{heading:function(e){var t=r.a.Children.toArray(e.children).reduce(u,"").toLowerCase().replace(/[!"#$%&'()*+,-./:;<=>?@[\]^_`{|}~]/g,"").replace(/\W/g,"-");return r.a.createElement("h"+e.level,{id:t},e.children)}}}))),r.a.createElement(Q,{exhibitId:"exhibit",tree:a,b64:!1,debug:!0})))},ne=(a(187),a(730)),re=ne.a.Meta,le=function(){return r.a.createElement(J,null,r.a.createElement(W,{siteTitle:"The Malloci Gallery"}),r.a.createElement("div",{className:"description"},r.a.createElement("p",null,"A curation of VR museums generated using Malloci.")),r.a.createElement("div",{className:"mastercard"},r.a.createElement(u.b,{to:"/Exhibits/museums"},r.a.createElement(ne.a,{className:"card-space",hoverable:!0,style:{width:300},cover:r.a.createElement("img",{alt:"example",src:"/img/Maria.jpg"})},r.a.createElement(re,{title:"A journey through time",description:"the history of museums"})))))},ie=function(){var e=Object(d.f)().exhibit,t=Object(n.useState)({theme:{floor:null,walls:null,ceiling:null},rooms:[{name:"1",artifacts:[]},{name:"2",artifacts:[]}]}),a=Object(p.a)(t,2),l=a[0],i=a[1],c=Object(n.useState)(""),o=Object(p.a)(c,2),s=o[0],m=o[1],u=new F;function h(e,t){return"string"===typeof t?e+t:r.a.Children.toArray(t.props.children).reduce(h,e)}return Object(n.useEffect)((function(){console.log(e),fetch("../markdown/exhibits/".concat(e,".md")).then((function(e){return e.text()})).then((function(e){u.parse(e),m(u.cleanedMD),i(u.tree)})).catch((function(e){return console.error(e)}))}),[]),Object(n.useEffect)((function(){document.getElementById("md_article").querySelectorAll("pre code").forEach((function(e){Y.a.highlightBlock(e)}))}),[s]),r.a.createElement(J,null,r.a.createElement(te.a,null,r.a.createElement("div",{className:"museum"},r.a.createElement("div",{id:"md_article",className:"museumtext"},r.a.createElement(G.a,{source:s,renderers:{heading:function(e){var t=r.a.Children.toArray(e.children).reduce(h,"").toLowerCase().replace(/[!"#$%&'()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\W/g,"-");return r.a.createElement("h"+e.level,{id:t},e.children)}}}))),r.a.createElement(Q,{exhibitId:"exhibit",tree:l,b64:!1,debug:!0})))},ce=ne.a.Meta,oe=function(){return r.a.createElement(J,null,r.a.createElement(W,{siteTitle:"About us"}),r.a.createElement("div",{className:"description"},r.a.createElement("p",null,"The team behind Malloci")),r.a.createElement("div",{className:"mastercard"},r.a.createElement(ne.a,{className:"card-space",hoverable:!0,style:{width:500},cover:r.a.createElement("img",{alt:"example",src:"https://upload.wikimedia.org/wikipedia/commons/e/e2/Northern_lights_%289997815384%29.jpg"})},r.a.createElement(ce,{title:"Masha Belyi",description:"NLP Engineer"})),r.a.createElement(ne.a,{className:"card-space",hoverable:!0,style:{width:500},cover:r.a.createElement("img",{alt:"example",src:"https://upload.wikimedia.org/wikipedia/commons/e/e2/Northern_lights_%289997815384%29.jpg"})},r.a.createElement(ce,{title:"Michael Gutensohn",description:"Product Owner + VR Software Engineer"})),r.a.createElement(ne.a,{className:"card-space",hoverable:!0,style:{width:500},cover:r.a.createElement("img",{alt:"example",src:"https://upload.wikimedia.org/wikipedia/commons/e/e2/Northern_lights_%289997815384%29.jpg"})},r.a.createElement(ce,{title:"Jennifer Momoh",description:"Quantitative UX Researcher"})),r.a.createElement(ne.a,{className:"card-space",hoverable:!0,style:{width:500},cover:r.a.createElement("img",{alt:"example",src:"https://upload.wikimedia.org/wikipedia/commons/e/e2/Northern_lights_%289997815384%29.jpg"})},r.a.createElement(ce,{title:"Sharanya Soundararajan",description:"Rabbit"})),r.a.createElement(ne.a,{className:"card-space",hoverable:!0,style:{width:500},cover:r.a.createElement("img",{alt:"example",src:"https://upload.wikimedia.org/wikipedia/commons/e/e2/Northern_lights_%289997815384%29.jpg"})},r.a.createElement(ce,{title:"Yejun Wu",description:"VR Experience Designer"}))))},se=function(e){Object(s.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{id:"navbar"},r.a.createElement("a",{href:"/"},r.a.createElement("img",{src:"./logo192.png",id:"logoformatting"})),r.a.createElement("div",{id:"mallocititle"},r.a.createElement("h2",null,r.a.createElement("a",{href:"/"},"Malloci"))),r.a.createElement(u.a,null,r.a.createElement("div",{id:"menualign"},r.a.createElement(h.a,{mode:"horizontal"},r.a.createElement(h.a.Item,{key:"gallery"},r.a.createElement(u.c,{to:"/"},"Gallery")),r.a.createElement(h.a.Item,{key:"museum"},r.a.createElement(u.c,{to:"/Malloci"},"About Malloci")),r.a.createElement(h.a.Item,{key:"mallocieditor"},r.a.createElement(u.c,{to:"/Editor"},"Editor")))),r.a.createElement(d.c,null,r.a.createElement(d.a,{exact:!0,path:"/"},r.a.createElement(le,null)),r.a.createElement(d.a,{exact:!0,path:"/Editor"},r.a.createElement(ee,null)),r.a.createElement(d.a,{exact:!0,path:"/Malloci"},r.a.createElement(ae,null)),r.a.createElement(d.a,{path:"/exhibits/:exhibit"},r.a.createElement(ie,null)),r.a.createElement(d.a,{exact:!0,path:"/TheTeam"},r.a.createElement(oe,null)))))}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(se,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[229,1,2]]]);
//# sourceMappingURL=main.ea5adcad.chunk.js.map