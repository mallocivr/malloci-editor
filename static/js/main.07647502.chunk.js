(this.webpackJsonpmallocivr=this.webpackJsonpmallocivr||[]).push([[0],{207:function(e,t,a){},208:function(e,t,a){},209:function(e,t,a){},247:function(e,t,a){e.exports=a(760)},252:function(e,t,a){},263:function(e,t,a){},424:function(e,t){},455:function(e,t,a){},760:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(5),i=a.n(r),c=(a(252),a(13)),o=a(105);a(261),a(262);o.initializeApp({apiKey:"AIzaSyCLN6m_UZpazTVvrX1vtFdyTEPx7wYaTyk",authDomain:"malloci-8f365.firebaseapp.com",databaseURL:"https://malloci-8f365.firebaseio.com",projectId:"malloci-8f365",storageBucket:"malloci-8f365.appspot.com",messagingSenderId:"126802496533",appId:"1:126802496533:web:614183fabd31d8510bd21c",measurementId:"G-BSBQC0NNQJ"});var s=o.storage(),u=o.firestore(),d=(a(263),a(39)),m=a(73),h=a(53),f={},g=a(169),p=a(770),b=a(766),E=a(763),y=[{title:"Markdown",className:"markdown",dataIndex:"markdown"},{title:"Rendered",className:"rendered",dataIndex:"rendered"}],x=[{key:"1",markdown:"# article title",rendered:"The entire museum space"},{key:"2",markdown:"## section title",rendered:"Creates a room in the museum"},{key:"3",markdown:"$[walls](img.jpg) \n$[ceiling](img.jpg) \n$[floor](img.jpg)",rendered:"To change the textures of the walls, floor, or the ceiling"}],v=function(){return l.a.createElement("div",null,l.a.createElement(E.a,{id:"panelstyle",columns:y,dataSource:x,bordered:!0,pagination:!1}),l.a.createElement("p",{id:"panelstyle"},"While uploading and using image textures for the walls, ceiling and floor, it is recommended that you crop your textures so that the dimensions are powers of 2 for performance reasons."))},w=[{title:"Markdown",className:"markdown",dataIndex:"markdown"},{title:"Rendered",className:"rendered",dataIndex:"rendered"}],k=[{key:"1",markdown:"![caption text](uploaded-file-name.jpg)",rendered:"\u200bThis image will become a painting on the wall in the VR museum"},{key:"2",markdown:"~ \n![caption text](uploaded-file-name.jpg) \n~",rendered:"This image will be visible in the VR museum, but not in the document view"},{key:"3",markdown:"![this image has audio attached](uploaded-file-name.jpg) \n^(audio-file.m4a)",rendered:"This audio file will be placed in the VR exhibit and the document, attached to the image or blockquote on the line above it"},{key:"4",markdown:"> Block quote",rendered:"\u200bThis text will become a painting on the wall"},{key:"5",markdown:"> Multi line\n> block quote",rendered:"\u200bThis text will become a painting on the wall"},{key:"6",markdown:'```var s = "JavaScript syntax highlighting" \n alert(s);```',rendered:l.a.createElement("code",null,'var s = "JavaScript syntax highlighting" ',l.a.createElement("br",null)," alert(s)")}],O=function(){return l.a.createElement("div",null,l.a.createElement(E.a,{id:"panelstyle",columns:w,dataSource:k,bordered:!0,pagination:!1}))},j=b.a.Panel,I=function(){return l.a.createElement("div",{className:"markdown-container"},l.a.createElement(b.a,{defaultActiveKey:[""]},l.a.createElement(j,{header:"Extended Markdown syntax guide",id:"headerstyle",key:"1"},l.a.createElement("p",null,"Creating and formatting rooms in the museum:"),l.a.createElement(v,null),l.a.createElement("p",null,"Populating the room with artifacts:"),l.a.createElement(O,null))))},A=a(223),S=a.n(A),N=(a(426),p.a.TextArea),T=g.a.TabPane;function C(e){console.log(e)}var M={display:"none"};var D=function(e){var t=Object(n.useState)(e.value),a=Object(c.a)(t,2),r=a[0],i=a[1];return Object(n.useEffect)((function(){i(e.value)}),[e.value]),l.a.createElement("div",{className:"card-container"},l.a.createElement(g.a,{onChange:C,type:"card"},l.a.createElement(T,{tab:"Markdown",key:"1"},l.a.createElement("div",{id:"editorheight"},l.a.createElement(I,null),l.a.createElement(S.a,{id:"editor3",label:"Markdown Editor",value:r,onChange:function(e){i(e)},options:{insertTexts:{horizontalRule:["","\n\n-----\n\n"],image:["\n\n![a caption describing your image](image-name",".jpg)\n\n"],link:["[","](http://)"],table:["","\n\n| Column 1 | Column 2 | Column 3 |\n| -------- | -------- | -------- |\n| Text     | Text      | Text     |\n\n"]}}}),l.a.createElement(N,{id:"editor",value:r,style:M})))))},B=a(773),_=a(769),R=a(764),P=a(27),V=a(774),q=["m4a","mp3","wav"],U={name:"file",multiple:!0,customRequest:function(e){var t=e.file,a=e.onError,n=e.onSuccess,l=Object(B.a)();(q.includes(t.name.split(".").pop())?s.ref("/audio/".concat(l+t.name)).put(t):s.ref("/images/".concat(l+t.name)).put(t)).on("state_changed",(function(e){console.log(e)}),(function(e){console.log(e),a(e,t)}),(function(e){q.includes(t.name.split(".").pop())?s.ref("audio").child(l+t.name).getDownloadURL().then((function(e){f[t.name]=e})):s.ref("images").child(l+t.name).getDownloadURL().then((function(e){f[t.name]=e})),n(e,t)}))},onChange:function(e){"uploading"!==e.file.status&&console.log(e.file,e.fileList),"done"===e.file.status?_.a.success("".concat(e.file.name," file uploaded successfully")):"error"===e.file.status&&_.a.error("".concat(e.file.name," file upload failed."))}},L=function(){return l.a.createElement(R.a,U,l.a.createElement(P.a,null,l.a.createElement(V.a,null)," Upload"))},W=a(58),$=a(765),J=a(99),z=a(45),H=a(768),F=function(e){var t=e.siteTitle;return l.a.createElement(H.a,{className:"site-page-header",title:t})};F.defaultProps={siteTitle:"Malloci"};var Y=F,G=a(775),K=(a(455),function(e){var t=e.children;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{style:{margin:"0 auto",padding:"0 1.0875rem 1.45rem"}},l.a.createElement("main",null,t),l.a.createElement("footer",null,"\xa9 ",(new Date).getFullYear(),", Built with mochi muffins.")))}),Q=a(234),X=a(235),Z=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Object(Q.a)(this,e),this.VSCode=t,this.debug=a,this.tree=null,this.cleanedMD=null}return Object(X.a)(e,[{key:"parseList",value:function(e){for(var t={rooms:[],theme:{floor:null,walls:null,ceiling:null}},a={},n=[],l="",r="",i="",c="",o=!1,s=!1,u=e.split(","),d=0;d<u.length;d++){var m=u[d],h=m.split(" ");if("#"!==h[0].charAt(0)||o||(l=h.shift(),null!==a.name?(a.text=r,a.artifacts=n,r="",n=[],t.rooms.push(a),a={}):""!==r&&(t.text=r,t.artifact=n,r="",n=[]),"#"===l&&(t.name=h.join(" ")),a.name=h.join(" ")),">"!==h[0].charAt(0)||o?""!==i&&(n.push(this.parseArtifact(i,"block quote")),i=""):i+=h.join(" ").replace(">","").replace(/(^[\s]+|[\s]+$)/,"\n"),h[0].includes("```")&&!o?(c+=m+"\n",o=!0):o?(m.includes("```")&&(o=!1),c+=m+"\n"):""===c&&"`"===h[0].charAt(0)?(c+=m+"\n",n.push(this.parseArtifact(c,"code")),c=""):o||""===c||(n.push(this.parseArtifact(c,"code block")),c=""),"!"!==h[0].charAt(0)||o||n.push(this.parseArtifact(m,"image")),"$"===h[0].charAt(0)&&!o){var f=m.substring(m.lastIndexOf("[")+1,m.lastIndexOf("]")),g=m.substring(m.lastIndexOf("(")+1,m.lastIndexOf(")"));switch(f){default:break;case"floor":t.theme.floor=g;break;case"walls":t.theme.walls=g;break;case"ceiling":t.theme.ceiling=g}u.splice(d,1),--d}"&"!==h[0].charAt(0)||o||(n.push(this.parseArtifact(m,"3D")),u.splice(d,1),--d),"^"!==h[0].charAt(0)||o||(this.addAudio(n,m),u.splice(d,1),--d),"~"!==h[0]||o||(s=!s),(s||"~"===h[0]&&!o)&&(u.splice(d,1),--d),this.debug&&console.log(n),r+=m+"\n"}return null!==a.name&&(a.text=r,a.artifacts=n,r="",n=[],t.rooms.push(a),a={}),this.tree=t,this.cleanedMD=u.join("\n"),this.tree}},{key:"parse",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;console.log("parsing");for(var a={rooms:[],theme:{floor:null,walls:null,ceiling:null}},n={},l=[],r="",i="",c="",o="",s=!1,u=!1,d=e.split("\n"),m=0;m<d.length;m++){var h=d[m],f=h.split(" ");if("#"!==f[0].charAt(0)||s||(r=f.shift(),null!==n.name?(n.text=i,n.artifacts=l,i="",l=[],a.rooms.push(n),n={}):""!==i&&(a.text=i,a.artifact=l,i="",l=[]),"#"===r&&(a.name=f.join(" ")),n.name=f.join(" ")),">"!==f[0].charAt(0)||s?""!==c&&(l.push(this.parseArtifact(c,"block quote")),c=""):c+=f.join(" ").replace(">","").replace(/(^[\s]+|[\s]+$)/,"\n"),f[0].includes("```")&&!s?(o+=h+"\n",s=!0):s?(h.includes("```")&&(s=!1),o+=h+"\n"):""===o&&"`"===f[0].charAt(0)?(o+=h+"\n",l.push(this.parseArtifact(o,"code")),o=""):s||""===o||(l.push(this.parseArtifact(o,"code block")),o=""),"!"!==f[0].charAt(0)||s||(l.push(this.parseArtifact(h,"image",t)),t&&t[h.substring(h.lastIndexOf("(")+1,h.lastIndexOf(")"))]&&(d[m]=h.replace(h.substring(h.lastIndexOf("(")+1,h.lastIndexOf(")")),t[h.substring(h.lastIndexOf("(")+1,h.lastIndexOf(")"))]))),"$"===f[0].charAt(0)&&!s){var g=h.substring(h.lastIndexOf("[")+1,h.lastIndexOf("]")),p=h.substring(h.lastIndexOf("(")+1,h.lastIndexOf(")"));switch(p=t&&t[h.substring(h.lastIndexOf("(")+1,h.lastIndexOf(")"))]?t[h.substring(h.lastIndexOf("(")+1,h.lastIndexOf(")"))]:h.substring(h.lastIndexOf("(")+1,h.lastIndexOf(")")),this.VSCode&&!/^(?:\/|[a-z]+:\/\/)/.test(p)&&(p=this.VSCode+p),g){default:break;case"floor":a.theme.floor=p;break;case"walls":a.theme.walls=p;break;case"ceiling":a.theme.ceiling=p}d.splice(m,1),--m}"&"!==f[0].charAt(0)||s||(l.push(this.parseArtifact(h,"3D")),d.splice(m,1),--m),"^"!==f[0].charAt(0)||s||(this.addAudio(l,h,t),d.splice(m,1),--m),"~"!==f[0]||s||(u=!u),(u||"~"===f[0]&&!s)&&(d.splice(m,1),--m),i+=h+"\n"}return null!==n.name&&(""!==c&&(l.push(this.parseArtifact(c,"block quote")),c=""),""!==o&&(l.push(this.parseArtifact(o,"code block")),o=""),n.text=i,n.artifacts=l,i="",l=[],a.rooms.push(n),n={}),this.tree=a,this.cleanedMD=d.join("\n"),this.tree}},{key:"parseArtifact",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n={};switch(n.type=t,n.audioSrc=null,t){default:break;case"image":a&&a[e.substring(e.lastIndexOf("(")+1,e.lastIndexOf(")"))]?n.src=a[e.substring(e.lastIndexOf("(")+1,e.lastIndexOf(")"))]:n.src=e.substring(e.lastIndexOf("(")+1,e.lastIndexOf(")")),n.alt=e.substring(e.lastIndexOf("[")+1,e.lastIndexOf("]"));break;case"block quote":n.text=e;break;case"code":n.code=e.replace(/`/g,"").replace("\n","");break;case"code block":var l=e.replace(/`/g,"");n.lang=l.split("\n")[0],n.code=l.replace(n.lang+"\n","");break;case"3D":n.src=e.substring(e.lastIndexOf("(")+1,e.lastIndexOf(")")),n.name=e.substring(e.lastIndexOf("[")+1,e.lastIndexOf("]"))}return this.VSCode&&n.src&&!/^(?:\/|[a-z]+:\/\/)/.test(n.src)&&(n.src=this.VSCode+n.src),n}},{key:"addAudio",value:function(e,t){f&&f[t.substring(t.lastIndexOf("(")+1,t.lastIndexOf(")"))]?e[e.length-1].audioSrc=f[t.substring(t.lastIndexOf("(")+1,t.lastIndexOf(")"))]:e[e.length-1].audioSrc=t.substring(t.lastIndexOf("(")+1,t.lastIndexOf(")")),this.VSCode&&!/^(?:\/|[a-z]+:\/\/)/.test(e[e.length-1].audioSrc)&&(e[e.length-1].audioSrc=this.VSCode+e[e.length-1].audioSrc)}}]),e}(),ee=a(80),te=a.n(ee),ae=a(95),ne=a.n(ae),le=function(e){function t(e,a){return"string"===typeof a?e+a:l.a.Children.toArray(a.props.children).reduce(t,e)}return Object(n.useEffect)((function(){document.getElementById("doc-preview").querySelectorAll("pre code").forEach((function(e){ne.a.highlightBlock(e)}))}),[e.md]),l.a.createElement("div",{id:"doc-preview"},l.a.createElement(te.a,{source:e.md,renderers:{heading:function(e){var a=l.a.Children.toArray(e.children).reduce(t,"").toLowerCase().replace(/[!"#$%&'()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\W/g,"-");return l.a.createElement("h"+e.level,{id:a},e.children)}}}))},re=a(98),ie=function(e){var t=JSON.stringify(e.tree);console.log(t);var a=null;return e.editor&&(a=l.a.createElement("a-cursor",null)),l.a.createElement(re.Scene,{id:e.exhibitId,"vr-mode-ui":"enabled: false",embedded:!0,background:"color: #87ceeb"},l.a.createElement("a-assets",null,l.a.createElement("a-mixin",{id:"checkpoint"}),l.a.createElement("a-mixin",{id:"checkpoint-hovered",color:"#6CEEB5"}),l.a.createElement("img",{id:"wallTexture",src:"/textures/wall.jpg"}),l.a.createElement("img",{id:"floorTexture",src:"/textures/concrete_floor.jpg"}),l.a.createElement("img",{id:"ceilingTexture",src:"/textures/concrete_floor.jpg"}),l.a.createElement("img",{id:"frameTexture",src:"/textures/frame.jpg"})),l.a.createElement("a-light",{type:"ambient",position:"0 6 0",rotation:"0 0 45"}),l.a.createElement(re.Entity,{id:"rig","movement-controls":{enabled:!0},position:"2 0 1",rotation:"0 180 0"},l.a.createElement("a-camera",{id:"camera","look-controls":"pointerLockEnabled: true"},l.a.createElement("a-sound",{id:"ambient-track",src:"src: url(/audio/light-piano-noodling-in-b.mp3)",autoplay:"false",volume:"0.4",loop:"true",position:"0 4 0"}),a),l.a.createElement(re.Entity,{"laser-controls":{hand:"left"},raycaster:{objects:".clickable",far:3},"teleport-controls":{collisionEntities:".scenery",drawForAllCollisions:!1,landingMaxAngle:45,button:"trigger",cameraRig:"#rig",teleportOrigin:"#camera"}}),l.a.createElement(re.Entity,{"laser-controls":{hand:"right"},raycaster:{objects:".clickable",far:3},"teleport-controls":{collisionEntities:".scenery",drawForAllCollisions:!1,landingMaxAngle:45,button:"trigger",cameraRig:"#rig",teleportOrigin:"#camera"}})),l.a.createElement(re.Entity,{id:"museum",malloci:{tree:t,hallWidth:8,wallHeight:5,API:"https://malloci.uc.r.appspot.com/generate",base64Mode:e.b64,debug:e.debug}}))},ce=(a(207),g.a.TabPane);function oe(e){console.log(e)}var se=function(){var e=Object(m.g)().id,t=Object(n.useState)({theme:{floor:null,walls:null,ceiling:null},rooms:[{name:"1",artifacts:[]},{name:"2",artifacts:[]}]}),a=Object(c.a)(t,2),r=a[0],i=a[1],s=Object(n.useState)(""),d=Object(c.a)(s,2),h=d[0],p=d[1],b=Object(n.useState)("# Hello world! \n\n> Welcome to the world! \n\n## Hello continent \n\nThis is a starter exhibit. Hit build to view it in VR. The name of the museum is Hello world!. There is one room, Hello Continent. There's some wall art about baby elephants and a picture of a baby elephant in a bucket. \n\n> Baby elephants are endangered \n\n![baby elephants are endangered!](https://i.imgur.com/SnolApK.jpg)"),E=Object(c.a)(b,2),y=E[0],x=E[1],v=Object(n.useState)(""),w=Object(c.a)(v,2),k=w[0],O=w[1],j=Object(n.useState)(!1),I=Object(c.a)(j,2),A=I[0],S=I[1],N=Object(n.useState)(""),T=Object(c.a)(N,2),C=T[0],M=T[1],B=function(){var e=new Z,t=document.getElementById("editor"),a=e.parse(t.value,f);i(a),p(e.cleanedMD)};Object(n.useEffect)((function(){if(e){var t=u.collection("exhibits").doc(e);t.get().then((function(e){e.exists?(o.auth().currentUser&&o.auth().currentUser.uid===e.data().authorID||M("/Exhibits/".concat(t.id)),console.log("success!!!!"),function(e){for(var t in e)f[t]=e[t];console.log(f)}(JSON.parse(e.data().fileDict)),O(!0),x(e.data().rawMD)):(console.log("No such document!"),M("/Exhibits/".concat(t.id)))})).catch((function(e){console.log("Error getting document:",e),M("/Exhibits/".concat(t.id))}))}B()}),[]);return l.a.createElement(K,null,l.a.createElement(Y,{siteTitle:"Create a New Exhibit"}),l.a.createElement("div",{id:"alertstyle"}),l.a.createElement(J.a,null,l.a.createElement(z.a,{classname:"gutter-col"},l.a.createElement("div",{className:"description"},l.a.createElement("p",null,"A web editor to view museums written in markdown.",l.a.createElement("br",null),'Create your exhibit in the panel on the left; there\'s a guide detailing the markdown syntax you should use. View your exhibit space in the "Exhibit" tab of panel on the right. The "Document" tab will contain an article of your exhibit instead.',l.a.createElement("br",null),"The editor area in the \"Markdown\" panel contains basic buttons to help you with the markdown syntax. You can click on the H icon to add a header, the link icon to link images, the blockquote icon to add a quote, and so on. In the event that you're using images from the internet in your exhibit via links, make sure that you're using images which are marked for reuse (they'll be blocked by your browser and won't show up, otherwise).")))),l.a.createElement(J.a,null,l.a.createElement(z.a,{className:"gutter-col",span:12},l.a.createElement("div",{className:"gutter-row",id:"exhibittext"},l.a.createElement(D,{value:y})),l.a.createElement("div",{className:"gutter-row"},l.a.createElement(P.a,{onClick:function(){B()},id:"build-exhibit",type:"primary"},"Build")),l.a.createElement("div",{className:"gutter-row",id:"imageupload"},l.a.createElement(L,null))),l.a.createElement(z.a,{className:"gutter-col",span:12},l.a.createElement("div",{className:"gutter-row",id:"exhibitmaster"},l.a.createElement("div",{className:"card-container"},l.a.createElement(g.a,{onChange:oe,type:"card"},l.a.createElement(ce,{id:"exhibit_pane",tab:"Exhibit",key:"1"},l.a.createElement(ie,{exhibitId:"preview",tree:r,editor:!0,debug:!0})),l.a.createElement(ce,{tab:"Document",key:"2"},l.a.createElement(le,{md:h}))))),l.a.createElement("div",{className:"gutter-row"},function(){if(k)return l.a.createElement("div",null,l.a.createElement(W.a,{title:"Delete This Exhibit"},l.a.createElement(P.a,{type:"danger",shape:"circle",onClick:function(){return S(!0)},icon:l.a.createElement(G.a,null)})),l.a.createElement($.a,{title:"Basic Modal",visible:A,onOk:function(){u.collection("exhibits").doc(e).delete().then((function(){console.log("Document successfully deleted!"),M("/")})).catch((function(e){console.error("Error removing document: ",e)}))},onCancel:function(){return S(!1)},okText:"Yes, delete this Exhibit.",okButtonProps:{type:"danger"},cancelText:"Cancel"},l.a.createElement("p",null,"This will permanently delete your exhibit, Would you like to continue?")))}(),l.a.createElement(P.a,{onClick:function(){!function(){if(console.log(Object.keys(f)),e){var t=u.collection("exhibits").doc(e);t.update({preview:0!==Object.keys(f).length?f[Object.keys(f)[0]]:"img/Maria.jpg",title:r.name,rawMD:document.getElementById("editor").value,fileDict:JSON.stringify(f),md:h,tree:r}).then((function(){console.log("Document successfully updated!"),M("/Exhibits/".concat(t.id))})).catch((function(e){console.error("Error adding document: ",e)}))}else u.collection("exhibits").add({author:o.auth().currentUser.displayName,authorID:o.auth().currentUser.uid,preview:0!==Object.keys(f).length?f[Object.keys(f)[0]]:"img/Maria.jpg",title:r.name,rawMD:document.getElementById("editor").value,fileDict:JSON.stringify(f),md:h,tree:r}).then((function(e){console.log("Document written with ID: ",e.id),M("/Exhibits/".concat(e.id))})).catch((function(e){console.error("Error adding document: ",e)}))}()},id:"create-exhibit",type:"primary"},"Publish")))),function(){if(""!==C)return l.a.createElement(m.a,{to:C,push:!0})}())},ue={name:"file",multiple:!0,customRequest:function(e){var t=new FileReader;t.readAsBinaryString(e.file),t.onload=function(t){var a=t.target.result,n="".concat(e.file.name);sessionStorage.setItem(n,a)}},onChange:function(e){"uploading"!==e.file.status&&console.log(e.file,e.fileList),"done"===e.file.status?_.a.success("".concat(e.file.name," file uploaded successfully")):"error"===e.file.status&&_.a.error("".concat(e.file.name," file upload failed."))}},de=function(){return l.a.createElement(R.a,ue,l.a.createElement(P.a,null,l.a.createElement(V.a,null)," Upload"))},me=a(771),he=g.a.TabPane;function fe(e){console.log(e)}var ge=function(){var e=Object(n.useState)({theme:{floor:null,walls:null,ceiling:null},rooms:[{name:"1",artifacts:[]},{name:"2",artifacts:[]}]}),t=Object(c.a)(e,2),a=t[0],r=t[1],i=Object(n.useState)(""),s=Object(c.a)(i,2),u=s[0],d=s[1],h=function(){var e=new Z,t=document.getElementById("editor");console.log("editor value",t);var a=e.parse(t.value);r(a),d(e.cleanedMD)};return Object(n.useEffect)((function(){h()}),[]),l.a.createElement(K,null,l.a.createElement(Y,{siteTitle:"Playground"}),l.a.createElement("div",{id:"alertstyle"},l.a.createElement(me.a,{message:"Demo only!",description:"This is a demo editor: museums you create using this tool will not be saved! Please copy your text from the Markdown panel before you close your session.",type:"info",showIcon:!0,closable:!0})),l.a.createElement(J.a,null,l.a.createElement(z.a,{classname:"gutter-col"},l.a.createElement("div",{className:"description"},l.a.createElement("p",null,"A web editor to view museums written in markdown.",l.a.createElement("br",null),'Create your exhibit in the panel on the left; there\'s a guide detailing the markdown syntax you should use. View your exhibit space in the "Exhibit" tab of panel on the right. The "Document" tab will contain an article of your exhibit instead.',l.a.createElement("br",null),"The editor area in the \"Markdown\" panel contains basic buttons to help you with the markdown syntax. You can click on the H icon to add a header, the link icon to link images, the blockquote icon to add a quote, and so on. In the event that you're using images from the internet in your exhibit via links, make sure that you're using images which are marked for reuse (they'll be blocked by your browser and won't show up, otherwise).")))),l.a.createElement(J.a,null,l.a.createElement(z.a,{className:"gutter-col",span:12},l.a.createElement("div",{className:"gutter-row",id:"exhibittext"},l.a.createElement(D,null)),l.a.createElement("div",{className:"gutter-row"},l.a.createElement(P.a,{onClick:function(){h()},id:"build-exhibit",type:"primary"},"Build")),l.a.createElement("div",{className:"gutter-row",id:"imageupload"},l.a.createElement(de,null))),l.a.createElement(z.a,{className:"gutter-col",span:12},l.a.createElement("div",{id:"exhibitmaster"},l.a.createElement("div",{className:"card-container"},l.a.createElement(g.a,{onChange:fe,type:"card"},l.a.createElement(he,{id:"exhibit_pane",tab:"Exhibit",key:"1"},l.a.createElement(ie,{exhibitId:"preview",tree:a,b64:!0,editor:!0,debug:!0})),l.a.createElement(he,{tab:"Document",key:"2"},l.a.createElement(le,{md:u}))))))),function(){if(o.auth().currentUser&&o.auth().currentUser.email.match(".*berkeley[.]edu"))return l.a.createElement(m.a,{to:"/Editor",push:!0})}())},pe=(a(208),a(767)),be=function(){var e=Object(n.useState)({theme:{floor:null,walls:null,ceiling:null},rooms:[{name:"1",artifacts:[]},{name:"2",artifacts:[]}]}),t=Object(c.a)(e,2),a=t[0],r=t[1],i=Object(n.useState)(""),o=Object(c.a)(i,2),s=o[0],u=o[1],d=new Z;function m(e,t){return"string"===typeof t?e+t:l.a.Children.toArray(t.props.children).reduce(m,e)}return Object(n.useEffect)((function(){fetch("https://raw.githubusercontent.com/mallocivr/mallocivr.github.io/master/markDown/home.md").then((function(e){return e.text()})).then((function(e){d.parse(e),u(d.cleanedMD),r(d.tree)})).catch((function(e){return console.error(e)}))}),[]),Object(n.useEffect)((function(){document.getElementById("md_article").querySelectorAll("pre code").forEach((function(e){ne.a.highlightBlock(e)}))}),[s]),l.a.createElement(K,null,l.a.createElement(pe.a,null,l.a.createElement("div",{className:"museum"},l.a.createElement("div",{id:"md_article",className:"museumtext"},l.a.createElement(te.a,{source:s,renderers:{heading:function(e){var t=l.a.Children.toArray(e.children).reduce(m,"").toLowerCase().replace(/[!"#$%&'()*+,-./:;<=>?@[\]^_`{|}~]/g,"").replace(/\W/g,"-");return l.a.createElement("h"+e.level,{id:t},e.children)}}}))),l.a.createElement(ie,{exhibitId:"exhibit",tree:a,b64:!1,debug:!0})))},Ee=(a(209),a(772)),ye=Ee.a.Meta,xe=function(){var e=Object(n.useState)([]),t=Object(c.a)(e,2),a=t[0],r=t[1];return Object(n.useEffect)((function(){u.collection("exhibits").get().then((function(e){var t=e.docs.map((function(e){return console.log(e.id," => ",e.data()),l.a.createElement(d.b,{to:"/Exhibits/".concat(e.id)},l.a.createElement(Ee.a,{className:"card-space",hoverable:!0,style:{width:300},cover:l.a.createElement("img",{alt:"example",src:e.data().preview})},l.a.createElement(ye,{title:e.data().title})))}));r(t)}))}),[]),l.a.createElement(K,null,l.a.createElement(Y,{siteTitle:"The Malloci Gallery"}),l.a.createElement("div",{className:"description"},l.a.createElement("p",null,"A curation of VR museums generated using Malloci.")),l.a.createElement("div",{className:"mastercard"},a))},ve=a(776),we=function(){var e=Object(m.g)().exhibit,t=Object(n.useState)({theme:{floor:null,walls:null,ceiling:null},rooms:[{name:"1",artifacts:[]},{name:"2",artifacts:[]}]}),a=Object(c.a)(t,2),r=a[0],i=a[1],s=Object(n.useState)(""),h=Object(c.a)(s,2),f=h[0],g=h[1],p=Object(n.useState)(!1),b=Object(c.a)(p,2),E=b[0],y=b[1];function x(e,t){return"string"===typeof t?e+t:l.a.Children.toArray(t.props.children).reduce(x,e)}return Object(n.useEffect)((function(){u.collection("exhibits").doc(e).get().then((function(e){e.exists?(o.auth().currentUser&&o.auth().currentUser.uid===e.data().authorID&&y(!0),g(e.data().md),i(e.data().tree)):console.log("No such document!")})).catch((function(e){console.log("Error getting document:",e)}))}),[]),Object(n.useEffect)((function(){document.getElementById("md_article").querySelectorAll("pre code").forEach((function(e){ne.a.highlightBlock(e)}))}),[f]),l.a.createElement(K,null,l.a.createElement(pe.a,null,l.a.createElement("div",{className:"museum"},function(){if(E)return l.a.createElement(d.b,{to:"/Editor/".concat(e)},l.a.createElement(W.a,{title:"Edit This Exhibit"},l.a.createElement(P.a,{type:"default",shape:"circle",icon:l.a.createElement(ve.a,null)})))}(),l.a.createElement("div",{id:"md_article",className:"museumtext"},l.a.createElement(te.a,{source:f,renderers:{heading:function(e){var t=l.a.Children.toArray(e.children).reduce(x,"").toLowerCase().replace(/[!"#$%&'()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\W/g,"-");return l.a.createElement("h"+e.level,{id:t},e.children)},image:function(e){return l.a.createElement("p",null,l.a.createElement("img",e))}}})))),l.a.createElement(ie,{exhibitId:"exhibit",tree:r,b64:!1,debug:!0}))},ke=Ee.a.Meta,Oe=function(){return l.a.createElement(K,null,l.a.createElement(Y,{siteTitle:"About us"}),l.a.createElement("div",{className:"description"},l.a.createElement("p",null,"The team behind Malloci")),l.a.createElement("div",{className:"mastercard"},l.a.createElement(Ee.a,{className:"card-space",hoverable:!0,style:{width:500},cover:l.a.createElement("img",{alt:"example",src:"https://upload.wikimedia.org/wikipedia/commons/e/e2/Northern_lights_%289997815384%29.jpg"})},l.a.createElement(ke,{title:"Masha Belyi",description:"NLP Engineer"})),l.a.createElement(Ee.a,{className:"card-space",hoverable:!0,style:{width:500},cover:l.a.createElement("img",{alt:"example",src:"https://upload.wikimedia.org/wikipedia/commons/e/e2/Northern_lights_%289997815384%29.jpg"})},l.a.createElement(ke,{title:"Michael Gutensohn",description:"Product Owner + VR Software Engineer"})),l.a.createElement(Ee.a,{className:"card-space",hoverable:!0,style:{width:500},cover:l.a.createElement("img",{alt:"example",src:"https://upload.wikimedia.org/wikipedia/commons/e/e2/Northern_lights_%289997815384%29.jpg"})},l.a.createElement(ke,{title:"Jennifer Momoh",description:"Quantitative UX Researcher"})),l.a.createElement(Ee.a,{className:"card-space",hoverable:!0,style:{width:500},cover:l.a.createElement("img",{alt:"example",src:"https://upload.wikimedia.org/wikipedia/commons/e/e2/Northern_lights_%289997815384%29.jpg"})},l.a.createElement(ke,{title:"Sharanya Soundararajan",description:"Rabbit"})),l.a.createElement(Ee.a,{className:"card-space",hoverable:!0,style:{width:500},cover:l.a.createElement("img",{alt:"example",src:"https://upload.wikimedia.org/wikipedia/commons/e/e2/Northern_lights_%289997815384%29.jpg"})},l.a.createElement(ke,{title:"Yejun Wu",description:"VR Experience Designer"}))))},je=function(){var e=Object(n.useState)(!1),t=Object(c.a)(e,2),a=t[0],r=t[1],i=Object(n.useState)(!1),s=Object(c.a)(i,2),u=s[0],f=s[1];Object(n.useEffect)((function(){o.auth().onAuthStateChanged((function(e){r(!!e)}))}),[]);return l.a.createElement("div",{id:"navbar"},l.a.createElement("a",{href:"/"},l.a.createElement("img",{src:"./logo192.png",id:"logoformatting"})),l.a.createElement("div",{id:"mallocititle"},l.a.createElement("h2",null,l.a.createElement("a",{href:"/"},"Malloci"))),l.a.createElement(d.a,null,l.a.createElement("div",{id:"menualign"},l.a.createElement(h.a,{mode:"horizontal"},l.a.createElement(h.a.Item,{key:"gallery"},l.a.createElement(d.c,{to:"/"},"Gallery")),l.a.createElement(h.a.Item,{key:"museum"},l.a.createElement(d.c,{to:"/Malloci"},"About Malloci")),l.a.createElement(h.a.Item,{key:"mallocieditor"},a&&o.auth().currentUser.email.match(".*berkeley[.]edu")?l.a.createElement(d.c,{to:"/Editor"},"Editor"):l.a.createElement(d.c,{to:"/Playground"},"Playground")))),l.a.createElement("div",{id:"signInOut"},l.a.createElement(h.a,null,l.a.createElement(h.a.Item,{key:"signin"},a?l.a.createElement("a",{onClick:function(){o.auth().signOut(),f(!0)}},"Sign Out"):l.a.createElement("a",{onClick:function(){!function(){var e=new o.auth.GoogleAuthProvider;o.auth().signInWithPopup(e),f(!1)}()}},"Sign In")))),l.a.createElement(m.d,null,l.a.createElement(m.b,{exact:!0,path:"/"},l.a.createElement(xe,null)),l.a.createElement(m.b,{exact:!0,path:"/Playground"},l.a.createElement(ge,null)),l.a.createElement(m.b,{exact:!0,path:"/Editor"},l.a.createElement(se,null)),l.a.createElement(m.b,{exact:!0,path:"/Malloci"},l.a.createElement(be,null)),l.a.createElement(m.b,{path:"/exhibits/:exhibit"},l.a.createElement(we,null)),l.a.createElement(m.b,{path:"/Editor/:id"},l.a.createElement(se,null)),l.a.createElement(m.b,{exact:!0,path:"/TheTeam"},l.a.createElement(Oe,null))),function(){if(u)return l.a.createElement(m.a,{to:"/",push:!0})}()))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(je,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[247,1,2]]]);
//# sourceMappingURL=main.07647502.chunk.js.map