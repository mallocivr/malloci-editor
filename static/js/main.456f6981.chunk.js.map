{"version":3,"sources":["firebase/firebase.js","firebase/FileDictionary.js","components/markdownguidetablerooms.js","components/markdownguidetableartifact.js","components/markdownguide.js","components/exhibittext.js","components/imagefiles.js","components/header.js","components/layout.js","malloci/vrmd-parser.js","components/exhibitdocument.js","components/exhibit.js","pages/mallocieditor.js","components/pgimagefiles.js","pages/playground.js","pages/museum.js","pages/gallery.js","pages/example.js","pages/about.js","malloci/wiki-parser.js","pages/wikiviewer.js","App.js","serviceWorker.js","index.js"],"names":["firebase","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","storage","database","FileDict","columns","title","className","dataIndex","data1","key","markdown","rendered","markdownguidetablerooms","id","dataSource","bordered","pagination","markdownguidetableartifact","Panel","Collapse","markdownguide","defaultActiveKey","header","TextArea","Input","TabPane","Tabs","callback","console","log","styles","display","ExhibitText","props","useState","value","setValue","useEffect","onChange","type","tab","label","event","options","insertTexts","horizontalRule","image","link","table","style","audioFileTypes","name","multiple","customRequest","file","onError","onSuccess","uuid","uuidv4","includes","split","pop","ref","put","on","snapShot","err","resp","child","getDownloadURL","then","fireBaseUrl","info","status","fileList","message","success","error","ImageFiles","UploadOutlined","Header","siteTitle","defaultProps","Layout","children","margin","padding","Date","getFullYear","VRMD","VSCode","debug","this","tree","cleanedMD","mdListString","exJSON","floor","walls","ceiling","frames","subJSON","artifacts","level","text","block_quote","code_block","in_code","hidden_block","mdLines","i","length","line","words","charAt","shift","rooms","push","artifact","join","parseArtifact","replace","field","substring","lastIndexOf","textureSrc","theme","splice","addAudio","markDown","fileDict","test","addFrame","audioSrc","frameSrc","src","alt","code","cleaned","lang","Exhibitdocument","flatten","React","Children","toArray","reduce","document","getElementById","querySelectorAll","forEach","block","hljs","highlightBlock","md","source","renderers","heading","slug","toLowerCase","createElement","exhibit","treeString","JSON","stringify","cursor","editor","exhibitId","vr-mode-ui","embedded","background","color","position","rotation","movement-controls","enabled","look-controls","autoplay","volume","loop","laser-controls","hand","raycaster","objects","far","teleport-controls","collisionEntities","drawForAllCollisions","landingMaxAngle","button","cameraRig","teleportOrigin","malloci","hallWidth","wallHeight","base64Mode","b64","Mallocieditor","useParams","museumTree","setMuseumTree","setMd","rawMD","setRawMD","owner","setOwner","modalVisible","setModalVisible","redirect","setRedirect","updateExhibit","a","vrmdParser","parse","fetch","method","mode","cache","credentials","headers","referrerPolicy","body","response","ok","json","docRef","collection","doc","get","exists","auth","currentUser","uid","data","authorID","o2","FileDictConcat","catch","classname","span","onClick","shape","icon","DeleteOutlined","visible","onOk","delete","onCancel","okText","okButtonProps","cancelText","DeleteButton","Object","keys","update","preview","add","author","displayName","uploadExhibit","to","RedirectRenderer","reader","FileReader","readAsBinaryString","onload","e","bits","target","result","sessionStorage","setItem","Playground","description","showIcon","closable","email","match","goToEditor","Museum","res","post","Meta","Card","Gallery","tiles","setTiles","querySnapshot","exhibits","docs","map","hoverable","width","cover","Example","isOwner","setIsOwner","EditOutlined","checkOwnerShip","About","WikiParser","api","fetchUrl","query","limit","onready","params","action","list","search","format","url","page","self","html","htmlToMd","waitForImages","pageName","encodeURIComponent","parseImages","waitForImage","imgPlaceholder","DOMParser","parseFromString","getElementsByClassName","childNodes","node","nodeName","cleanText","textContent","links","getElementsByTagName","linkId","el","getAttribute","Math","random","imgIdx","page_summary","caption","extract","originalimage","startsWith","pref","repeat","parseInt","images","captions","j","w","isOrdered","items","listMD","l","bullet","setTimeout","removeIdx","sort","b","WikiViewer","wikiParser","setOptions","onSelect","parseFull","onSearch","searchText","val","placeholder","App","loggedIn","setLoggedIn","redirectOnLogOut","setRedirectOnLogout","onAuthStateChanged","user","href","Item","signOut","provider","GoogleAuthProvider","signInWithPopup","login","exact","path","Boolean","window","location","hostname","ReactDOM","render","StrictMode","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.456f6981.chunk.js","sourcesContent":["import * as firebase from 'firebase'\nimport 'firebase/storage'\nimport 'firebase/firestore'\n\nvar firebaseConfig = {\n    apiKey: \"AIzaSyCLN6m_UZpazTVvrX1vtFdyTEPx7wYaTyk\",\n    authDomain: \"malloci-8f365.firebaseapp.com\",\n    databaseURL: \"https://malloci-8f365.firebaseio.com\",\n    projectId: \"malloci-8f365\",\n    storageBucket: \"malloci-8f365.appspot.com\",\n    messagingSenderId: \"126802496533\",\n    appId: \"1:126802496533:web:614183fabd31d8510bd21c\",\n    measurementId: \"G-BSBQC0NNQJ\"\n};\n// Initialize Firebase\nfirebase.initializeApp(firebaseConfig);\n\nconst storage = firebase.storage()\nconst database = firebase.firestore()\n\nexport  {\n    storage, database, firebase as default\n}\n ","let FileDict = {}\n\nexport default FileDict","import React from \"react\"\n\nimport { Table } from 'antd';\n\nconst columns = [\n    {\n      title: 'Markdown',\n      className: 'markdown',\n      dataIndex: 'markdown',\n    },\n    {\n      title: 'Rendered',\n      className: 'rendered',\n      dataIndex: 'rendered',\n    },\n  ];\n  \n  const data1 = [\n    {\n      key: '1',\n      markdown: '# Museum Title\\n## Section Title\\n### Subsection Title\\n...',\n      rendered: 'Create rooms in your museum.',\n    },\n    {\n      key: '3',\n      markdown: '$[walls](img.jpg) \\n$[ceiling](img.jpg) \\n$[floor](img.jpg)',\n      rendered: 'set the textures of the walls, floor, or the ceiling'\n    }\n  ];\n\nconst markdownguidetablerooms = () => (\n  <div>\n    <Table id=\"panelstyle\"\n    // showHeader={false}\n      columns={columns}\n      dataSource={data1}\n      bordered\n      pagination={false}\n    // title={() => 'Header'}\n    // footer={() => 'Footer'}\n  />\n  <p id=\"panelstyle\">While uploading and using image textures for the walls, ceiling and floor, it is recommended that you crop your textures so that the dimensions are powers of 2 for performance reasons.</p>\n  </div>\n);\n\nexport default markdownguidetablerooms","import React from \"react\"\n\nimport { Table } from 'antd';\n\nconst columns = [\n    {\n      title: 'Markdown',\n      className: 'markdown',\n      dataIndex: 'markdown',\n    },\n    {\n      title: 'Rendered',\n      className: 'rendered',\n      dataIndex: 'rendered',\n    },\n  ];\n  \n  const data1 = [\n    {\n      key: '1',\n      markdown: '![caption text](img.jpg)',\n      rendered: '​The image will be framed and hung on the wall in the exhibit',\n    },\n    {\n      key: '2',\n      markdown: '> Block quote\\n\\n> Multi line\\n> block quote',\n      rendered: '​This text will become a descriptive panel, adding context to your exhibit',\n    },\n    {\n      key: '3',\n      markdown: '![caption text](img.jpg) \\n^(audio-file.m4a)',\n      rendered: 'This audio file will be attached to the image or blockquote on the line above it'\n    },\n    {\n      key: '4',\n      markdown: '~ \\n![These artifacts](img.jpg) \\n\\n> Will be hidden\\n> from the article\\n> but will be visible\\n> in the exhibit!\\n~',\n      rendered: 'This image will be visible in the VR museum, but not in the document view',\n    },\n    {\n      key: '5',\n      markdown: '```\\n// This code will be rendered\\n// as text art\\nvar s = \"JavaScript syntax highlighting\" \\n alert(s);\\n```',\n      rendered: <code>// This code will be rendered<br/>// as text art<br/>var s = \"JavaScript syntax highlighting\"<br />alert(s)</code>,\n    },\n  ];\n\nconst markdownguidetableartifact = () => (\n  <div>\n    <Table id=\"panelstyle\"\n    // showHeader={false}\n      columns={columns}\n      dataSource={data1}\n      bordered\n      pagination={false}\n    // title={() => 'Header'}\n    // footer={() => 'Footer'}\n  />\n  </div>\n);\n\nexport default markdownguidetableartifact","import React from \"react\"\n\nimport { Collapse } from 'antd';\nimport MarkdownGuideTableRooms from './markdownguidetablerooms';\nimport MarkdownGuideTableArtifact from './markdownguidetableartifact';\n\n\n\nconst { Panel } = Collapse;\n\nconst markdownguide = () => (\n    <div className=\"markdown-container\">\n    <Collapse defaultActiveKey={['']}>\n        <Panel className=\"syntax-guide\" header=\"Extended Markdown syntax guide\" id=\"headerstyle\" key=\"1\">\n            <p>Creating and formatting rooms in the museum:</p>\n            <MarkdownGuideTableRooms />\n            <p>Populating the room with artifacts:</p>\n            <MarkdownGuideTableArtifact />\n        </Panel>\n  </Collapse>\n    </div>\n);\n\nexport default markdownguide  ","import React, { useState, useEffect } from \"react\"\n\nimport { Tabs } from 'antd';\nimport { Input } from 'antd';\nimport MarkdownGuide from \"./markdownguide\";\nimport SimpleMDEReact from \"react-simplemde-editor\";\nimport \"easymde/dist/easymde.min.css\";\n\nconst { TextArea } = Input;\n\nconst { TabPane } = Tabs;\n\nfunction callback(key) {\n  console.log(key);\n}\n\nconst styles = {display: \"none\"};\n\n\nfunction ExhibitText(props) {\n    const [value, setValue] = useState(props.value);\n    const handleChange = (event) => {        \n        setValue(event);\n    };\n\n    useEffect(function(){\n        setValue(props.value)\n    },[props.value])\n\n    return (\n        <div className=\"card-container\">\n            <Tabs onChange={callback} type=\"card\">\n                <TabPane tab=\"Markdown\" key=\"1\">\n                    {/* <p className=\"description\">\n                        Create your exhibit in this panel; there's a guide detailing the markdown syntax you should use below. There are basic basic buttons to help you with the markdown syntax. You can click on the H icon to add a header, the link icon to link images, the blockquote icon to add a quote, and so on. In the event that you're using images from the internet in your exhibit via links, make sure that you're using images which are marked for reuse (they'll be blocked by your browser and won't show up, otherwise).\n                </p> */}\n                <div id=\"editorheight\">\n                    <MarkdownGuide />\n                    <SimpleMDEReact\n                        id=\"editor3\"\n                        label=\"Markdown Editor\"\n                        value={value}\n                        // onChange={event => handleChange(textValue, event.target.value)}\n                        // onChange = {e => setValue(e.target.value)}\n                        onChange={handleChange}\n                        options={{\n                            insertTexts: {\n                                horizontalRule: [\"\", \"\\n\\n-----\\n\\n\"],\n                                image: [\"\\n\\n![a caption describing your image](image-name\", \".jpg)\\n\\n\"],\n                                link: [\"[\", \"](http://)\"],\n                                table: [\"\", \"\\n\\n| Column 1 | Column 2 | Column 3 |\\n| -------- | -------- | -------- |\\n| Text     | Text      | Text     |\\n\\n\"],\n                            },\n                        }}\n                    />\n                    <TextArea id=\"editor\"\n                        value={value}\n                        style={styles}>\n                    </TextArea>\n                    </div>\n                </TabPane>\n            </Tabs>\n        </div>\n\n    )\n};\n\nexport default ExhibitText","import React from \"react\"\nimport {storage} from \"../firebase/firebase\"\nimport { v4 as uuidv4 } from 'uuid';\n\nimport FileDict from '../firebase/FileDictionary'\n\nimport { Upload, message, Button } from 'antd';\nimport { UploadOutlined } from '@ant-design/icons';\n\nconst audioFileTypes = ['m4a', 'mp3', 'wav']\n\nconst props = {\n    name: 'file',\n    multiple: true,\n    customRequest({\n      file,\n      onError,\n      onSuccess,\n    }) {\n      let uuid = uuidv4();\n      let uploadTask = null\n      if(audioFileTypes.includes(file.name.split('.').pop()))\n      {\n        uploadTask = storage.ref(`/audio/${uuid + file.name}`).put(file)\n      }\n      else\n      {\n        uploadTask = storage.ref(`/images/${uuid + file.name}`).put(file)\n\n      }\n\n      uploadTask.on('state_changed', \n      (snapShot) => {\n        //takes a snap shot of the process as it is happening\n        console.log(snapShot)\n      }, (err) => {\n        //catches the errors\n        console.log(err)\n        onError(err, file)\n      }, (resp) => {\n        // gets the functions from storage refences the image storage in firebase by the children\n        // gets the download url then sets the image from firebase as the value for the imgUrl key:\n        if(audioFileTypes.includes(file.name.split('.').pop()))\n        {\n          storage.ref('audio').child(uuid + file.name).getDownloadURL()\n            .then(fireBaseUrl => {\n              FileDict[file.name] = fireBaseUrl\n            })\n        }\n        else\n        {\n          storage.ref('images').child(uuid + file.name).getDownloadURL()\n            .then(fireBaseUrl => {\n              FileDict[file.name] = fireBaseUrl\n            })\n        }\n        \n        onSuccess(resp, file);\n      })\n    },\n    onChange(info) {\n      if (info.file.status !== 'uploading') {\n        console.log(info.file, info.fileList);\n      }\n      if (info.file.status === 'done') {\n        message.success(`${info.file.name} file uploaded successfully`);\n      } else if (info.file.status === 'error') {\n        message.error(`${info.file.name} file upload failed.`);\n      }\n    }\n  };\n  \nconst ImageFiles = () => {\n\n  return(\n    <Upload {...props}>\n      <Button>\n        <UploadOutlined /> Upload\n      </Button>\n    </Upload>\n  )}\n\nexport default ImageFiles\n","import PropTypes from \"prop-types\"\nimport React, {useState} from \"react\"\nimport { PageHeader } from 'antd';\n\n\nconst Header = ({ siteTitle }) => (\n\n  <PageHeader\n    className=\"site-page-header\"\n    title={siteTitle}\n    // avatar={{ src: 'https://avatars1.githubusercontent.com/u/8186664?s=460&v=4' }}    \n    />\n    \n)\n\nHeader.propTypes = {\n  siteTitle: PropTypes.string,\n}\n\nHeader.defaultProps = {\n  siteTitle: `Malloci`,\n}\n\nexport default Header\n","\nimport React from \"react\"\nimport PropTypes from \"prop-types\"\n\nimport \"./layout.css\"\nconst Layout = ({ children }) => {\n\n  return (\n    <>\n      {/* <Header siteTitle={siteTitle}/> */}\n    \n      <div\n        style={{\n          margin: `0 auto`,\n          // maxWidth: 960,\n          padding: `0 1.0875rem 1.45rem`,\n        }}\n      >\n        <main>{children}</main>\n        <footer>\n          © {new Date().getFullYear()}, Built with mochi muffins.\n        </footer>\n      </div>\n    </>\n  )\n}\n\nLayout.propTypes = {\n  children: PropTypes.node.isRequired,\n}\n\nexport default Layout\n","export default class VRMD\n{\n    constructor(VSCode = null, debug = false)\n    {\n        this.VSCode = VSCode\n        this.debug = debug\n        this.tree = null\n        this.cleanedMD = null\n    }\n\n    parseList(mdListString)\n    {\n        \n        let exJSON = {}\n        exJSON.rooms = []\n        exJSON.theme = {floor: null, walls: null, ceiling: null, frames: null}\n\n        let subJSON = {}\n        let artifacts = []\n\n        let level = \"\"\n        let text = \"\"\n\n        let block_quote = \"\"\n        let code_block = \"\"\n\n        let in_code = false\n\n        let hidden_block = false\n\n        let mdLines = mdListString.split(',')\n\n\n        for(let i = 0; i < mdLines.length; i++)\n        {      \n            let line = mdLines[i]\n            let words = line.split(\" \")            \n\n            // Headings\n            if (words[0].charAt(0) === \"#\" && !in_code)\n            {\n                // if(words[0].includes(\"###\")) \n                //     continue\n\n                level = words.shift()\n\n                if(subJSON.name !== null)\n                {\n                    subJSON.text = text\n                    subJSON.artifacts = artifacts\n            \n                    text = \"\"\n                    artifacts = []\n\n                    // if(level === \"#\" || level === \"##\")\n                    // {\n                    exJSON.rooms.push(subJSON)\n                    subJSON = {}\n                    // }\n                }\n                else if (text !== \"\")\n                {\n                    exJSON.text = text\n                    exJSON.artifact = artifacts\n\n                    text = \"\"\n                    artifacts = []\n                }\n                if (level === \"#\")\n                {\n                    exJSON.name = words.join(\" \")\n                }\n                subJSON.name = words.join(\" \")\n            }\n\n            // Block Quotes\n            if (words[0].charAt(0) === \">\" && !in_code)\n            {\n                block_quote += words.join(\" \").replace(\">\", \"\").replace(/(^[\\s]+|[\\s]+$)/, \"\\n\")                                \n            }\n            else if (block_quote !== \"\")\n            {\n            artifacts.push(this.parseArtifact(block_quote, \"block quote\"))\n            block_quote = \"\"\n            }\n\n            // Code Blocks\n            if (words[0].includes(\"```\") && !in_code)\n            {\n                code_block += line + \"\\n\"\n                in_code = true\n            }\n            else if(in_code)\n            {\n                if(line.includes(\"```\"))\n                    in_code = false\n                code_block += line + \"\\n\"\n            }\n            else if (code_block === \"\" && words[0].charAt(0) === \"`\")\n            {\n                code_block += line + '\\n'\n                artifacts.push(this.parseArtifact(code_block, \"code\"))\n                code_block = \"\"\n            }\n            else if ( !in_code && code_block !== \"\")\n            {\n                artifacts.push(this.parseArtifact(code_block, \"code block\"))\n                code_block = \"\"\n            }            \n\n            // Images\n            if (words[0].charAt(0) === \"!\" && !in_code)\n            {\n                artifacts.push(this.parseArtifact(line, \"image\"))\n            }\n\n            // VRMD EXTENDED SYNTAX\n            // Theme\n            if (words[0].charAt(0) === \"$\" && !in_code)\n            {\n                let field = line.substring(line.lastIndexOf(\"[\") + 1, line.lastIndexOf(\"]\"))\n                let textureSrc = line.substring(line.lastIndexOf(\"(\") + 1, line.lastIndexOf(\")\"))\n\n                switch (field) {\n                    default:\n                        break\n                    case 'floor':\n                        exJSON.theme.floor = textureSrc\n                        break\n                    case 'walls':\n                        exJSON.theme.walls = textureSrc\n                        break\n                    case 'ceiling':\n                        exJSON.theme.ceiling = textureSrc\n                        break\n                    case 'frames':\n                        exJSON.theme.frames = textureSrc\n                        break\n                }\n                mdLines.splice(i, 1)\n                --i\n            }\n            //3D models (.GLTF)\n            if (words[0].charAt(0) === \"&\" && !in_code)\n            {\n                artifacts.push(this.parseArtifact(line, \"3D\"))\n                mdLines.splice(i, 1)\n                --i\n            }\n            // Audio\n            if (words[0].charAt(0) === \"^\" && !in_code)\n            {\n                this.addAudio(artifacts, line)\n                mdLines.splice(i, 1)\n                --i\n            }\n            // Hidden Artifact\n            if (words[0] === \"~\" && !in_code)\n            {\n                hidden_block = !hidden_block\n            }\n\n            if (hidden_block || (words[0] === \"~\" && !in_code))\n            {\n                mdLines.splice(i, 1)\n                --i\n            }\n\n            if(this.debug)\n            {\n                console.log(artifacts);\n            }\n\n            text += line + '\\n'\n        }\n\n        if(subJSON.name !== null)\n        {\n            subJSON.text = text\n            subJSON.artifacts = artifacts\n\n            text = \"\"\n            artifacts = []\n\n            exJSON.rooms.push(subJSON)\n            subJSON = {}\n        }        \n        this.tree = exJSON\n        this.cleanedMD = mdLines.join('\\n')\n        \n        return this.tree\n    }\n\n    parse(markDown, fileDict = null)\n    {\n        console.log(\"parsing\");        \n        \n        let exJSON = {}\n        exJSON.rooms = []\n        exJSON.theme = {floor: null, walls: null, ceiling: null, frames: null}\n\n        let subJSON = {}\n        let artifacts = []\n\n        let level = \"\"\n        let text = \"\"\n\n        let block_quote = \"\"\n        let code_block = \"\"\n\n        let in_code = false\n\n        let hidden_block = false\n\n        let mdLines = markDown.split('\\n')\n\n        for(let i = 0; i < mdLines.length; i++)\n        {      \n            let line = mdLines[i]\n            let words = line.split(\" \")                        \n\n            // Headings\n            if (words[0].charAt(0) === \"#\" && !in_code)\n            {\n                // if(words[0].includes(\"###\")) \n                //     continue\n\n                level = words.shift()\n\n                if(subJSON.name !== null)\n                {\n                    subJSON.text = text\n                    subJSON.artifacts = artifacts\n            \n                    text = \"\"\n                    artifacts = []\n\n                    // if(level === \"#\" || level === \"##\")\n                    // {\n                        exJSON.rooms.push(subJSON)\n                        subJSON = {}\n                    // }\n                }\n                else if (text !== \"\")\n                {\n                    exJSON.text = text\n                    exJSON.artifact = artifacts\n\n                    text = \"\"\n                    artifacts = []\n                }\n                if (level === \"#\")\n                {\n                    exJSON.name = words.join(\" \")\n                }\n                subJSON.name = words.join(\" \")\n            }            \n\n            // Block Quotes\n            if (words[0].charAt(0) === \">\" && !in_code)\n            {                \n                block_quote += words.join(\" \").replace(\">\", \"\").replace(/(^[\\s]+|[\\s]+$)/, \"\\n\")                                \n            }\n            else if (block_quote !== \"\")\n            {\n                artifacts.push(this.parseArtifact(block_quote, \"block quote\"))\n                block_quote = \"\"\n            }\n\n            // Code Blocks\n            if (words[0].includes(\"```\") && !in_code)\n            {\n                code_block += line + \"\\n\"\n                in_code = true\n            }\n            else if(in_code)\n            {\n                if(line.includes(\"```\"))\n                    in_code = false\n                code_block += line + \"\\n\"\n            }\n            else if (code_block === \"\" && words[0].charAt(0) === \"`\")\n            {\n                code_block += line + '\\n'\n                artifacts.push(this.parseArtifact(code_block, \"code\"))\n                code_block = \"\"\n            }\n            else if ( !in_code && code_block !== \"\")\n            {\n                artifacts.push(this.parseArtifact(code_block, \"code block\"))\n                code_block = \"\"\n            }            \n\n            // Images\n            if (words[0].charAt(0) === \"!\" && !in_code)\n            {\n                artifacts.push(this.parseArtifact(line, \"image\", fileDict))\n                if(fileDict && fileDict[line.substring(line.lastIndexOf(\"(\") + 1, line.lastIndexOf(\")\"))])\n                {\n                    mdLines[i] = line.replace(line.substring(line.lastIndexOf(\"(\") + 1, line.lastIndexOf(\")\")), fileDict[line.substring(line.lastIndexOf(\"(\") + 1, line.lastIndexOf(\")\"))])\n                    line = mdLines[i]\n                }\n            }\n\n            // VRMD EXTENDED SYNTAX\n            // Theme\n            if (words[0].charAt(0) === \"$\" && !in_code)\n            {\n                let field = line.substring(line.lastIndexOf(\"[\") + 1, line.lastIndexOf(\"]\"))\n                let textureSrc = line.substring(line.lastIndexOf(\"(\") + 1, line.lastIndexOf(\")\"))\n\n                if (fileDict && fileDict[line.substring(line.lastIndexOf(\"(\") + 1, line.lastIndexOf(\")\"))])\n                {\n                    textureSrc = fileDict[line.substring(line.lastIndexOf(\"(\") + 1, line.lastIndexOf(\")\"))]\n                }\n                else\n                {\n                    textureSrc = line.substring(line.lastIndexOf(\"(\") + 1, line.lastIndexOf(\")\"))\n                }\n\n                if(this.VSCode && !(/^(?:\\/|[a-z]+:\\/\\/)/.test(textureSrc)))\n                { \n                    textureSrc = this.VSCode + textureSrc\n                }\n\n                switch (field) {\n                    default:\n                        break\n                    case 'floor':\n                        exJSON.theme.floor = textureSrc\n                        break\n                    case 'walls':\n                        exJSON.theme.walls = textureSrc\n                        break\n                    case 'ceiling':\n                        exJSON.theme.ceiling = textureSrc\n                        break\n                    case 'frames':\n                        exJSON.theme.frames = textureSrc\n                        break\n                }\n                mdLines.splice(i, 1)\n                --i\n            }\n            //3D models (.GLTF)\n            if (words[0].charAt(0) === \"&\" && !in_code)\n            {\n                artifacts.push(this.parseArtifact(line, \"3D\"))\n                mdLines.splice(i, 1)\n                --i\n            }\n            // Attachments\n            if (words[0].charAt(0) === \"^\" && !in_code)\n            {\n                let field = line.substring(line.lastIndexOf(\"[\") + 1, line.lastIndexOf(\"]\"))\n\n                if(field === 'frame')\n                    line = this.addFrame(artifacts, line, fileDict)\n                else\n                    line = this.addAudio(artifacts, line, fileDict)\n\n                mdLines.splice(i, 1)\n                --i\n            }\n            // Hidden Artifact\n            if (words[0] === \"~\" && !in_code)\n            {\n                hidden_block = !hidden_block\n            }\n\n            if (hidden_block || (words[0] === \"~\" && !in_code))\n            {\n                mdLines.splice(i, 1)\n                --i\n            }\n\n            text += line + '\\n'\n        }\n\n        if(subJSON.name !== null)\n        {\n            if (block_quote !== \"\")\n            {\n                artifacts.push(this.parseArtifact(block_quote, \"block quote\"))\n                block_quote = \"\"\n            }\n            if (code_block !== \"\")\n            {\n                artifacts.push(this.parseArtifact(code_block, \"code block\"))\n                code_block = \"\"\n            }\n            subJSON.text = text\n            subJSON.artifacts = artifacts\n\n            text = \"\"\n            artifacts = []\n\n            exJSON.rooms.push(subJSON)\n            subJSON = {}\n        }        \n        this.tree = exJSON\n        this.cleanedMD = mdLines.join('\\n')\n        \n        return this.tree\n    }\n\n    parseArtifact(text, type, fileDict = null)\n    {        \n        let artifact = {}\n        artifact.type = type\n        artifact.audioSrc = null\n        artifact.frameSrc = null\n\n\n        switch(type)\n        {\n            default:\n                break\n            case 'image':\n                if (fileDict && fileDict[text.substring(text.lastIndexOf(\"(\") + 1, text.lastIndexOf(\")\"))])\n                {\n                    artifact.src = fileDict[text.substring(text.lastIndexOf(\"(\") + 1, text.lastIndexOf(\")\"))]\n                }\n                else\n                {\n                    artifact.src = text.substring(text.lastIndexOf(\"(\") + 1, text.lastIndexOf(\")\"))\n                }\n\n                artifact.alt = text.substring(text.lastIndexOf(\"[\") + 1, text.lastIndexOf(\"]\"))\n                break\n            case 'block quote':\n                artifact.text = text\n                break\n            case 'code':\n                artifact.code = text.replace(/`/g, \"\").replace('\\n', '')\n                break\n            case 'code block':\n                let cleaned = text.replace(/`/g, \"\")\n                artifact.lang = cleaned.split(\"\\n\")[0]\n                artifact.code = cleaned.replace(artifact.lang + '\\n', '')\n                break\n            case '3D':\n                artifact.src = text.substring(text.lastIndexOf(\"(\") + 1, text.lastIndexOf(\")\"))\n                artifact.name = text.substring(text.lastIndexOf(\"[\") + 1, text.lastIndexOf(\"]\"))\n                break\n        }\n\n        if(this.VSCode && artifact.src && !(/^(?:\\/|[a-z]+:\\/\\/)/.test(artifact.src)))\n        {             \n            artifact.src = this.VSCode + artifact.src\n        }\n        return artifact\n    }\n\n    addAudio(artifacts, line, fileDict)\n    {\n        if (fileDict && fileDict[line.substring(line.lastIndexOf(\"(\") + 1, line.lastIndexOf(\")\"))])\n        {\n            artifacts[artifacts.length - 1].audioSrc = fileDict[line.substring(line.lastIndexOf(\"(\") + 1, line.lastIndexOf(\")\"))]\n            line = line.replace(line.substring(line.lastIndexOf(\"(\") + 1, line.lastIndexOf(\")\")), fileDict[line.substring(line.lastIndexOf(\"(\") + 1, line.lastIndexOf(\")\"))])\n\n        }\n        else\n        {\n            artifacts[artifacts.length - 1].audioSrc = line.substring(line.lastIndexOf(\"(\") + 1, line.lastIndexOf(\")\"))\n        }\n\n        if(this.VSCode && !(/^(?:\\/|[a-z]+:\\/\\/)/.test(artifacts[artifacts.length - 1].audioSrc)))\n        {\n            artifacts[artifacts.length - 1].audioSrc = this.VSCode + artifacts[artifacts.length - 1].audioSrc\n        }\n\n        return line\n    }\n\n    addFrame(artifacts, line, fileDict)\n    {\n        if (fileDict && fileDict[line.substring(line.lastIndexOf(\"(\") + 1, line.lastIndexOf(\")\"))])\n        {\n            artifacts[artifacts.length - 1].frameSrc = fileDict[line.substring(line.lastIndexOf(\"(\") + 1, line.lastIndexOf(\")\"))]\n            line = line.replace(line.substring(line.lastIndexOf(\"(\") + 1, line.lastIndexOf(\")\")), fileDict[line.substring(line.lastIndexOf(\"(\") + 1, line.lastIndexOf(\")\"))])\n        }\n        else\n        {\n            artifacts[artifacts.length - 1].frameSrc = line.substring(line.lastIndexOf(\"(\") + 1, line.lastIndexOf(\")\"))\n        }\n\n        if(this.VSCode && !(/^(?:\\/|[a-z]+:\\/\\/)/.test(artifacts[artifacts.length - 1].frameSrc)))\n        {\n            artifacts[artifacts.length - 1].frameSrc = this.VSCode + artifacts[artifacts.length - 1].frameSrc\n        }\n\n        return line\n    }\n}\n\n","import React, {useEffect} from \"react\"\nimport ReactMarkdown from \"react-markdown\"\nimport hljs from \"highlight.js\"\n\nconst Exhibitdocument = (props) => {\n\n\n    \n    useEffect(()=>{\n        document.getElementById(\"doc-preview\").querySelectorAll(\"pre code\").forEach(block => {\n          hljs.highlightBlock(block);\n        });\n      },[props.md])\n  \n      function flatten(text, child) {\n        return typeof child === 'string'\n          ? text + child\n          : React.Children.toArray(child.props.children).reduce(flatten, text)\n      }\n      \n      function HeadingRenderer(props) {\n        let children = React.Children.toArray(props.children)\n        let text = children.reduce(flatten, '')\n        let slug = text.toLowerCase().replace(/[!\"#$%&'()*+,./:;<=>?@[\\]^`{|}~]/g,\"\").replace(/\\W/g, '-')\n        return React.createElement('h' + props.level, {id: slug}, props.children)\n      }\n    \n    return(\n    <div id=\"doc-preview\">\n        <ReactMarkdown source={props.md} renderers={{heading: HeadingRenderer}}/>\n    </div>\n)}\n\nexport default Exhibitdocument","import React from \"react\"\nimport {Scene, Entity} from \"aframe-react\"\nimport { OmitProps } from \"antd/lib/transfer/renderListBody\"\n\nconst exhibit = (props) => {\n  \n  let treeString = JSON.stringify(props.tree)  \n\n  let cursor = null\n\n  if(props.editor) cursor =  <a-cursor></a-cursor>\n\n\n  return(\n      <Scene id={props.exhibitId} vr-mode-ui=\"enabled: false\" embedded background=\"color: #87ceeb\">\n        <a-assets>\n            <a-mixin id=\"checkpoint\"></a-mixin>\n            <a-mixin id=\"checkpoint-hovered\" color=\"#6CEEB5\"></a-mixin>\n            <img id=\"wallTexture\" src=\"/textures/wall.jpg\"/>\n            <img id=\"floorTexture\" src=\"/textures/concrete_floor.jpg\"/>\n            <img id=\"ceilingTexture\" src=\"/textures/concrete_floor.jpg\"/>\n            <img id=\"frameTexture\" src=\"/textures/frame.jpg\"/>\n          </a-assets>\n          <a-light type=\"ambient\" position=\"0 6 0\" rotation=\"0 0 45\"></a-light>\n          <Entity id=\"rig\"\n                    movement-controls={{enabled: true}}\n                    position=\"2 0 1\" \n                    rotation=\"0 180 0\">\n            <a-camera id=\"camera\"\n            look-controls=\"pointerLockEnabled: true\">\n            <a-sound  id =\"ambient-track\" src=\"src: url(/audio/light-piano-noodling-in-b.mp3)\" autoplay=\"false\" volume=\"0.4\" loop =\"true\" position=\"0 4 0\"></a-sound>\n              {cursor}\n            </a-camera>\n          <Entity laser-controls={{hand: 'left'}} raycaster={{objects: '.clickable', far: 3}} teleport-controls={{collisionEntities: '.scenery', drawForAllCollisions: false, landingMaxAngle: 45, button: 'trigger', cameraRig: '#rig', teleportOrigin: '#camera'}}></Entity>\n          <Entity laser-controls={{hand: 'right'}} raycaster={{objects: '.clickable', far: 3}} teleport-controls={{collisionEntities: '.scenery', drawForAllCollisions: false, landingMaxAngle: 45, button: 'trigger', cameraRig: '#rig', teleportOrigin: '#camera'}}></Entity>\n        </Entity>\n        <Entity id=\"museum\" \n                malloci={{\n                  tree: treeString,\n                  hallWidth: 8,\n                  wallHeight: 5,\n                  base64Mode: props.b64,\n                  debug: props.debug}}></Entity>\n      </Scene>\n)}\n\nexport default exhibit","import React, {useState, useEffect} from 'react';\nimport { Redirect, useParams } from 'react-router-dom'\n\nimport firebase, {database} from \"../firebase/firebase\"\nimport FileDict from '../firebase/FileDictionary'\n\nimport ExhibitText from \"../components/exhibittext\"\nimport ImageFiles from \"../components/imagefiles\"\nimport { Button, Tooltip, Modal } from 'antd';\nimport { Row, Col, Tabs } from 'antd';\nimport Header from \"../components/header\";\nimport { DeleteOutlined } from '@ant-design/icons';\n\nimport Layout from \"../components/layout\"\n\nimport VRMD from \"../malloci/vrmd-parser\"\n\nimport ExhibitDocument from \"../components/exhibitdocument\"\nimport Exhibit from \"../components/exhibit\"\n\nimport \"./editor.css\"\n\n\nconst { TabPane } = Tabs;\n\nfunction callback(key) {\n  console.log(key);\n}\n\nfunction FileDictConcat(o2) {\n  for (var key in o2) {\n   FileDict[key] = o2[key];\n  }\n  console.log(FileDict);\n  \n }\n\nconst Mallocieditor = () => {\n\n  const { id } = useParams();\n\n\n  const [museumTree, setMuseumTree] = useState({ theme: {floor: null, walls: null, ceiling: null}, rooms: [{name:\"1\", artifacts: []}, {name:\"2\", artifacts:[]}]})  \n  const [md, setMd] = useState('')\n  const [rawMD, setRawMD] = useState(\"# Hello world! \\n\\n> Welcome to the world! \\n\\n## Hello continent \\n\\nThis is a starter exhibit. Hit build to view it in VR. The name of the museum is Hello world!. There is one room, Hello Continent. There's some wall art about baby elephants and a picture of a baby elephant in a bucket. \\n\\n> Baby elephants are endangered \\n\\n![baby elephants are endangered!](https://i.imgur.com/SnolApK.jpg)\")  \n  const [owner, setOwner] = useState('')\n  const [modalVisible, setModalVisible] = useState(false)\n\n  const [redirect, setRedirect] = useState('')\n\n  const updateExhibit = async () => {\n    const vrmdParser = new VRMD()\n    const editor = document.getElementById('editor')\n    let tree = vrmdParser.parse(editor.value, FileDict)\n    const response = await fetch(\"https://malloci.uc.r.appspot.com/generate\", {\n      method: 'POST', // *GET, POST, PUT, DELETE, etc.\n      mode: 'cors', // no-cors, *cors, same-origin\n      cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\n      credentials: 'omit', // include, *same-origin, omit\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      },\n      redirect: 'follow', // manual, *follow, error\n      referrerPolicy: 'no-referrer', // no-referrer, *client\n      body: JSON.stringify(tree) // body data type must match \"Content-Type\" header\n    })\n    if (!response.ok) {\n      console.error(\"bad response, loading user defined tree\")\n      setMuseumTree(tree)\n    }\n    else\n    {\n      tree = await response.json()\n      setMuseumTree(tree)\n    }\n    setMd(vrmdParser.cleanedMD)\n  }\n\n  useEffect(() => {\n    if(id)\n    {\n      let docRef = database.collection(\"exhibits\").doc(id);\n\n      docRef.get().then((doc) => {\n          if (doc.exists) {\n            if(!firebase.auth().currentUser || firebase.auth().currentUser.uid !== doc.data().authorID)\n            {\n              setRedirect(`/Exhibits/${docRef.id}`)\n            }\n            console.log(\"success!!!!\");\n\n            FileDictConcat(JSON.parse(doc.data().fileDict))\n            setOwner(true)\n            setRawMD(doc.data().rawMD)\n          } else {\n              // doc.data() will be undefined in this case\n              console.log(\"No such document!\");\n              setRedirect(`/Exhibits/${docRef.id}`)\n\n          }\n      }).catch(function(error) {\n          console.log(\"Error getting document:\", error);\n          setRedirect(`/Exhibits/${docRef.id}`)\n      });\n    }\n    updateExhibit()\n  },[])\n  \n  const uploadExhibit = () => {\n    console.log(Object.keys(FileDict));\n    if(id)\n    {\n      let docRef = database.collection(\"exhibits\").doc(id);\n      docRef.update({\n        preview: Object.keys(FileDict).length !== 0 ? FileDict[Object.keys(FileDict)[0]] : 'img/Maria.jpg',\n        title: museumTree.name,\n        rawMD: document.getElementById('editor').value,\n        fileDict: JSON.stringify(FileDict),\n        md: md,\n        tree: museumTree\n      })\n      .then(function() {\n          console.log(\"Document successfully updated!\");\n          setRedirect(`/Exhibits/${docRef.id}`)\n      }).catch(function(error) {\n        console.error(\"Error adding document: \", error);\n      });\n    }\n    else\n    {\n      database.collection(\"exhibits\").add({\n        author: firebase.auth().currentUser.displayName,\n        authorID: firebase.auth().currentUser.uid,\n        preview: Object.keys(FileDict).length !== 0 ? FileDict[Object.keys(FileDict)[0]] : 'img/Maria.jpg',\n        title: museumTree.name,\n        rawMD: document.getElementById('editor').value,\n        fileDict: JSON.stringify(FileDict),\n        md: md,\n        tree: museumTree\n      })\n      .then(function(docRef) {\n        console.log(\"Document written with ID: \", docRef.id);\n        setRedirect(`/Exhibits/${docRef.id}`)\n      })\n      .catch(function(error) {\n          console.error(\"Error adding document: \", error);\n      });\n    }\n  }\n\n  const RedirectRenderer = () => {\n    if(redirect !== '') return <Redirect to={redirect} push/>\n    \n  }\n\n  const deleteExhibit = () => {\n      database.collection(\"exhibits\").doc(id).delete().then(function() {\n        console.log(\"Document successfully deleted!\");\n        setRedirect(`/`)\n\n    }).catch(function(error) {\n        console.error(\"Error removing document: \", error);\n    });\n  }\n\n  const DeleteButton = () => {\n    if(owner)\n    {\n      return(\n      <div>\n        <Tooltip title=\"Delete This Exhibit\"><Button type=\"danger\" shape=\"circle\" onClick={() => setModalVisible(true)} icon={<DeleteOutlined />} /></Tooltip>\n        <Modal\n        title=\"Basic Modal\"\n        visible={modalVisible}\n        onOk={() => deleteExhibit()}\n        onCancel={() => setModalVisible(false)}\n        okText=\"Yes, delete this Exhibit.\"\n        okButtonProps = {{ type:\"danger\" }}\n        cancelText=\"Cancel\"\n      >\n        <p>This will permanently delete your exhibit, Would you like to continue?</p>\n\n      </Modal>\n      </div>\n        \n      )\n    }\n  }\n  \n  return (\n   <Layout >\n     <Header siteTitle={\"Create a New Exhibit\"}></Header>\n     <div id=\"alertstyle\">\n     {/* <Alert \n      message=\"Online only!\"\n      description=\"This is an online editor: museums you create using this tool will not be saved! Please copy your text from the Markdown panel before you close your session.\"\n      type=\"info\"\n      showIcon closable\n    /> */}\n    </div>\n     <Row>\n     <Col classname=\"gutter-col\">\n        <div className=\"description\">\n            <p>A web editor to view museums written in markdown.<br></br>      \n            Create your exhibit in the panel on the left; there's a guide detailing the markdown syntax you should use. View your exhibit space in the \"Exhibit\" tab of panel on the right. The \"Document\" tab will contain an article of your exhibit instead.<br></br>\n            The editor area in the \"Markdown\" panel contains basic buttons to help you with the markdown syntax. You can click on the H icon to add a header, the link icon to link images, the blockquote icon to add a quote, and so on. In the event that you're using images from the internet in your exhibit via links, make sure that you're using images which are marked for reuse (they'll be blocked by your browser and won't show up, otherwise).\n            </p>\n        </div>\n    </Col>\n     </Row>\n    <Row>\n      <Col className=\"gutter-col\" span={12}>\n          <div className=\"gutter-row\" id=\"exhibittext\">\n            <ExhibitText value={rawMD} />\n          </div>\n\n          <div className=\"gutter-row\">\n            <Button onClick={() => {updateExhibit()}} id=\"build-exhibit\" type=\"primary\">Build</Button>\n          </div>\n        \n          <div className=\"gutter-row\" id=\"imageupload\">\n            <ImageFiles></ImageFiles>\n          </div>\n        \n      </Col>\n      <Col className=\"gutter-col\" span={12}>\n      <div className=\"gutter-row\" id=\"exhibitmaster\">\n          <div className=\"card-container\">\n            <Tabs onChange={callback} type=\"card\">\n                <TabPane id=\"exhibit_pane\" tab=\"Exhibit\" key=\"1\">\n                    <Exhibit exhibitId=\"preview\" tree={museumTree} editor={true} debug={true}/>\n                </TabPane>\n        \n                <TabPane tab=\"Document\" key=\"2\">\n                    <ExhibitDocument md={md} />\n                </TabPane>\n          </Tabs>\n          </div>\n        </div>\n        <div className=\"gutter-row\">\n            {DeleteButton()}\n            <Button onClick={() => {uploadExhibit()}} id=\"create-exhibit\" type=\"primary\">Publish</Button>\n          </div>\n      </Col>\n    </Row>\n    {RedirectRenderer()}\n  </Layout>\n  );\n}\n\nexport default Mallocieditor;\n","import React from \"react\"\n\nimport { Upload, message, Button } from 'antd';\nimport { UploadOutlined } from '@ant-design/icons';\n\nconst props = {\n    name: 'file',\n    multiple: true,\n    customRequest(data) {\n      let reader = new FileReader();      \n      reader.readAsBinaryString(data.file);\n      reader.onload = function(e) {\n          let bits = e.target.result; \n\n          let src = `${data.file.name}`\n\n          sessionStorage.setItem(src, bits)\n      }\n    },\n    onChange(info) {\n      if (info.file.status !== 'uploading') {\n        console.log(info.file, info.fileList);\n      }\n      if (info.file.status === 'done') {\n        message.success(`${info.file.name} file uploaded successfully`);\n      } else if (info.file.status === 'error') {\n        message.error(`${info.file.name} file upload failed.`);\n      }\n    }\n  };\n  \nconst ImageFiles = () => (\n    <Upload {...props}>\n      <Button>\n        <UploadOutlined /> Upload\n      </Button>\n    </Upload>\n  )\n\nexport default ImageFiles","import React, {useState, useEffect} from 'react';\nimport { Redirect } from 'react-router-dom'\n\nimport firebase from \"../firebase/firebase\"\n\nimport ExhibitText from \"../components/exhibittext\"\nimport PGImageFiles from \"../components/pgimagefiles\"\nimport { Button } from 'antd';\nimport { Row, Col, Tabs } from 'antd';\nimport Header from \"../components/header\";\nimport { Alert } from 'antd';\nimport Layout from \"../components/layout\"\n\nimport VRMD from \"../malloci/vrmd-parser\"\n\nimport ExhibitDocument from \"../components/exhibitdocument\"\nimport Exhibit from \"../components/exhibit\"\n\nimport \"./editor.css\"\n\n\nconst { TabPane } = Tabs;\n\nfunction callback(key) {\n  console.log(key);\n}\n\n\nfunction Playground() {\n\n  const initValue = \"# Hello world! \\n\\n> Welcome to the world! \\n\\n## Hello continent \\n\\nThis is a starter exhibit. Hit build to view it in VR. The name of the museum is Hello world!. There is one room, Hello Continent. There's some wall art about baby elephants and a picture of a baby elephant in a bucket. \\n\\n> Baby elephants are endangered \\n\\n![baby elephants are endangered!](https://i.imgur.com/SnolApK.jpg)\"\n\n  const [museumTree, setMuseumTree] = useState({ theme: {floor: null, walls: null, ceiling: null}, rooms: [{name:\"1\", artifacts: []}, {name:\"2\", artifacts:[]}]})  \n  const [md, setMd] = useState('')  \n\n  const updateExhibit = () => {\n  \n    const vrmdParser = new VRMD()\n    const editor = document.getElementById('editor')\n    console.log('editor value', editor)\n    let tree = vrmdParser.parse(editor.value)\n    setMuseumTree(tree)\n    setMd(vrmdParser.cleanedMD)\n  }\n\n  useEffect(function() {\n    updateExhibit()\n  },[])\n\n  const goToEditor = () => {\n    if(firebase.auth().currentUser && firebase.auth().currentUser.email.match(\".*berkeley[.]edu\")) return <Redirect to={`/Editor`} push/>\n    }\n  \n  return (\n    \n   <Layout >\n     <Header siteTitle={\"Playground\"}></Header>\n     <div id=\"alertstyle\">\n     <Alert \n      message=\"Demo only!\"\n      description=\"This is a demo editor: museums you create using this tool will not be saved! Please copy your text from the Markdown panel before you close your session.\"\n      type=\"info\"\n      showIcon closable\n    />\n    </div>\n     <Row>\n     <Col classname=\"gutter-col\">\n        <div className=\"description\">\n            <p>A web editor to view museums written in markdown.<br></br>      \n            Create your exhibit in the panel on the left; there's a guide detailing the markdown syntax you should use. View your exhibit space in the \"Exhibit\" tab of panel on the right. The \"Document\" tab will contain an article of your exhibit instead.<br></br>\n            The editor area in the \"Markdown\" panel contains basic buttons to help you with the markdown syntax. You can click on the H icon to add a header, the link icon to link images, the blockquote icon to add a quote, and so on. In the event that you're using images from the internet in your exhibit via links, make sure that you're using images which are marked for reuse (they'll be blocked by your browser and won't show up, otherwise).\n            </p>\n        </div>\n    </Col>\n     </Row>\n    <Row>\n      <Col className=\"gutter-col\" span={12}>\n          <div className=\"gutter-row\" id=\"exhibittext\">\n            <ExhibitText value = {initValue} />\n          </div>\n\n          <div className=\"gutter-row\">\n            <Button onClick={() => {updateExhibit()}} id=\"build-exhibit\" type=\"primary\">Build</Button>\n          </div>\n        \n          <div className=\"gutter-row\" id=\"imageupload\">\n            <PGImageFiles></PGImageFiles>\n          </div>\n        \n      </Col>\n      <Col className=\"gutter-col\" span={12}>\n      <div id=\"exhibitmaster\">\n          <div className=\"card-container\">\n            <Tabs onChange={callback} type=\"card\">\n                <TabPane id=\"exhibit_pane\" tab=\"Exhibit\" key=\"1\">\n                    <Exhibit exhibitId=\"preview\" tree={museumTree} b64={true} editor={true} debug={true}/>\n                </TabPane>\n        \n                <TabPane tab=\"Document\" key=\"2\">\n                    <ExhibitDocument md={md} />\n                </TabPane>\n          </Tabs>\n          </div>\n        </div>\n      </Col>\n    </Row>\n    {goToEditor()}\n  </Layout>\n  );\n}\n\nexport default Playground;","import React, {useState, useEffect} from \"react\"\nimport \"react-markdown\"\nimport hljs from \"highlight.js\"\nimport VRMD from \"../malloci/vrmd-parser\"\nimport Layout from \"../components/layout\"\nimport Exhibit from \"../components/exhibit\"\nimport './museum.css'\nimport { Typography } from 'antd';\nimport ReactMarkdown from \"react-markdown\"\n\n// const heroimg = '../logo.svg'\nconst Museum = () => {\n\n  let [museumTree, setMuseumTree] = useState({ theme: {floor: null, walls: null, ceiling: null}, rooms: [{name:\"1\", artifacts: []}, {name:\"2\", artifacts:[]}]})  \n  let[md, setMd] = useState('')\n\n  const vrmdParser = new VRMD()\n\n    useEffect(() => {\n      fetch(\"https://raw.githubusercontent.com/mallocivr/mallocivr.github.io/master/markDown/home.md\")\n      .then(res => res.text())\n      .then(post => {\n        vrmdParser.parse(post)\n        setMd(vrmdParser.cleanedMD)\n        setMuseumTree(vrmdParser.tree)\n      })\n      .catch((err) => console.error(err));\n    }, [])\n\n    useEffect(()=>{\n      document.getElementById(\"md_article\").querySelectorAll(\"pre code\").forEach(block => {\n        hljs.highlightBlock(block);\n      });\n    },[md])\n\n    function flatten(text, child) {\n      return typeof child === 'string'\n        ? text + child\n        : React.Children.toArray(child.props.children).reduce(flatten, text)\n    }\n    \n    function HeadingRenderer(props) {\n      let children = React.Children.toArray(props.children)\n      let text = children.reduce(flatten, '')\n      let slug = text.toLowerCase().replace(/[!\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~]/g,\"\").replace(/\\W/g, '-')\n      return React.createElement('h' + props.level, {id: slug}, props.children)\n    }\n\n\n  \n  return(\n  <Layout >\n    <Typography >\n    {/* <Header siteTitle={\"Malloci\"}></Header> */}\n    {/* <Row id=\"hero\">\n      <Col className=\"heroimg\" span={12}>\n        \n      </Col>\n      <Col className=\"herotext\" span={12}>\n        <h1>Malloci</h1>\n      </Col>\n    </Row> */}\n\n    <div className=\"museum\">\n      {/* <img className=\"heroimg\" src={heroimg}></img> */}\n      <div id=\"md_article\" className=\"museumtext\">\n        <ReactMarkdown source={md} renderers={{heading: HeadingRenderer}}/>\n      </div>\n    </div>\n    <Exhibit exhibitId=\"exhibit\" tree= {museumTree} b64={false} debug={true}/>\n    </Typography>\n  </Layout>\n)};\n\nexport default Museum","import React, {useState, useEffect} from \"react\"\nimport {database} from \"../firebase/firebase\"\nimport {Link} from 'react-router-dom';\nimport Layout from \"../components/layout\"\nimport \"./gallery.css\"\nimport { Card } from 'antd';\n\nimport Header from \"../components/header\";\n\nconst { Meta } = Card;\n\nconst Gallery = () => {\n  const [tiles, setTiles] = useState([])\n\n  useEffect(function() {\n    database.collection(\"exhibits\").get().then((querySnapshot) => {\n      let exhibits = querySnapshot.docs.map((doc) => {\n          // doc.data() is never undefined for query doc snapshots\n          console.log(doc.id, \" => \", doc.data());\n          return(\n            <Link to={`/Exhibits/${doc.id}`}>\n              <Card className=\"card-space\"\n                hoverable\n                style={{ width: 300 }}\n                cover={<img alt=\"example\" src={doc.data().preview} />}\n              >\n              <Meta title={doc.data().title}/>\n              </Card>     \n            </Link>\n          )\n      });\n\n      setTiles(exhibits)\n    });\n  },[])    \n\n  \n  return(\n    <Layout >\n     <Header siteTitle={\"The Malloci Gallery\"} ></Header>\n    <div className=\"description\">\n        <p>A curation of VR museums generated using Malloci.</p>\n    </div>\n    <div className=\"mastercard\">\n    {tiles}\n  {/* <Card className=\"card-space\"\n    hoverable\n    style={{ width: 300 }}\n    cover={<img alt=\"example\" src=\"https://upload.wikimedia.org/wikipedia/commons/e/e2/Northern_lights_%289997815384%29.jpg\" />}\n  >\n    <Meta title=\"The Other Auroras\" description=\"Northern lights over Iceland\" />\n  </Card> */}\n  </div>\n  </Layout>\n)};\n\n\nexport default Gallery","import React, {useState, useEffect} from \"react\"\nimport firebase, {database} from \"../firebase/firebase\"\nimport {Link, useParams } from 'react-router-dom';\nimport hljs from \"highlight.js\"\nimport Layout from \"../components/layout\"\nimport Exhibit from \"../components/exhibit\"\nimport {Tooltip, Button, Typography } from 'antd';\nimport { EditOutlined } from '@ant-design/icons';\n  \nimport './museum.css'\nimport ReactMarkdown from \"react-markdown\"\n\nconst Example = () => {\n\n  const { exhibit } = useParams();\n\n  const [museumTree, setMuseumTree] = useState({ theme: {floor: null, walls: null, ceiling: null}, rooms: [{name:\"1\", artifacts: []}, {name:\"2\", artifacts:[]}]})  \n  const [md, setMd] = useState('')\n\n  const [isOwner, setIsOwner] = useState(false)\n\n    useEffect(() => {\n      var docRef = database.collection(\"exhibits\").doc(exhibit);\n\n      docRef.get().then(function(doc) {\n          if (doc.exists) {\n            if(firebase.auth().currentUser && firebase.auth().currentUser.uid === doc.data().authorID)\n            {\n              setIsOwner(true)\n            }\n              setMd(doc.data().md)\n              setMuseumTree(doc.data().tree)\n          } else {\n              // doc.data() will be undefined in this case\n              console.log(\"No such document!\");\n          }\n      }).catch(function(error) {\n          console.log(\"Error getting document:\", error);\n      });\n    }, [])\n\n    useEffect(()=>{\n      document.getElementById(\"md_article\").querySelectorAll(\"pre code\").forEach(block => {\n        hljs.highlightBlock(block);\n      });\n    },[md])\n\n    function flatten(text, child) {\n      return typeof child === 'string'\n        ? text + child\n        : React.Children.toArray(child.props.children).reduce(flatten, text)\n    }\n    \n    function HeadingRenderer(props) {\n      let children = React.Children.toArray(props.children)\n      let text = children.reduce(flatten, '')\n      let slug = text.toLowerCase().replace(/[.,\\/#!$%\\^&\\*;:{}=_`~()?]/g,\"\").replace(/[ ’]/g, '-')\n      return React.createElement('h' + props.level, {id: slug}, props.children)\n    }\n\n    function ImageRenderer(props) {\n      return <p><img {...props} /></p>\n    }\n\n    function checkOwnerShip(){\n      if(isOwner)\n      {\n        return <Link to={`/Editor/${exhibit}`}><Tooltip title=\"Edit This Exhibit\"><Button type=\"default\" shape=\"circle\" icon={<EditOutlined />} /></Tooltip></Link>\n      }\n    }\n  \n  return(\n  <Layout >\n    <Typography>\n    <div className=\"museum\">\n      {/* <img className=\"m\" src={heroimg}></img> */}\n      {checkOwnerShip()}\n      <div id=\"md_article\" className=\"museumtext\">\n        <ReactMarkdown source={md} renderers={{heading: HeadingRenderer, image: ImageRenderer}}/>\n      </div>\n    </div>\n    </Typography>\n    <Exhibit exhibitId=\"exhibit\" tree= {museumTree} b64={false} debug={true}/>\n  </Layout>\n)};\n\nexport default Example","import React, {useState} from \"react\"\nimport Layout from \"../components/layout\"\nimport \"./gallery.css\"\nimport { Card } from 'antd';\n\nimport Header from \"../components/header\";\n\nconst { Meta } = Card;\n\nconst About = () => (\n    <Layout >\n     <Header siteTitle={\"About us\"} ></Header>\n    <div className=\"description\">\n        <p>The team behind Malloci</p>\n    </div>\n    <div className=\"mastercard\">\n<Card className=\"card-space\"\n    hoverable\n    style={{ width: 500 }}\n    cover={<img alt=\"example\" src=\"https://upload.wikimedia.org/wikipedia/commons/e/e2/Northern_lights_%289997815384%29.jpg\" />}\n  >\n    <Meta title=\"Masha Belyi\" description=\"NLP Engineer\" />\n  </Card>\n\n  <Card className=\"card-space\"\n    hoverable\n    style={{ width: 500 }}\n    cover={<img alt=\"example\" src=\"https://upload.wikimedia.org/wikipedia/commons/e/e2/Northern_lights_%289997815384%29.jpg\" />}\n  >\n    <Meta title=\"Michael Gutensohn\" description=\"Product Owner + VR Software Engineer\" />\n  </Card>\n\n  <Card className=\"card-space\"\n    hoverable\n    style={{ width: 500 }}\n    cover={<img alt=\"example\" src=\"https://upload.wikimedia.org/wikipedia/commons/e/e2/Northern_lights_%289997815384%29.jpg\" />}\n  >\n    <Meta title=\"Jennifer Momoh\" description=\"Quantitative UX Researcher\" />\n  </Card>\n\n  <Card className=\"card-space\"\n    hoverable\n    style={{ width: 500 }}\n    cover={<img alt=\"example\" src=\"https://upload.wikimedia.org/wikipedia/commons/e/e2/Northern_lights_%289997815384%29.jpg\" />}\n  >\n    <Meta title=\"Sharanya Soundararajan\" description=\"Rabbit\" />\n  </Card>\n\n  <Card className=\"card-space\"\n    hoverable\n    style={{ width: 500 }}\n    cover={<img alt=\"example\" src=\"https://upload.wikimedia.org/wikipedia/commons/e/e2/Northern_lights_%289997815384%29.jpg\" />}\n  >\n    <Meta title=\"Yejun Wu\" description=\"VR Experience Designer\" />\n  </Card>\n  </div>\n  </Layout>\n);\n\n\nexport default About","/* \n\nlet wiki = new WikiParser()\n\n// Search wiki pages\nwiki.search(\"Memory\", 10, function(response){\n  console.log(response);\n}) \n\n// Parse wiki page into markdown\nwiki.parse(\"University_of_California,_Berkeley\", function(markDown){\n  console.log(markDown);\n}) \n\n// To include linked images in markdown use parseFull\nwiki.parseFull(\"University_of_California,_Berkeley\", function(markDown){\n  console.log(markDown);\n})\n\n\n*/\n\nexport default class WikiParser {\n  constructor() {\n    this.api = \"https://en.wikipedia.org/w/api.php\";\n    this.fetchUrl = this.api + \"?origin=*&action=parse&prop=text&format=json&page=\"\n  }\n    \n  search(query, limit, onready) {\n    var params = {\n      action: \"opensearch\",\n      list: \"search\",\n      search: query,\n      format: \"json\",\n      limit: limit\n    };\n\n    var url = this.api + \"?origin=*\";\n    Object.keys(params).forEach(function(key){url += \"&\" + key + \"=\" + params[key];});\n\n    fetch(url)\n      .then(function(response){return response.json();})\n      .then(function(response) {\n        // console.log(response);\n        onready(response)\n      })\n      .catch(function(error){console.log(error);});\n  }\n  \n  parse(page, onready) {\n    var self = this;\n    fetch(this.fetchUrl+page)\n      .then(function(resp) { return resp.json();})\n      .then(function(data) {\n\n      var html = '<body>' + data.parse.text['*'] + '</body>'\n      \n      self.htmlToMd(data.parse.title, html, false)\n      onready(self.md.join(\"\\n\\n\"));\n    });\n  }\n  \n  parseFull(page, onready) {\n    var self = this;\n    fetch(this.fetchUrl+page)\n      .then(function(resp) { return resp.json();})\n      .then(function(data) {\n\n      var html = '<body>' + data.parse.text['*'] + '</body>'\n      //var md = [\"# \" + data.parse.title]\n      //md = md.concat(self.htmlToMd(html))\n      self.htmlToMd(data.parse.title, html, true)\n      //self.md = md\n      /* md = md.join(\"\\n\\n\") */\n      /* onready(md) */\n      self.waitForImages(10, onready) // wait up to 10 seconds for Images\n    });\n  }\n  \n  page_summary(pageName, onready) {\n    if (pageName==null){return {}}\n    var url = \"https://en.wikipedia.org/api/rest_v1/page/summary/\"+encodeURIComponent(pageName.replace(/ /g, '_'));\n    //console.log(url)\n    fetch(url)\n      .then(function(response){return response.json();})\n      .then(function(response) {\n        // console.log(response);\n        onready(response)\n      })\n      .catch(function(error){console.log(error);});\n  }\n  \n  cleanText(text) {\n    // remove citations eg: [10], [1][2]\n    text = text.replace(/ *\\[[^\\]]*\\]/g, '')\n    \n    // remove extra spaces\n    text = text.replace(/\\s+/, ' ')\n    text = text.replace(/^\\s+|\\s+$/g, '')\n    \n    return text\n  }\n  \n htmlToMd(title, html, parseImages) {\n    // Input: HTML string\n    // Returns: array of markdown strings\n    this.waitForImage = 0;\n    this.imgPlaceholder = {};\n    var md = [\"# \" +title]\n    this.md = md;\n    \n    var parser = new DOMParser();\n    var document = parser.parseFromString(html,\"text/xml\");\n    \n    var content = document.getElementsByClassName(\"mw-parser-output\")\n    // var paragraphs = xmlDoc.getElementsByTagName(\"p\");\n    var children = content[0].childNodes\n    for (var i = 0; i < children.length; i++)  {\n      var node = children[i];\n      \n      if (node.className == \"mw-empty-elt\") {\n        continue\n      }\n      // plain text\n      if (node.nodeName == \"p\") {\n        md.push(this.cleanText(node.textContent))\n        \n        if (!parseImages) { continue; }\n        \n        // look for links with images\n        var links = node.getElementsByTagName(\"a\");\n        for (var linkId = 0; linkId < links.length; linkId++) {\n          var el = links[linkId]\n          var pageName = el.getAttribute(\"title\");\n          \n          // Get out befor its too late!\n          // (to escape with prob 0.5 can use || Math.random() < 0.5)\n          if (pageName == null || el.className == \"new\" || Math.random() > 0.3) {continue}\n          \n          // Grab an image, if possible\n          // - push placeholder to the md array\n          // - once the image comes back from wiki- will replace the placeholder entry\n          // - if there is an error - the placeholder will be removed in waitForImages\n          var imgIdx = md.length;\n          if (pageName in this.imgPlaceholder) {\n            // already got this image earlier!\n            continue\n          }\n          this.imgPlaceholder[pageName] = imgIdx;\n          //console.log('placeholder for ' + pageName + ' at idx ' + imgIdx)\n          this.waitForImage++;\n          md.push(\"~\\n![\"+pageName+\"](placeholder)\\n~\")\n\n          // ask Wiki for image please\n          var self = this;\n          this.page_summary(pageName, function(response){\n            //console.log(response);\n            if ('originalimage' in response) {\n              //console.log('updating artifact ' + response.title + ' ' + self.imgPlaceholder[response.title])\n              var caption = response.title;\n              if ('extract' in response) {\n                // make the first sentese of the description the image caption\n                caption = response.extract\n                caption = caption.replace(/([.?!])\\s*(?=[A-Z])/g, \"$1|\").split(\"|\")[0]\n              }\n              self.md[self.imgPlaceholder[response.title]] = \"~\\n![\"+caption+\"](\"+response.originalimage.source+\")\\n~\";\n              delete self.imgPlaceholder[response.title]; // remove from queue\n              \n            }\n            self.waitForImage--; // remove from queue\n          }); \n        }\n        \n      }\n      \n      // headers\n      else if (node.nodeName.startsWith(\"h\")) {\n        var header = this.cleanText(node.textContent)\n        // if reached References - time to peace out\n        if (header == \"References\") {\n            break;\n        }\n        var pref = \"#\".repeat(parseInt(node.nodeName.charAt(1)))\n        md.push(pref + \" \" + header)\n      }\n      \n      // images\n      else if (node.nodeName === \"div\" && node.className.includes(\"thumb\")) {\n        var images = node.getElementsByTagName(\"img\")\n        var captions = node.getElementsByClassName(\"thumbcaption\")\n        \n        for (var j = 0; j < images.length; j++) {\n          var w = images[j].getAttribute('data-file-width') // max width of image\n          var src = \"https:\" + images[j].getAttribute('src').replace(/\\d+px/, w+'px')\n          // md.push(\"![\"+this.cleanText(captions[j].textContent)+\"](\"+src+\")\")\n          md.push(\"![\"+this.cleanText(captions[j] ? captions[j].textContent : \"\") +\"](\"+src+\")\")\n        }\n      }\n      \n      // lists\n      else if (node.nodeName == \"ol\" || node.nodeName == \"ul\") {\n        var isOrdered = node.nodeName == \"ol\"\n        var items = node.getElementsByTagName(\"li\")\n        var listMD = []\n        for (var l = 0; l < items.length; l++ ){\n          var bullet = isOrdered ? ((l+1)+\".\") : \"*\";\n          listMD.push(bullet + \" \" + this.cleanText(items[l].textContent))\n        }\n        md.push(listMD.join(\"\\n\"))\n      }\n      \n    }\n    \n    return md\n  }\n  \n  waitForImages(limit, onready) {\n    /*\n      Waits for the image queue to empty before\n      returning parsed MarkDown to client.\n      \n      LIMIT: max time in seconds to wait\n      ONREADY: claccback to trigger once everything id ready\n    */\n    var self = this\n    console.log(\"waiting: \" + limit)\n    if (this.waitForImage > 0 && limit > 0){\n      // waaaait for ittttttt\n      setTimeout(function(){self.waitForImages(limit-2, onready)}, 2000);\n    }\n    else {\n      // delete all remaining placeholders\n      var removeIdx =[]\n      for (const key in this.imgPlaceholder) {\n        removeIdx.push(this.imgPlaceholder[key])\n      }\n      removeIdx.sort(function(a,b){ return b - a; });\n      console.log(removeIdx)\n      for (var i = 0; i < removeIdx.length; i++) {\n        this.md.splice(removeIdx[i],1);\n      }\n      \n      onready(this.md.join(\"\\n\\n\"));\n    }\n  }\n}","import React, {useState, useEffect} from \"react\"\nimport hljs from \"highlight.js\"\nimport Layout from \"../components/layout\"\nimport Exhibit from \"../components/exhibit\"\nimport { AutoComplete, Typography } from 'antd';\n\nimport WikiParser from \"../malloci/wiki-parser\"\nimport VRMD from \"../malloci/vrmd-parser\"\n\nimport './museum.css'\nimport ReactMarkdown from \"react-markdown\"\n\nconst WikiViewer = () => {\n\n  const [museumTree, setMuseumTree] = useState({ theme: {floor: null, walls: null, ceiling: null}, rooms: [{name:\"1\", artifacts: []}, {name:\"2\", artifacts:[]}]})  \n  const [md, setMd] = useState('')\n\n  const wikiParser = new WikiParser()\n  const vrmdParser = new VRMD()\n\n  const [value, setValue] = useState('');\n  const [options, setOptions] = useState([]);\n\n  const formatOptions = (vals) => {\n    return vals.map((val) => {\n        return {value: val}\n    })\n  };\n\n  const onSearch = searchText => {\n    wikiParser.search(searchText, 10, function(resp){       \n        setOptions(formatOptions(resp[1]));\n    })\n  };\n\n  const onSelect = (data) => {\n    console.log('onSelect', data);\n    wikiParser.parseFull(data.replace(/ /g, \"_\"), async function(markDown){\n        console.log(markDown);\n        \n        // let tree = vrmdParser.parse(markDown)\n        // const response = await fetch(\"https://malloci.uc.r.appspot.com/generate\", {\n        // method: 'POST', // *GET, POST, PUT, DELETE, etc.\n        // mode: 'cors', // no-cors, *cors, same-origin\n        // cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\n        // credentials: 'omit', // include, *same-origin, omit\n        // headers: {\n        //     'Accept': 'application/json',\n        //     'Content-Type': 'application/json'\n        // },\n        // redirect: 'follow', // manual, *follow, error\n        // referrerPolicy: 'no-referrer', // no-referrer, *client\n        // body: JSON.stringify(tree) // body data type must match \"Content-Type\" header\n        // })\n        // if (!response.ok) {\n        // console.error(\"bad response, loading user defined tree\")\n        // setMuseumTree(tree)\n        // }\n        // else\n        // {\n        // tree = await response.json()\n        // setMuseumTree(tree)\n        // }\n        // setMd(vrmdParser.cleanedMD)\n\n    })\n  };\n\n  const onChange = data => {\n    setValue(data);\n  };\n\n\n    useEffect(()=>{\n      document.getElementById(\"md_article\").querySelectorAll(\"pre code\").forEach(block => {\n        hljs.highlightBlock(block);\n      });\n    },[md])\n\n    function flatten(text, child) {\n      return typeof child === 'string'\n        ? text + child\n        : React.Children.toArray(child.props.children).reduce(flatten, text)\n    }\n    \n    function HeadingRenderer(props) {\n      let children = React.Children.toArray(props.children)\n      let text = children.reduce(flatten, '')\n      let slug = text.toLowerCase().replace(/[.,\\/#!$%\\^&\\*;:{}=_`~()?]/g,\"\").replace(/[ ’]/g, '-')\n      return React.createElement('h' + props.level, {id: slug}, props.children)\n    }\n\n    function ImageRenderer(props) {\n      return <p><img {...props} /></p>\n    }\n  \n  return(\n  <Layout >\n    <Typography>\n    <div className=\"museum\">\n      <div id=\"md_article\" className=\"museumtext\">\n      <AutoComplete\n        value={value}\n        options={options}\n        style={{\n          width: 200,\n        }}\n        onSelect={onSelect}\n        onSearch={onSearch}\n        onChange={onChange}\n        placeholder=\"Search Wikipedia\"\n      />\n        <ReactMarkdown source={md} renderers={{heading: HeadingRenderer, image: ImageRenderer}}/>\n      </div>\n    </div>\n    </Typography>\n    <Exhibit exhibitId=\"exhibit\" tree= {museumTree} b64={false} debug={true}/>\n  </Layout>\n)};\n\nexport default WikiViewer","import React, {useState, useEffect} from \"react\"\nimport firebase from \"./firebase/firebase\"\nimport './App.css'\nimport {\n  HashRouter as Router,\n  Redirect,\n  NavLink,\n  Route,\n  Switch,\n} from 'react-router-dom';\nimport { Menu } from 'antd';\nimport Mallocieditor from \"./pages/mallocieditor\"\nimport Playground from \"./pages/playground\"\nimport Museum from \"./pages/museum\"\nimport Gallery from \"./pages/gallery\"\nimport Example from \"./pages/example\"\nimport About from \"./pages/about\"\nimport WikiViewer from \"./pages/wikiviewer\"\n\n\nconst logo = \"./logo192.png\"\n\nconst App = () => {\n  const [loggedIn, setLoggedIn] = useState(false)\n  const [redirectOnLogOut, setRedirectOnLogout] = useState(false)\n  useEffect(() => {\n    firebase.auth().onAuthStateChanged((user) => {\n      if (user) {\n        setLoggedIn(true)\n      }\n      else\n      {\n        setLoggedIn(false)\n      }\n   });\n  },[])\n\n  const editor = () => {\n    if (loggedIn && firebase.auth().currentUser.email.match(\".*berkeley[.]edu\"))\n    {\n      return(\n        <NavLink to=\"/Editor\">\n                  Editor\n        </NavLink>\n      )\n    }\n    else\n    {\n      return(\n        <NavLink to=\"/Playground\">\n                  Playground\n        </NavLink>\n      )\n    }\n  } \n\n  const logout = () => {\n    firebase.auth().signOut()\n    setRedirectOnLogout(true)\n  }\n\n  const login = () => {\n    let provider = new firebase.auth.GoogleAuthProvider();\n    firebase.auth().signInWithPopup(provider)\n    setRedirectOnLogout(false)\n  }\n\n  const signInOut = () => {\n    if (loggedIn)\n    {\n      return(\n        <a onClick={() => {logout()}}>\n                  Sign Out\n        </a>\n      )\n    }\n    else\n    {\n      return(\n        <a onClick={() => {login()}}>\n                  Sign In\n        </a>\n      )\n    }\n  }\n  \n  const RedirectRenderer = () => {\n    if(redirectOnLogOut) return <Redirect to='/' push/> \n  }\n    return (\n     <div id=\"navbar\">\n       <a href=\"/\"><img src={logo} id=\"logoformatting\"></img></a>\n\n      <div id=\"mallocititle\"><h2><a href=\"/\">Malloci</a></h2></div>\n\n\n    <Router>\n      <div id=\"menualign\">\n        \n            <Menu mode=\"horizontal\">\n              <Menu.Item key=\"gallery\">\n                <NavLink to=\"/\">\n                  Gallery\n      </NavLink>\n              </Menu.Item>\n              <Menu.Item key=\"museum\">\n              <NavLink to=\"/Malloci\">\n              About Malloci\n      </NavLink>\n    </Menu.Item>\n              <Menu.Item key=\"mallocieditor\">\n                {editor()}\n              </Menu.Item>\n              \n\n              {/* <Menu.Item key=\"about\">\n              <NavLink to=\"/TheTeam\">\n                The team\n                </NavLink>\n    </Menu.Item> */}\n            </Menu>\n            \n      </div>\n      <div id=\"signInOut\">\n        <Menu>\n          <Menu.Item key=\"signin\">\n            {signInOut()}\n          </Menu.Item>\n        </Menu>\n      </div>\n        <Switch>\n          <Route exact path=\"/\">\n            <Gallery />\n          </Route>\n          <Route exact path=\"/Playground\">\n            <Playground />\n          </Route>\n          <Route exact path=\"/Editor\">\n            <Mallocieditor />\n          </Route>\n          <Route exact path=\"/Malloci\">\n            <Museum />\n          </Route>\n          <Route path=\"/exhibits/:exhibit\">\n            <Example/>\n          </Route>\n          <Route path=\"/Editor/:id\">\n            <Mallocieditor />\n          </Route>\n          <Route exact path=\"/TheTeam\">\n            <About />\n          </Route>\n          <Route exact path=\"/WikiViewer\">\n            <WikiViewer />\n          </Route>\n          {/* <Route exact path=\"/SignIn\">\n            <SignIn />\n          </Route> */}\n        </Switch>\n        {RedirectRenderer()}\n\n      </Router>\n     </div>\n    );\n}\n\nexport default App\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App'\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}